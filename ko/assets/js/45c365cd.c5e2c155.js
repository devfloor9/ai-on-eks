"use strict";(globalThis.webpackChunkdoeks_website=globalThis.webpackChunkdoeks_website||[]).push([[3094],{25760(e,n,r){r.r(n),r.d(n,{assets:()=>t,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"infra/misc/troubleshooting/troubleshooting","title":"\ubb38\uc81c \ud574\uacb0","description":"AI on Amazon EKS(AIoEKS) \uc124\uce58 \ubb38\uc81c\uc5d0 \ub300\ud55c \ubb38\uc81c \ud574\uacb0 \uc815\ubcf4\ub97c \ucc3e\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4","source":"@site/i18n/ko/docusaurus-plugin-content-docs/current/infra/misc/troubleshooting/troubleshooting.md","sourceDirName":"infra/misc/troubleshooting","slug":"/infra/misc/troubleshooting/","permalink":"/ai-on-eks/ko/docs/infra/misc/troubleshooting/","draft":false,"unlisted":false,"editUrl":"https://github.com/awslabs/ai-on-eks/blob/main/website/docs/infra/misc/troubleshooting/troubleshooting.md","tags":[],"version":"current","frontMatter":{},"sidebar":"infra","previous":{"title":"EMR NVIDIA Spark-RAPIDS","permalink":"/ai-on-eks/ko/docs/infra/misc/emr-spark-rapids"},"next":{"title":"EKS \uae30\ubc18 \uc5d0\uc774\uc804\ud2b8","permalink":"/ai-on-eks/ko/docs/infra/agents-on-eks"}}');var i=r(74848),a=r(28453);const l={},o="\ubb38\uc81c \ud574\uacb0",t={},c=[{value:"\uc624\ub958: local-exec provisioner error",id:"\uc624\ub958-local-exec-provisioner-error",level:2},{value:"\ubb38\uc81c \uc124\uba85:",id:"\ubb38\uc81c-\uc124\uba85",level:3},{value:"\ud574\uacb0 \ubc29\ubc95",id:"\ud574\uacb0-\ubc29\ubc95",level:3},{value:"Terraform Destroy \uc911 \ud0c0\uc784\uc544\uc6c3",id:"terraform-destroy-\uc911-\ud0c0\uc784\uc544\uc6c3",level:2},{value:"\ubb38\uc81c \uc124\uba85:",id:"\ubb38\uc81c-\uc124\uba85-1",level:3},{value:"\uc99d\uc0c1:",id:"\uc99d\uc0c1",level:3},{value:"\ud574\uacb0 \ubc29\ubc95:",id:"\ud574\uacb0-\ubc29\ubc95-1",level:3},{value:"\uc624\ub958: could not download chart",id:"\uc624\ub958-could-not-download-chart",level:2},{value:"\ubb38\uc81c \uc124\uba85:",id:"\ubb38\uc81c-\uc124\uba85-2",level:3},{value:"\ud574\uacb0 \ubc29\ubc95:",id:"\ud574\uacb0-\ubc29\ubc95-2",level:3},{value:"EKS \ud074\ub7ec\uc2a4\ud130\uc640 \uc778\uc99d\ud558\uae30 \uc704\ud55c Terraform apply/destroy \uc624\ub958",id:"eks-\ud074\ub7ec\uc2a4\ud130\uc640-\uc778\uc99d\ud558\uae30-\uc704\ud55c-terraform-applydestroy-\uc624\ub958",level:2},{value:"EMR Containers Virtual Cluster (dhwtlq9yx34duzq5q3akjac00) delete: unexpected state &#39;ARRESTED&#39;",id:"emr-containers-virtual-cluster-dhwtlq9yx34duzq5q3akjac00-delete-unexpected-state-arrested",level:2},{value:"\ub124\uc784\uc2a4\ud398\uc774\uc2a4 \uc885\ub8cc \ubb38\uc81c",id:"\ub124\uc784\uc2a4\ud398\uc774\uc2a4-\uc885\ub8cc-\ubb38\uc81c",level:2},{value:"KMS Alias AlreadyExistsException",id:"kms-alias-alreadyexistsexception",level:2},{value:"\uc624\ub958: creating CloudWatch Logs Log Group",id:"\uc624\ub958-creating-cloudwatch-logs-log-group",level:2},{value:"Karpenter \uc624\ub958 - Service Linked Role \ub204\ub77d",id:"karpenter-\uc624\ub958---service-linked-role-\ub204\ub77d",level:2},{value:"\ubc30\ud3ec \ud6c4 Karpenter\uac00 CrashLoopBackOff \uc0c1\ud0dc - STS \uc624\ub958",id:"\ubc30\ud3ec-\ud6c4-karpenter\uac00-crashloopbackoff-\uc0c1\ud0dc---sts-\uc624\ub958",level:2},{value:"\ud574\uacb0 \ubc29\ubc95:",id:"\ud574\uacb0-\ubc29\ubc95-3",level:2},{value:"\uc624\ub958: AmazonEKS_CNI_IPv6_Policy does not exist",id:"\uc624\ub958-amazoneks_cni_ipv6_policy-does-not-exist",level:2},{value:"\ubb38\uc81c \uc124\uba85:",id:"\ubb38\uc81c-\uc124\uba85-3",level:3},{value:"\ud574\uacb0 \ubc29\ubc95:",id:"\ud574\uacb0-\ubc29\ubc95-4",level:3}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"\ubb38\uc81c-\ud574\uacb0",children:"\ubb38\uc81c \ud574\uacb0"})}),"\n",(0,i.jsx)(n.p,{children:"AI on Amazon EKS(AIoEKS) \uc124\uce58 \ubb38\uc81c\uc5d0 \ub300\ud55c \ubb38\uc81c \ud574\uacb0 \uc815\ubcf4\ub97c \ucc3e\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4"}),"\n",(0,i.jsx)(n.h2,{id:"\uc624\ub958-local-exec-provisioner-error",children:"\uc624\ub958: local-exec provisioner error"}),"\n",(0,i.jsx)(n.p,{children:"local-exec provisioner \uc2e4\ud589 \uc911 \ub2e4\uc74c \uc624\ub958\uac00 \ubc1c\uc0dd\ud558\ub294 \uacbd\uc6b0:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:'Error: local-exec provisioner error \\\nwith module.eks-blueprints.module.emr_on_eks["data_team_b"].null_resource.update_trust_policy,\\\n on .terraform/modules/eks-blueprints/modules/emr-on-eks/main.tf line 105, in resource "null_resource" \\\n "update_trust_policy":\u2502 105: provisioner "local-exec" {\u2502 \u2502 Error running command \'set -e\u2502 \u2502 aws emr-containers update-role-trust-policy \\\n \u2502 --cluster-name emr-on-eks \\\u2502 --namespace emr-data-team-b \\\u2502 --role-name emr-on-eks-emr-eks-data-team-b\n'})}),"\n",(0,i.jsx)(n.h3,{id:"\ubb38\uc81c-\uc124\uba85",children:"\ubb38\uc81c \uc124\uba85:"}),"\n",(0,i.jsx)(n.p,{children:"\uc624\ub958 \uba54\uc2dc\uc9c0\ub294 \uc0ac\uc6a9 \uc911\uc778 AWS CLI \ubc84\uc804\uc5d0 emr-containers \uba85\ub839\uc774 \uc5c6\uc74c\uc744 \ub098\ud0c0\ub0c5\ub2c8\ub2e4. \uc774 \ubb38\uc81c\ub294 AWS CLI \ubc84\uc804 2.0.54\uc5d0\uc11c \ud574\uacb0\ub418\uc5c8\uc2b5\ub2c8\ub2e4."}),"\n",(0,i.jsx)(n.h3,{id:"\ud574\uacb0-\ubc29\ubc95",children:"\ud574\uacb0 \ubc29\ubc95"}),"\n",(0,i.jsx)(n.p,{children:"\ubb38\uc81c\ub97c \ud574\uacb0\ud558\ub824\uba74 \ub2e4\uc74c \uba85\ub839\uc744 \uc2e4\ud589\ud558\uc5ec AWS CLI \ubc84\uc804\uc744 2.0.54 \uc774\uc0c1\uc73c\ub85c \uc5c5\ub370\uc774\ud2b8\ud558\uc138\uc694:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"pip install --upgrade awscliv2\n"})}),"\n",(0,i.jsx)(n.p,{children:"AWS CLI \ubc84\uc804\uc744 \uc5c5\ub370\uc774\ud2b8\ud558\uba74 \ud504\ub85c\ube44\uc800\ub2dd \ud504\ub85c\uc138\uc2a4 \uc911\uc5d0 \ud544\uc694\ud55c emr-containers \uba85\ub839\uc744 \uc0ac\uc6a9\ud560 \uc218 \uc788\uc73c\uba70 \uc131\uacf5\uc801\uc73c\ub85c \uc2e4\ud589\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),"\n",(0,i.jsxs)(n.p,{children:["\ubb38\uc81c\uac00 \uacc4\uc18d\ub418\uac70\ub098 \ucd94\uac00 \uc9c0\uc6d0\uc774 \ud544\uc694\ud55c \uacbd\uc6b0 \uc790\uc138\ud55c \ub0b4\uc6a9\uc740 ",(0,i.jsx)(n.a,{href:"https://github.com/aws/aws-cli/issues/6162",children:"AWS CLI GitHub \uc774\uc288"}),"\ub97c \ucc38\uc870\ud558\uac70\ub098 \uc9c0\uc6d0 \ud300\uc5d0 \ubb38\uc758\ud558\uc5ec \ucd94\uac00 \uc548\ub0b4\ub97c \ubc1b\uc73c\uc138\uc694."]}),"\n",(0,i.jsx)(n.h2,{id:"terraform-destroy-\uc911-\ud0c0\uc784\uc544\uc6c3",children:"Terraform Destroy \uc911 \ud0c0\uc784\uc544\uc6c3"}),"\n",(0,i.jsx)(n.h3,{id:"\ubb38\uc81c-\uc124\uba85-1",children:"\ubb38\uc81c \uc124\uba85:"}),"\n",(0,i.jsx)(n.p,{children:"\uace0\uac1d\uc740 \ud658\uacbd\uc744 \uc0ad\uc81c\ud558\ub294 \ub3d9\uc548 \ud2b9\ud788 VPC\uac00 \uc0ad\uc81c\ub420 \ub54c \ud0c0\uc784\uc544\uc6c3\uc744 \uacbd\ud5d8\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uc774\ub294 vpc-cni \uad6c\uc131 \uc694\uc18c\uc640 \uad00\ub828\ub41c \uc54c\ub824\uc9c4 \ubb38\uc81c\uc785\ub2c8\ub2e4."}),"\n",(0,i.jsx)(n.h3,{id:"\uc99d\uc0c1",children:"\uc99d\uc0c1:"}),"\n",(0,i.jsx)(n.p,{children:"\ud658\uacbd\uc774 \uc0ad\uc81c\ub41c \ud6c4\uc5d0\ub3c4 ENI(Elastic Network Interface)\uac00 \uc11c\ube0c\ub137\uc5d0 \uc5f0\uacb0\ub41c \uc0c1\ud0dc\ub85c \uc720\uc9c0\ub429\ub2c8\ub2e4.\nENI\uc640 \uc5f0\uacb0\ub41c EKS \uad00\ub9ac\ud615 \ubcf4\uc548 \uadf8\ub8f9\uc774 EKS\uc5d0 \uc758\ud574 \uc0ad\uc81c\ub420 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."}),"\n",(0,i.jsx)(n.h3,{id:"\ud574\uacb0-\ubc29\ubc95-1",children:"\ud574\uacb0 \ubc29\ubc95:"}),"\n",(0,i.jsx)(n.p,{children:"\uc774 \ubb38\uc81c\ub97c \ud574\uacb0\ud558\ub824\uba74 \uc544\ub798 \uad8c\uc7a5 \ud574\uacb0 \ubc29\ubc95\uc744 \ub530\ub974\uc138\uc694:"}),"\n",(0,i.jsxs)(n.p,{children:["\uc81c\uacf5\ub41c ",(0,i.jsx)(n.code,{children:"cleanup.sh"})," \uc2a4\ud06c\ub9bd\ud2b8\ub97c \uc0ac\uc6a9\ud558\uc5ec \ub9ac\uc18c\uc2a4\ub97c \uc62c\ubc14\ub974\uac8c \uc815\ub9ac\ud569\ub2c8\ub2e4. \ube14\ub8e8\ud504\ub9b0\ud2b8\uc5d0 \ud3ec\ud568\ub41c ",(0,i.jsx)(n.code,{children:"cleanup.sh"})," \uc2a4\ud06c\ub9bd\ud2b8\ub97c \uc2e4\ud589\ud569\ub2c8\ub2e4.\n\uc774 \uc2a4\ud06c\ub9bd\ud2b8\ub294 \ub0a8\uc544\uc788\ub294 ENI \ubc0f \uad00\ub828 \ubcf4\uc548 \uadf8\ub8f9\uc758 \uc81c\uac70\ub97c \ucc98\ub9ac\ud569\ub2c8\ub2e4."]}),"\n",(0,i.jsx)(n.h2,{id:"\uc624\ub958-could-not-download-chart",children:"\uc624\ub958: could not download chart"}),"\n",(0,i.jsx)(n.p,{children:"\ucc28\ud2b8\ub97c \ub2e4\uc6b4\ub85c\ub4dc\ud558\ub824\uace0 \ud560 \ub54c \ub2e4\uc74c \uc624\ub958\uac00 \ubc1c\uc0dd\ud558\ub294 \uacbd\uc6b0:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:'\u2502 Error: could not download chart: failed to download "oci://public.ecr.aws/karpenter/karpenter" at version "v0.18.1"\n\u2502\n\u2502   with module.eks_blueprints_kubernetes_addons.module.karpenter[0].module.helm_addon.helm_release.addon[0],\n\u2502   on .terraform/modules/eks_blueprints_kubernetes_addons/modules/kubernetes-addons/helm-addon/main.tf line 1, in resource "helm_release" "addon":\n\u2502    1: resource "helm_release" "addon" {\n\u2502\n'})}),"\n",(0,i.jsx)(n.p,{children:"\ubb38\uc81c\ub97c \ud574\uacb0\ud558\ub824\uba74 \uc544\ub798 \ub2e8\uacc4\ub97c \ub530\ub974\uc138\uc694:"}),"\n",(0,i.jsx)(n.h3,{id:"\ubb38\uc81c-\uc124\uba85-2",children:"\ubb38\uc81c \uc124\uba85:"}),"\n",(0,i.jsx)(n.p,{children:"\uc624\ub958 \uba54\uc2dc\uc9c0\ub294 \uc9c0\uc815\ub41c \ucc28\ud2b8\ub97c \ub2e4\uc6b4\ub85c\ub4dc\ud558\ub294 \ub370 \uc2e4\ud328\ud588\uc74c\uc744 \ub098\ud0c0\ub0c5\ub2c8\ub2e4. \uc774 \ubb38\uc81c\ub294 Karpenter \uc124\uce58 \uc911 Terraform\uc758 \ubc84\uadf8\ub85c \uc778\ud574 \ubc1c\uc0dd\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),"\n",(0,i.jsx)(n.h3,{id:"\ud574\uacb0-\ubc29\ubc95-2",children:"\ud574\uacb0 \ubc29\ubc95:"}),"\n",(0,i.jsx)(n.p,{children:"\ubb38\uc81c\ub97c \ud574\uacb0\ud558\ub824\uba74 \ub2e4\uc74c \ub2e8\uacc4\ub97c \uc2dc\ub3c4\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4:"}),"\n",(0,i.jsx)(n.p,{children:"ECR\ub85c \uc778\uc99d: \ucc28\ud2b8\uac00 \uc788\ub294 ECR(Elastic Container Registry)\ub85c \uc778\uc99d\ud558\uae30 \uc704\ud574 \ub2e4\uc74c \uba85\ub839\uc744 \uc2e4\ud589\ud569\ub2c8\ub2e4:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws\n"})}),"\n",(0,i.jsx)(n.p,{children:"terraform apply \uc7ac\uc2e4\ud589: Terraform \uad6c\uc131\uc744 \ub2e4\uc2dc \uc801\uc6a9\ud558\uae30 \uc704\ud574 --auto-approve \ud50c\ub798\uadf8\uc640 \ud568\uaed8 terraform apply \uba85\ub839\uc744 \ub2e4\uc2dc \uc2e4\ud589\ud569\ub2c8\ub2e4:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"terraform apply --auto-approve\n"})}),"\n",(0,i.jsx)(n.p,{children:"ECR\ub85c \uc778\uc99d\ud558\uace0 terraform apply \uba85\ub839\uc744 \ub2e4\uc2dc \uc2e4\ud589\ud558\uba74 \uc124\uce58 \ud504\ub85c\uc138\uc2a4 \uc911\uc5d0 \ud544\uc694\ud55c \ucc28\ud2b8\ub97c \uc131\uacf5\uc801\uc73c\ub85c \ub2e4\uc6b4\ub85c\ub4dc\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),"\n",(0,i.jsx)(n.h2,{id:"eks-\ud074\ub7ec\uc2a4\ud130\uc640-\uc778\uc99d\ud558\uae30-\uc704\ud55c-terraform-applydestroy-\uc624\ub958",children:"EKS \ud074\ub7ec\uc2a4\ud130\uc640 \uc778\uc99d\ud558\uae30 \uc704\ud55c Terraform apply/destroy \uc624\ub958"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'ERROR:\n\u2577\n\u2502 Error: Get "http://localhost/api/v1/namespaces/kube-system/configmaps/aws-auth": dial tcp [::1]:80: connect: connection refused\n\u2502\n\u2502   with module.eks.kubernetes_config_map_v1_data.aws_auth[0],\n\u2502   on .terraform/modules/eks/main.tf line 550, in resource "kubernetes_config_map_v1_data" "aws_auth":\n\u2502  550: resource "kubernetes_config_map_v1_data" "aws_auth" {\n\u2502\n\u2575\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\ud574\uacb0 \ubc29\ubc95:"}),"\n\uc774 \uc0c1\ud669\uc5d0\uc11c Terraform\uc740 \ub370\uc774\ud130 \ub9ac\uc18c\uc2a4\ub97c \uc0c8\ub85c \uace0\uce58\uace0 EKS \ud074\ub7ec\uc2a4\ud130\uc640 \uc778\uc99d\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.\n",(0,i.jsx)(n.a,{href:"https://github.com/terraform-aws-modules/terraform-aws-eks/issues/1234",children:"\uc5ec\uae30"}),"\uc5d0\uc11c \ub17c\uc758\ub97c \ucc38\uc870\ud558\uc138\uc694"]}),"\n",(0,i.jsx)(n.p,{children:"\uba3c\uc800 exec \ud50c\ub7ec\uadf8\uc778\uc744 \uc0ac\uc6a9\ud558\uc5ec \uc774 \uc811\uadfc \ubc29\uc2dd\uc744 \uc2dc\ub3c4\ud558\uc138\uc694."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-terraform",children:'provider "kubernetes" {\n  host                   = module.eks_blueprints.eks_cluster_endpoint\n  cluster_ca_certificate = base64decode(module.eks_blueprints.eks_cluster_certificate_authority_data)\n\n  exec {\n    api_version = "client.authentication.k8s.io/v1beta1"\n    command     = "aws"\n    args = ["eks", "get-token", "--cluster-name", module.eks_blueprints.eks_cluster_id]\n  }\n}\n\n\n'})}),"\n",(0,i.jsx)(n.p,{children:"\uc704\uc758 \ubcc0\uacbd \ud6c4\uc5d0\ub3c4 \ubb38\uc81c\uac00 \uc9c0\uc18d\ub418\uba74 \ub85c\uceec kube config \ud30c\uc77c\uc744 \uc0ac\uc6a9\ud558\ub294 \ub300\uccb4 \uc811\uadfc \ubc29\uc2dd\uc744 \uc0ac\uc6a9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\n\ucc38\uace0: \uc774 \uc811\uadfc \ubc29\uc2dd\uc740 \ud504\ub85c\ub355\uc158\uc5d0 \uc774\uc0c1\uc801\uc774\uc9c0 \uc54a\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \ub85c\uceec kube config\ub85c \ud074\ub7ec\uc2a4\ud130\ub97c \uc801\uc6a9/\uc0ad\uc81c\ud558\ub294 \ub370 \ub3c4\uc6c0\uc774 \ub429\ub2c8\ub2e4."}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"\ud074\ub7ec\uc2a4\ud130\uc6a9 \ub85c\uceec kubeconfig \uc0dd\uc131"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"aws eks update-kubeconfig --name <EKS_CLUSTER_NAME> --region <CLUSTER_REGION>\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsxs)(n.li,{children:["config_path\ub9cc \uc0ac\uc6a9\ud558\uc5ec \uc544\ub798 \uad6c\uc131\uc73c\ub85c ",(0,i.jsx)(n.code,{children:"providers.tf"})," \ud30c\uc77c\uc744 \uc5c5\ub370\uc774\ud2b8\ud569\ub2c8\ub2e4."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-terraform",children:'provider "kubernetes" {\n    config_path = "<HOME_PATH>/.kube/config"\n}\n\nprovider "helm" {\n    kubernetes {\n        config_path = "<HOME_PATH>/.kube/config"\n    }\n}\n\nprovider "kubectl" {\n    config_path = "<HOME_PATH>/.kube/config"\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"emr-containers-virtual-cluster-dhwtlq9yx34duzq5q3akjac00-delete-unexpected-state-arrested",children:"EMR Containers Virtual Cluster (dhwtlq9yx34duzq5q3akjac00) delete: unexpected state 'ARRESTED'"}),"\n",(0,i.jsx)(n.p,{children:"\"waiting for EMR Containers Virtual Cluster (xwbc22787q6g1wscfawttzzgb) delete: unexpected state 'ARRESTED', wanted target ''. last error: %!s(nil)\"\ub77c\ub294 \uc624\ub958 \uba54\uc2dc\uc9c0\uac00 \ub098\ud0c0\ub098\uba74 \uc544\ub798 \ub2e8\uacc4\ub97c \ub530\ub77c \ubb38\uc81c\ub97c \ud574\uacb0\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4:"}),"\n",(0,i.jsxs)(n.p,{children:["\ucc38\uace0: ",(0,i.jsx)(n.code,{children:"<REGION>"}),"\uc744 \uac00\uc0c1 \ud074\ub7ec\uc2a4\ud130\uac00 \uc704\uce58\ud55c \uc801\uc808\ud55c AWS \ub9ac\uc804\uc73c\ub85c \ubc14\uafb8\uc138\uc694."]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"\ud130\ubbf8\ub110 \ub610\ub294 \uba85\ub839 \ud504\ub86c\ud504\ud2b8\ub97c \uc5fd\ub2c8\ub2e4."}),"\n",(0,i.jsx)(n.li,{children:'\ub2e4\uc74c \uba85\ub839\uc744 \uc2e4\ud589\ud558\uc5ec "ARRESTED" \uc0c1\ud0dc\uc758 \uac00\uc0c1 \ud074\ub7ec\uc2a4\ud130\ub97c \ub098\uc5f4\ud569\ub2c8\ub2e4:'}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"aws emr-containers list-virtual-clusters --region <REGION> --states ARRESTED \\\n--query 'virtualClusters[0].id' --output text\n"})}),"\n",(0,i.jsx)(n.p,{children:'\uc774 \uba85\ub839\uc740 "ARRESTED" \uc0c1\ud0dc\uc758 \uac00\uc0c1 \ud074\ub7ec\uc2a4\ud130 ID\ub97c \uac80\uc0c9\ud569\ub2c8\ub2e4.'}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:"\ub2e4\uc74c \uba85\ub839\uc744 \uc2e4\ud589\ud558\uc5ec \uac00\uc0c1 \ud074\ub7ec\uc2a4\ud130\ub97c \uc0ad\uc81c\ud569\ub2c8\ub2e4:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"aws emr-containers list-virtual-clusters --region <REGION> --states ARRESTED \\\n--query 'virtualClusters[0].id' --output text | xargs -I{} aws emr-containers delete-virtual-cluster \\\n--region <REGION> --id {}\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"<VIRTUAL_CLUSTER_ID>"}),"\ub97c \uc774\uc804 \ub2e8\uacc4\uc5d0\uc11c \uc5bb\uc740 \uac00\uc0c1 \ud074\ub7ec\uc2a4\ud130 ID\ub85c \ubc14\uafb8\uc138\uc694."]}),"\n",(0,i.jsx)(n.p,{children:'\uc774 \uba85\ub839\uc744 \uc2e4\ud589\ud558\uba74 "ARRESTED" \uc0c1\ud0dc\uc758 \uac00\uc0c1 \ud074\ub7ec\uc2a4\ud130\ub97c \uc0ad\uc81c\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uc774\ub807\uac8c \ud558\uba74 \uc608\uae30\uce58 \uc54a\uc740 \uc0c1\ud0dc \ubb38\uc81c\uac00 \ud574\uacb0\ub418\uace0 \ucd94\uac00 \uc791\uc5c5\uc744 \uc9c4\ud589\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.'}),"\n",(0,i.jsx)(n.h2,{id:"\ub124\uc784\uc2a4\ud398\uc774\uc2a4-\uc885\ub8cc-\ubb38\uc81c",children:"\ub124\uc784\uc2a4\ud398\uc774\uc2a4 \uc885\ub8cc \ubb38\uc81c"}),"\n",(0,i.jsx)(n.p,{children:'\ub124\uc784\uc2a4\ud398\uc774\uc2a4\uac00 "Terminating" \uc0c1\ud0dc\uc5d0\uc11c \uba48\ucd94\uace0 \uc0ad\uc81c\ud560 \uc218 \uc5c6\ub294 \ubb38\uc81c\uac00 \ubc1c\uc0dd\ud558\uba74 \ub2e4\uc74c \uba85\ub839\uc744 \uc0ac\uc6a9\ud558\uc5ec \ub124\uc784\uc2a4\ud398\uc774\uc2a4\uc758 finalizer\ub97c \uc81c\uac70\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4:'}),"\n",(0,i.jsxs)(n.p,{children:["\ucc38\uace0: ",(0,i.jsx)(n.code,{children:"<namespace>"}),"\ub97c \uc0ad\uc81c\ud558\ub824\ub294 \ub124\uc784\uc2a4\ud398\uc774\uc2a4 \uc774\ub984\uc73c\ub85c \ubc14\uafb8\uc138\uc694."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:'NAMESPACE=<namespace>\nkubectl get namespace $NAMESPACE -o json | sed \'s/"kubernetes"//\' | kubectl replace --raw "/api/v1/namespaces/$NAMESPACE/finalize" -f -\n'})}),"\n",(0,i.jsx)(n.p,{children:'\uc774 \uba85\ub839\uc740 \ub124\uc784\uc2a4\ud398\uc774\uc2a4 \uc138\ubd80 \uc815\ubcf4\ub97c JSON \ud615\uc2dd\uc73c\ub85c \uac80\uc0c9\ud558\uace0, "kubernetes" finalizer\ub97c \uc81c\uac70\ud558\uace0, \ub124\uc784\uc2a4\ud398\uc774\uc2a4\uc5d0\uc11c finalizer\ub97c \uc81c\uac70\ud558\uae30 \uc704\ud574 replace \uc791\uc5c5\uc744 \uc218\ud589\ud569\ub2c8\ub2e4. \uc774\ub807\uac8c \ud558\uba74 \ub124\uc784\uc2a4\ud398\uc774\uc2a4\uac00 \uc885\ub8cc \ud504\ub85c\uc138\uc2a4\ub97c \uc644\ub8cc\ud558\uace0 \uc131\uacf5\uc801\uc73c\ub85c \uc0ad\uc81c\ub420 \uc218 \uc788\uc2b5\ub2c8\ub2e4.'}),"\n",(0,i.jsx)(n.p,{children:"\uc774 \uc791\uc5c5\uc744 \uc218\ud589\ud558\ub294 \ub370 \ud544\uc694\ud55c \uad8c\ud55c\uc774 \uc788\ub294\uc9c0 \ud655\uc778\ud558\uc138\uc694. \ubb38\uc81c\uac00 \uacc4\uc18d\ub418\uac70\ub098 \ucd94\uac00 \uc9c0\uc6d0\uc774 \ud544\uc694\ud55c \uacbd\uc6b0 \uc9c0\uc6d0 \ud300\uc5d0 \uc5f0\ub77d\ud558\uc5ec \ucd94\uac00 \uc548\ub0b4 \ubc0f \ubb38\uc81c \ud574\uacb0 \ub2e8\uacc4\ub97c \ubc1b\uc73c\uc138\uc694."}),"\n",(0,i.jsx)(n.h2,{id:"kms-alias-alreadyexistsexception",children:"KMS Alias AlreadyExistsException"}),"\n",(0,i.jsxs)(n.p,{children:["Terraform \uc124\uce58 \ub610\ub294 \uc7ac\ubc30\ud3ec \uc911\uc5d0 \ub2e4\uc74c\uacfc \uac19\uc740 \uc624\ub958\uac00 \ubc1c\uc0dd\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4: ",(0,i.jsx)(n.code,{children:"AlreadyExistsException: An alias with the name ..."})," already exists. \uc774\ub294 \uc0dd\uc131\ud558\ub824\ub294 KMS \ubcc4\uce6d\uc774 AWS \uacc4\uc815\uc5d0 \uc774\ubbf8 \uc874\uc7ac\ud560 \ub54c \ubc1c\uc0dd\ud569\ub2c8\ub2e4."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'\u2502 Error: creating KMS Alias (alias/eks/trainium-inferentia): AlreadyExistsException: An alias with the name arn:aws:kms:us-west-2:23423434:alias/eks/trainium-inferentia already exists\n\u2502\n\u2502   with module.eks.module.kms.aws_kms_alias.this["cluster"],\n\u2502   on .terraform/modules/eks.kms/main.tf line 452, in resource "aws_kms_alias" "this":\n\u2502  452: resource "aws_kms_alias" "this" {\n\u2502\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\ud574\uacb0 \ubc29\ubc95:"})}),"\n",(0,i.jsx)(n.p,{children:"\uc774 \ubb38\uc81c\ub97c \ud574\uacb0\ud558\ub824\uba74 aws kms delete-alias \uba85\ub839\uc744 \uc0ac\uc6a9\ud558\uc5ec \uae30\uc874 KMS \ubcc4\uce6d\uc744 \uc0ad\uc81c\ud569\ub2c8\ub2e4. \uba85\ub839\uc744 \uc2e4\ud589\ud558\uae30 \uc804\uc5d0 \ubcc4\uce6d \uc774\ub984\uacfc \ub9ac\uc804\uc744 \uc5c5\ub370\uc774\ud2b8\ud558\uc138\uc694."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"aws kms delete-alias --alias-name <KMS_ALIAS_NAME> --region <ENTER_REGION>\n"})}),"\n",(0,i.jsx)(n.h2,{id:"\uc624\ub958-creating-cloudwatch-logs-log-group",children:"\uc624\ub958: creating CloudWatch Logs Log Group"}),"\n",(0,i.jsx)(n.p,{children:"Terraform\uc774 AWS \uacc4\uc815\uc5d0 \uc774\ubbf8 \uc874\uc7ac\ud558\uae30 \ub54c\ubb38\uc5d0 CloudWatch Logs \ub85c\uadf8 \uadf8\ub8f9\uc744 \uc0dd\uc131\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'\u2577\n\u2502 Error: creating CloudWatch Logs Log Group (/aws/eks/trainium-inferentia/cluster): operation error CloudWatch Logs: CreateLogGroup, https response error StatusCode: 400, RequestID: 5c34c47a-72c6-44b2-a345-925824f24d38, ResourceAlreadyExistsException: The specified log group already exists\n\u2502\n\u2502   with module.eks.aws_cloudwatch_log_group.this[0],\n\u2502   on .terraform/modules/eks/main.tf line 106, in resource "aws_cloudwatch_log_group" "this":\n\u2502  106: resource "aws_cloudwatch_log_group" "this" {\n\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\ud574\uacb0 \ubc29\ubc95:"})}),"\n",(0,i.jsx)(n.p,{children:"\ub85c\uadf8 \uadf8\ub8f9 \uc774\ub984\uacfc \ub9ac\uc804\uc744 \uc5c5\ub370\uc774\ud2b8\ud558\uc5ec \uae30\uc874 \ub85c\uadf8 \uadf8\ub8f9\uc744 \uc0ad\uc81c\ud569\ub2c8\ub2e4."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"aws logs delete-log-group --log-group-name <LOG_GROUP_NAME> --region <ENTER_REGION>\n"})}),"\n",(0,i.jsx)(n.h2,{id:"karpenter-\uc624\ub958---service-linked-role-\ub204\ub77d",children:"Karpenter \uc624\ub958 - Service Linked Role \ub204\ub77d"}),"\n",(0,i.jsx)(n.p,{children:"Karpenter\uac00 \uc0c8 \uc778\uc2a4\ud134\uc2a4\ub97c \uc0dd\uc131\ud558\ub824\uace0 \ud560 \ub54c \uc544\ub798 \uc624\ub958\uac00 \ubc1c\uc0dd\ud569\ub2c8\ub2e4."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'"error":"launching nodeclaim, creating instance, with fleet error(s), AuthFailure.ServiceLinkedRoleCreationNotPermitted: The provided credentials do not have permission to create the service-linked role for EC2 Spot Instances."}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\ud574\uacb0 \ubc29\ubc95:"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"ServiceLinkedRoleCreationNotPermitted"})," \uc624\ub958\ub97c \ud53c\ud558\ub824\uba74 \uc0ac\uc6a9 \uc911\uc778 AWS \uacc4\uc815\uc5d0 \uc11c\ube44\uc2a4 \uc5f0\uacb0 \uc5ed\ud560\uc744 \uc0dd\uc131\ud574\uc57c \ud569\ub2c8\ub2e4."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"aws iam create-service-linked-role --aws-service-name spot.amazonaws.com\n"})}),"\n",(0,i.jsx)(n.h2,{id:"\ubc30\ud3ec-\ud6c4-karpenter\uac00-crashloopbackoff-\uc0c1\ud0dc---sts-\uc624\ub958",children:"\ubc30\ud3ec \ud6c4 Karpenter\uac00 CrashLoopBackOff \uc0c1\ud0dc - STS \uc624\ub958"}),"\n",(0,i.jsx)(n.p,{children:"\ubc30\ud3ec \ud6c4 karpenter \ud30c\ub4dc\ub97c \ud655\uc778\ud560 \ub54c \ub2e4\uc74c \ub85c\uadf8\uc640 \ud568\uaed8 CrashLoopBackOff \uc0c1\ud0dc\uc785\ub2c8\ub2e4:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'{"level":"ERROR","time":"2025-09-30T12:52:27.746Z","logger":"controller","message":"ec2 api connectivity check failed","commit":"13242ea","error":"operation error EC2: DescribeInstanceTypes,\nget identity: get credentials: failed to refresh cached credentials, failed to retrieve credentials, operation error STS: AssumeRoleWithWebIdentity, https response error StatusCode: 403, RequestID: xxx, RegionDisabledException: STS is not activated in this region for account:xxxxx. Your account administrator can activate STS in this region using the IAM Console."}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"\ud574\uacb0-\ubc29\ubc95-3",children:"\ud574\uacb0 \ubc29\ubc95:"}),"\n",(0,i.jsx)(n.p,{children:'"STS is not activated in this region for account" \uba54\uc2dc\uc9c0\ub294 AWS \uacc4\uc815 \uad00\ub9ac\uc790\uac00 \uc694\uccad\uc774 \uc774\ub8e8\uc5b4\uc9c0\ub294 \ud2b9\uc815 \ub9ac\uc804\uc5d0\uc11c \uc784\uc2dc \uc790\uaca9 \uc99d\uba85\uc744 \uc0dd\uc131\ud558\uae30 \uc704\ud55c \uc694\uccad\uc774 \uc131\uacf5\ud558\uae30 \uc804\uc5d0 AWS Security Token Service(STS)\ub97c \ud65c\uc131\ud654\ud574\uc57c \ud568\uc744 \uc758\ubbf8\ud569\ub2c8\ub2e4. \uacc4\uc815 \uc124\uc815 \ud398\uc774\uc9c0\uc758 AWS IAM \ucf58\uc194\uc744 \uc0ac\uc6a9\ud558\uc5ec \ub9ac\uc804\uc5d0 \ub300\ud574 STS\ub97c \ud65c\uc131\ud654\ud560 \uc218 \uc788\uc73c\uba70, \uc5ec\uae30\uc5d0\uc11c \ud604\uc7ac \ud65c\uc131\ud654\ub41c \ub9ac\uc804\ub3c4 \ud45c\uc2dc\ub429\ub2c8\ub2e4.'}),"\n",(0,i.jsxs)(n.p,{children:["\ubb38\uc11c \ub9c1\ud06c: ",(0,i.jsx)(n.a,{href:"https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_temp_enable-regions.html",children:"https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_temp_enable-regions.html"})]}),"\n",(0,i.jsx)(n.h2,{id:"\uc624\ub958-amazoneks_cni_ipv6_policy-does-not-exist",children:"\uc624\ub958: AmazonEKS_CNI_IPv6_Policy does not exist"}),"\n",(0,i.jsx)(n.p,{children:"IPv6\ub97c \uc9c0\uc6d0\ud558\ub294 \uc194\ub8e8\uc158\uc744 \ubc30\ud3ec\ud560 \ub54c \ub2e4\uc74c \uc624\ub958\uac00 \ubc1c\uc0dd\ud558\ub294 \uacbd\uc6b0:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"\u2502 Error: attaching IAM Policy (arn:aws:iam::1234567890:policy/AmazonEKS_CNI_IPv6_Policy) to IAM Role (core-node-group-eks-node-group-20241111182906854800000003): operation error IAM: AttachRolePolicy, https response error StatusCode: 404, RequestID: 9c99395a-ce3d-4a05-b119-538470a3a9f7, NoSuchEntity: Policy arn:aws:iam::1234567890:policy/AmazonEKS_CNI_IPv6_Policy does not exist or is not attachable.\n"})}),"\n",(0,i.jsx)(n.h3,{id:"\ubb38\uc81c-\uc124\uba85-3",children:"\ubb38\uc81c \uc124\uba85:"}),"\n",(0,i.jsx)(n.p,{children:"Amazon VPC CNI \ud50c\ub7ec\uadf8\uc778\uc740 IPv6 \uc8fc\uc18c\ub97c \ud560\ub2f9\ud558\uae30 \uc704\ud574 IAM \uad8c\ud55c\uc774 \ud544\uc694\ud558\ubbc0\ub85c IAM \uc815\ucc45\uc744 \uc0dd\uc131\ud558\uace0 CNI\uac00 \uc0ac\uc6a9\ud560 \uc5ed\ud560\uacfc \uc5f0\uacb0\ud574\uc57c \ud569\ub2c8\ub2e4. \uadf8\ub7ec\ub098 \uac01 IAM \uc815\ucc45 \uc774\ub984\uc740 \ub3d9\uc77c\ud55c AWS \uacc4\uc815\uc5d0\uc11c \uace0\uc720\ud574\uc57c \ud569\ub2c8\ub2e4. \uc815\ucc45\uc774 terraform \uc2a4\ud0dd\uc758 \uc77c\ubd80\ub85c \uc0dd\uc131\ub418\uace0 \uc5ec\ub7ec \ubc88 \ubc30\ud3ec\ub418\uba74 \ucda9\ub3cc\uc774 \ubc1c\uc0dd\ud569\ub2c8\ub2e4."}),"\n",(0,i.jsx)(n.p,{children:"\uc774 \uc624\ub958\ub97c \ud574\uacb0\ud558\ub824\uba74 \uc544\ub798 \uba85\ub839\uc73c\ub85c \uc815\ucc45\uc744 \uc0dd\uc131\ud574\uc57c \ud569\ub2c8\ub2e4. AWS \uacc4\uc815\ub2f9 \ud55c \ubc88\ub9cc \uc218\ud589\ud558\uba74 \ub429\ub2c8\ub2e4."}),"\n",(0,i.jsx)(n.h3,{id:"\ud574\uacb0-\ubc29\ubc95-4",children:"\ud574\uacb0 \ubc29\ubc95:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"\ub2e4\uc74c \ud14d\uc2a4\ud2b8\ub97c \ubcf5\uc0ac\ud558\uc5ec vpc-cni-ipv6-policy.json\uc774\ub77c\ub294 \ud30c\uc77c\uc5d0 \uc800\uc7a5\ud569\ub2c8\ub2e4."}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:'{\n    "Version": "2012-10-17",\n    "Statement": [\n        {\n            "Effect": "Allow",\n            "Action": [\n                "ec2:AssignIpv6Addresses",\n                "ec2:DescribeInstances",\n                "ec2:DescribeTags",\n                "ec2:DescribeNetworkInterfaces",\n                "ec2:DescribeInstanceTypes"\n            ],\n            "Resource": ""\n        },\n        {\n            "Effect": "Allow",\n            "Action": [\n                "ec2:CreateTags"\n            ],\n            "Resource": [\n                "arn:aws:ec2::*:network-interface/*"\n            ]\n        }\n    ]\n}\n'})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:"IAM \uc815\ucc45\uc744 \uc0dd\uc131\ud569\ub2c8\ub2e4."}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"aws iam create-policy --policy-name AmazonEKS_CNI_IPv6_Policy --policy-document file://vpc-cni-ipv6-policy.json\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsxs)(n.li,{children:["\ube14\ub8e8\ud504\ub9b0\ud2b8\uc758 ",(0,i.jsx)(n.code,{children:"install.sh"})," \uc2a4\ud06c\ub9bd\ud2b8\ub97c \ub2e4\uc2dc \uc2e4\ud589\ud569\ub2c8\ub2e4"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},28453(e,n,r){r.d(n,{R:()=>l,x:()=>o});var s=r(96540);const i={},a=s.createContext(i);function l(e){const n=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);