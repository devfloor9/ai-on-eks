"use strict";(globalThis.webpackChunkdoeks_website=globalThis.webpackChunkdoeks_website||[]).push([[3270],{73514(e,s,n){n.r(s),n.d(s,{assets:()=>o,contentTitle:()=>t,default:()=>p,frontMatter:()=>d,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"blueprints/training/GPUs/slinky-slurm","title":"EKS\uc5d0\uc11c\uc758 Slurm","description":"EKS\uc5d0\uc11c ML \ubaa8\ub378\uc744 \ubc30\ud3ec\ud558\ub824\uba74 GPU \ub610\ub294 Neuron \uc778\uc2a4\ud134\uc2a4\uc5d0 \ub300\ud55c \uc811\uadfc \uad8c\ud55c\uc774 \ud544\uc694\ud569\ub2c8\ub2e4. \ubc30\ud3ec\uac00 \uc791\ub3d9\ud558\uc9c0 \uc54a\ub294 \uacbd\uc6b0 \uc774\ub7ec\ud55c \ub9ac\uc18c\uc2a4\uc5d0 \ub300\ud55c \uc811\uadfc \uad8c\ud55c\uc774 \uc5c6\uae30 \ub54c\ubb38\uc778 \uacbd\uc6b0\uac00 \ub9ce\uc2b5\ub2c8\ub2e4. \ub610\ud55c \uc77c\ubd80 \ubc30\ud3ec \ud328\ud134\uc740 Karpenter \uc790\ub3d9 \uc2a4\ucf00\uc77c\ub9c1\uacfc \uc815\uc801 \ub178\ub4dc \uadf8\ub8f9\uc5d0 \uc758\uc874\ud569\ub2c8\ub2e4. \ub178\ub4dc\uac00 \ucd08\uae30\ud654\ub418\uc9c0 \uc54a\uc73c\uba74 Karpenter \ub610\ub294 \ub178\ub4dc \uadf8\ub8f9\uc758 \ub85c\uadf8\ub97c \ud655\uc778\ud558\uc5ec \ubb38\uc81c\ub97c \ud574\uacb0\ud558\uc138\uc694.","source":"@site/i18n/ko/docusaurus-plugin-content-docs/current/blueprints/training/GPUs/slinky-slurm.md","sourceDirName":"blueprints/training/GPUs","slug":"/blueprints/training/GPUs/slinky-slurm","permalink":"/ai-on-eks/ko/docs/blueprints/training/GPUs/slinky-slurm","draft":false,"unlisted":false,"editUrl":"https://github.com/awslabs/ai-on-eks/blob/main/website/docs/blueprints/training/GPUs/slinky-slurm.md","tags":[],"version":"current","frontMatter":{"sidebar_label":"EKS\uc5d0\uc11c\uc758 Slurm"},"sidebar":"blueprints","previous":{"title":"EKS\uc5d0\uc11c\uc758 BioNeMo","permalink":"/ai-on-eks/ko/docs/blueprints/training/GPUs/bionemo"},"next":{"title":"RayTrain\uc744 \ud65c\uc6a9\ud55c Trn1\uc5d0\uc11c\uc758 Llama-2","permalink":"/ai-on-eks/ko/docs/blueprints/training/Neuron/RayTrain-Llama2"}}');var l=n(74848),i=n(28453),c=n(42450);const d={sidebar_label:"EKS\uc5d0\uc11c\uc758 Slurm"},t="EKS\uc5d0\uc11c\uc758 Slurm",o={},a=[{value:"Slurm\uc774\ub780?",id:"slurm\uc774\ub780",level:3},{value:"Slinky \ud504\ub85c\uc81d\ud2b8\ub780?",id:"slinky-\ud504\ub85c\uc81d\ud2b8\ub780",level:3},{value:"EKS\uc5d0\uc11c\uc758 Slurm \uc544\ud0a4\ud14d\ucc98",id:"eks\uc5d0\uc11c\uc758-slurm-\uc544\ud0a4\ud14d\ucc98",level:3},{value:"\uc8fc\uc694 \uae30\ub2a5 \ubc0f \uc774\uc810",id:"\uc8fc\uc694-\uae30\ub2a5-\ubc0f-\uc774\uc810",level:3}];function h(e){const s={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",span:"span",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.header,{children:(0,l.jsx)(s.h1,{id:"eks\uc5d0\uc11c\uc758-slurm",children:"EKS\uc5d0\uc11c\uc758 Slurm"})}),"\n",(0,l.jsx)(s.admonition,{type:"warning",children:(0,l.jsx)(s.p,{children:"EKS\uc5d0\uc11c ML \ubaa8\ub378\uc744 \ubc30\ud3ec\ud558\ub824\uba74 GPU \ub610\ub294 Neuron \uc778\uc2a4\ud134\uc2a4\uc5d0 \ub300\ud55c \uc811\uadfc \uad8c\ud55c\uc774 \ud544\uc694\ud569\ub2c8\ub2e4. \ubc30\ud3ec\uac00 \uc791\ub3d9\ud558\uc9c0 \uc54a\ub294 \uacbd\uc6b0 \uc774\ub7ec\ud55c \ub9ac\uc18c\uc2a4\uc5d0 \ub300\ud55c \uc811\uadfc \uad8c\ud55c\uc774 \uc5c6\uae30 \ub54c\ubb38\uc778 \uacbd\uc6b0\uac00 \ub9ce\uc2b5\ub2c8\ub2e4. \ub610\ud55c \uc77c\ubd80 \ubc30\ud3ec \ud328\ud134\uc740 Karpenter \uc790\ub3d9 \uc2a4\ucf00\uc77c\ub9c1\uacfc \uc815\uc801 \ub178\ub4dc \uadf8\ub8f9\uc5d0 \uc758\uc874\ud569\ub2c8\ub2e4. \ub178\ub4dc\uac00 \ucd08\uae30\ud654\ub418\uc9c0 \uc54a\uc73c\uba74 Karpenter \ub610\ub294 \ub178\ub4dc \uadf8\ub8f9\uc758 \ub85c\uadf8\ub97c \ud655\uc778\ud558\uc5ec \ubb38\uc81c\ub97c \ud574\uacb0\ud558\uc138\uc694."})}),"\n",(0,l.jsx)(s.h3,{id:"slurm\uc774\ub780",children:"Slurm\uc774\ub780?"}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.a,{href:"https://slurm.schedmd.com/overview.html",children:"Slurm"}),"\uc740 \ubaa8\ub4e0 \uaddc\ubaa8\uc758 \ucef4\ud4e8\ud2b8 \ud074\ub7ec\uc2a4\ud130\uc5d0\uc11c \ucef4\ud4e8\ud305 \ub9ac\uc18c\uc2a4\ub97c \uad00\ub9ac\ud558\uae30 \uc704\ud574 \uc124\uacc4\ub41c \uc624\ud508\uc18c\uc2a4\uc758 \uace0\ub3c4\ub85c \ud655\uc7a5 \uac00\ub2a5\ud55c \uc6cc\ud06c\ub85c\ub4dc \uad00\ub9ac\uc790 \ubc0f \uc791\uc5c5 \uc2a4\ucf00\uc904\ub7ec\uc785\ub2c8\ub2e4. \uc138 \uac00\uc9c0 \ud575\uc2ec \uae30\ub2a5\uc744 \uc81c\uacf5\ud569\ub2c8\ub2e4: \ucef4\ud4e8\ud305 \ub9ac\uc18c\uc2a4\uc5d0 \ub300\ud55c \uc811\uadfc \ud560\ub2f9, \ubcd1\ub82c \ucef4\ud4e8\ud305 \uc791\uc5c5\uc744 \uc2dc\uc791\ud558\uace0 \ubaa8\ub2c8\ud130\ub9c1\ud558\uae30 \uc704\ud55c \ud504\ub808\uc784\uc6cc\ud06c \uc81c\uacf5, \ub9ac\uc18c\uc2a4 \uacbd\ud569\uc744 \ud574\uacb0\ud558\uae30 \uc704\ud55c \ub300\uae30 \uc911\uc778 \uc791\uc5c5\uc758 \ud050 \uad00\ub9ac."]}),"\n",(0,l.jsx)(s.p,{children:"Slurm\uc740 AI \ud6c8\ub828\uc5d0\uc11c \uace0\uc131\ub2a5 \ucef4\ud4e8\ud305 \ud074\ub7ec\uc2a4\ud130 \uc804\uccb4\uc5d0 \uac78\uccd0 \ub300\uaddc\ubaa8 GPU \uac00\uc18d \uc6cc\ud06c\ub85c\ub4dc\ub97c \uad00\ub9ac\ud558\uace0 \uc2a4\ucf00\uc904\ub9c1\ud558\ub294 \ub370 \ub110\ub9ac \uc0ac\uc6a9\ub429\ub2c8\ub2e4. \uc5f0\uad6c\uc790\uc640 \uc5d4\uc9c0\ub2c8\uc5b4\uac00 CPU, GPU, \uba54\ubaa8\ub9ac\ub97c \ud3ec\ud568\ud55c \ucef4\ud4e8\ud305 \ub9ac\uc18c\uc2a4\ub97c \ud6a8\uc728\uc801\uc73c\ub85c \ud560\ub2f9\ud560 \uc218 \uc788\uac8c \ud558\uba70, \ub9ac\uc18c\uc2a4 \uc720\ud615\uacfc \uc791\uc5c5 \uc6b0\uc120\uc21c\uc704\uc5d0 \ub300\ud55c \uc138\ubc00\ud55c \uc81c\uc5b4\ub85c \uc5ec\ub7ec \ub178\ub4dc\uc5d0 \uac78\uccd0 \ub525\ub7ec\ub2dd \ubaa8\ub378\uacfc \ub300\uaddc\ubaa8 \uc5b8\uc5b4 \ubaa8\ub378\uc758 \ubd84\uc0b0 \ud6c8\ub828\uc744 \uac00\ub2a5\ud558\uac8c \ud569\ub2c8\ub2e4. Slurm\uc758 \uc548\uc815\uc131, \uace0\uae09 \uc2a4\ucf00\uc904\ub9c1 \uae30\ub2a5, \uc628\ud504\ub808\ubbf8\uc2a4 \ubc0f \ud074\ub77c\uc6b0\ub4dc \ud658\uacbd\uacfc\uc758 \ud1b5\ud569\uc740 \ud604\ub300 AI \uc5f0\uad6c \ubc0f \uc0b0\uc5c5\uc774 \uc694\uad6c\ud558\ub294 \uaddc\ubaa8, \ucc98\ub9ac\ub7c9, \uc7ac\ud604\uc131\uc744 \ucc98\ub9ac\ud558\ub294 \ub370 \uc120\ud638\ub418\ub294 \uc120\ud0dd\uc774 \ub429\ub2c8\ub2e4."}),"\n",(0,l.jsx)(s.h3,{id:"slinky-\ud504\ub85c\uc81d\ud2b8\ub780",children:"Slinky \ud504\ub85c\uc81d\ud2b8\ub780?"}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.a,{href:"https://github.com/SlinkyProject",children:"Slinky \ud504\ub85c\uc81d\ud2b8"}),"\ub294 Slurm\uc758 \uc8fc\uc694 \uac1c\ubc1c\uc0ac\uc778 ",(0,l.jsx)(s.a,{href:"https://www.schedmd.com/",children:"SchedMD"}),"\uac00 \uc124\uacc4\ud55c \uc624\ud508\uc18c\uc2a4 \ud1b5\ud569 \ub3c4\uad6c \ubaa8\uc74c\uc73c\ub85c, Slurm \uae30\ub2a5\uc744 Kubernetes\uc5d0 \ub3c4\uc785\ud558\uc5ec \ud6a8\uc728\uc801\uc778 \ub9ac\uc18c\uc2a4 \uad00\ub9ac\uc640 \uc2a4\ucf00\uc904\ub9c1\uc744 \uc704\ud55c \ub450 \uc138\uacc4\uc758 \uc7a5\uc810\uc744 \uacb0\ud569\ud569\ub2c8\ub2e4. Slinky \ud504\ub85c\uc81d\ud2b8\uc5d0\ub294 ",(0,l.jsx)(s.a,{href:"https://github.com/SlinkyProject/slurm-operator?tab=readme-ov-file#kubernetes-operator-for-slurm-clusters",children:"Slurm \ud074\ub7ec\uc2a4\ud130\uc6a9 Kubernetes \uc624\ud37c\ub808\uc774\ud130"}),"\uac00 \ud3ec\ud568\ub418\uc5b4 \uc788\uc73c\uba70, Kubernetes \ud658\uacbd \ub0b4\uc5d0\uc11c \ubc30\ud3ec\ub41c Slurm Cluster \ubc0f NodeSet \ub9ac\uc18c\uc2a4\uc758 \uc218\uba85 \uc8fc\uae30\ub97c \uad00\ub9ac\ud558\uae30 \uc704\ud55c ",(0,l.jsx)(s.a,{href:"https://kubernetes.io/docs/concepts/extend-kubernetes/api-extension/custom-resources/#custom-controllers",children:"\ucee4\uc2a4\ud140 \ucee8\ud2b8\ub864\ub7ec"}),"\uc640 ",(0,l.jsx)(s.a,{href:"https://kubernetes.io/docs/concepts/extend-kubernetes/api-extension/custom-resources/#customresourcedefinitions",children:"\ucee4\uc2a4\ud140 \ub9ac\uc18c\uc2a4 \uc815\uc758(CRD)"}),"\ub97c \uad6c\ud604\ud569\ub2c8\ub2e4."]}),"\n",(0,l.jsx)(s.p,{children:"\uc774 Slurm \ud074\ub7ec\uc2a4\ud130\uc5d0\ub294 \ub2e4\uc74c \uad6c\uc131 \uc694\uc18c\uac00 \ud3ec\ud568\ub429\ub2c8\ub2e4:"}),"\n",(0,l.jsxs)(s.table,{children:[(0,l.jsx)(s.thead,{children:(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.th,{children:"\uad6c\uc131 \uc694\uc18c"}),(0,l.jsx)(s.th,{children:"\uc124\uba85"})]})}),(0,l.jsxs)(s.tbody,{children:[(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:"Controller (slurmctld)"}),(0,l.jsx)(s.td,{children:"\ub9ac\uc18c\uc2a4\ub97c \ubaa8\ub2c8\ud130\ub9c1\ud558\uace0, \uc791\uc5c5\uc744 \uc218\ub77d\ud558\uba70, \ucef4\ud4e8\ud2b8 \ub178\ub4dc\uc5d0 \uc791\uc5c5\uc744 \ud560\ub2f9\ud558\ub294 \uc911\uc559 \uad00\ub9ac \ub370\ubaac\uc785\ub2c8\ub2e4."})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:"Accounting (slurmdbd)"}),(0,l.jsx)(s.td,{children:"MariaDB \ub370\uc774\ud130\ubca0\uc774\uc2a4 \ubc31\uc5d4\ub4dc\ub97c \ud1b5\ud574 \uc791\uc5c5 \ud68c\uacc4 \ubc0f \uc0ac\uc6a9\uc790/\ud504\ub85c\uc81d\ud2b8 \uad00\ub9ac\ub97c \ucc98\ub9ac\ud569\ub2c8\ub2e4."})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:"Compute (slurmd)"}),(0,l.jsx)(s.td,{children:"\uc791\uc5c5\uc744 \uc2e4\ud589\ud558\ub294 \uc6cc\ucee4 \ub178\ub4dc\ub85c, \ub2e4\ub978 \ud30c\ud2f0\uc158\uc73c\ub85c \uadf8\ub8f9\ud654\ud560 \uc218 \uc788\ub294 NodeSet\uc73c\ub85c \uad6c\uc131\ub429\ub2c8\ub2e4."})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:"Login"}),(0,l.jsx)(s.td,{children:"\uc0ac\uc6a9\uc790\uac00 Slurm \ud074\ub7ec\uc2a4\ud130\uc640 \uc0c1\ud638 \uc791\uc6a9\ud558\uace0 \uc791\uc5c5\uc744 \uc81c\ucd9c\ud560 \uc218 \uc788\ub3c4\ub85d SSH \uc811\uadfc \uc9c0\uc810\uc744 \uc81c\uacf5\ud569\ub2c8\ub2e4."})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:"REST API (slurmrestd)"}),(0,l.jsx)(s.td,{children:"\ud074\ub7ec\uc2a4\ud130\uc640\uc758 \ud504\ub85c\uadf8\ub798\ubc0d \ubc29\uc2dd \uc0c1\ud638 \uc791\uc6a9\uc744 \uc704\ud574 Slurm \uae30\ub2a5\uc5d0 \ub300\ud55c HTTP \uae30\ubc18 API \uc811\uadfc\uc744 \uc81c\uacf5\ud569\ub2c8\ub2e4."})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:"Authentication (sackd)"}),(0,l.jsx)(s.td,{children:"Slurm \uc11c\ube44\uc2a4\uc5d0 \ub300\ud55c \uc548\uc804\ud55c \uc811\uadfc\uc744 \uc704\ud55c \uc790\uaca9 \uc99d\uba85 \uc778\uc99d\uc744 \uad00\ub9ac\ud569\ub2c8\ub2e4."})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:"MariaDB"}),(0,l.jsx)(s.td,{children:"\uc791\uc5c5, \uc0ac\uc6a9\uc790 \ubc0f \ud504\ub85c\uc81d\ud2b8 \uc815\ubcf4\ub97c \uc800\uc7a5\ud558\uae30 \uc704\ud574 accounting \uc11c\ube44\uc2a4\uc5d0\uc11c \uc0ac\uc6a9\ud558\ub294 \ub370\uc774\ud130\ubca0\uc774\uc2a4 \ubc31\uc5d4\ub4dc\uc785\ub2c8\ub2e4."})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:"Prometheus Service Monitor"}),(0,l.jsx)(s.td,{children:"\ubaa8\ub2c8\ud130\ub9c1 \ubaa9\uc801\uc73c\ub85c \uc2a4\ucf00\uc904\ub7ec, \ud30c\ud2f0\uc158, \ub178\ub4dc \ubc0f \uc791\uc5c5 \uc5d4\ub4dc\ud3ec\uc778\ud2b8\uc5d0\uc11c \uba54\ud2b8\ub9ad\uc744 \uc218\uc9d1\ud558\ub3c4\ub85d \ucee8\ud2b8\ub864\ub7ec \ub0b4\uc5d0 \uad6c\uc131\ub429\ub2c8\ub2e4."})]})]})]}),"\n",(0,l.jsx)(s.p,{children:"Amazon EKS\uc640 \uacb0\ud569\ud558\uba74 Slinky \ud504\ub85c\uc81d\ud2b8\ub294 Kubernetes\uc5d0\uc11c \uc778\ud504\ub77c \uad00\ub9ac\ub97c \ud45c\uc900\ud654\ud55c \uae30\uc5c5\uc774 ML \uacfc\ud559\uc790\ub4e4\uc5d0\uac8c Slurm \uae30\ubc18 \uacbd\ud5d8\uc744 \uc81c\uacf5\ud560 \uc218 \uc788\ub3c4\ub85d \ud569\ub2c8\ub2e4. \ub610\ud55c \ub3d9\uc77c\ud55c \uac00\uc18d \ub178\ub4dc \ud074\ub7ec\uc2a4\ud130\uc5d0\uc11c \ud6c8\ub828, \uc2e4\ud5d8 \ubc0f \ucd94\ub860\uc774 \uc774\ub8e8\uc5b4\uc9c8 \uc218 \uc788\uac8c \ud569\ub2c8\ub2e4."}),"\n",(0,l.jsx)(s.h3,{id:"eks\uc5d0\uc11c\uc758-slurm-\uc544\ud0a4\ud14d\ucc98",children:"EKS\uc5d0\uc11c\uc758 Slurm \uc544\ud0a4\ud14d\ucc98"}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"alt text",src:n(15052).A+"",width:"836",height:"689"})}),"\n",(0,l.jsx)(s.p,{children:"\uc704 \ub2e4\uc774\uc5b4\uadf8\ub7a8\uc740 \uc774 \uac00\uc774\ub4dc\uc5d0 \uc124\uba85\ub41c EKS\uc5d0\uc11c\uc758 Slurm \ubc30\ud3ec\ub97c \ubcf4\uc5ec\uc90d\ub2c8\ub2e4. Amazon EKS \ud074\ub7ec\uc2a4\ud130\uac00 \uc624\ucf00\uc2a4\ud2b8\ub808\uc774\uc158 \ub808\uc774\uc5b4 \uc5ed\ud560\uc744 \ud558\uba70, \ud575\uc2ec Slurm Cluster \uad6c\uc131 \uc694\uc18c\ub294 m6i.xlarge \uc778\uc2a4\ud134\uc2a4\uc758 \uad00\ub9ac\ud615 \ub178\ub4dc \uadf8\ub8f9\uc5d0\uc11c \ud638\uc2a4\ud305\ub418\uace0, Karpenter NodePool\uc740 slurmd \ud30c\ub4dc\uac00 \uc2e4\ud589\ub420 GPU \uac00\uc18d \ucef4\ud4e8\ud2b8 \ub178\ub4dc\uc758 \ubc30\ud3ec\ub97c \uad00\ub9ac\ud569\ub2c8\ub2e4. Slinky Slurm \uc624\ud37c\ub808\uc774\ud130\uc640 Slurm \ud074\ub7ec\uc2a4\ud130\ub294 ArgoCD \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc73c\ub85c \uc790\ub3d9 \ubc30\ud3ec\ub429\ub2c8\ub2e4."}),"\n",(0,l.jsxs)(s.p,{children:["\ub85c\uadf8\uc778 LoadBalancer \ud0c0\uc785 \uc11c\ube44\uc2a4\ub294 ",(0,l.jsx)(s.a,{href:"https://github.com/kubernetes-sigs/aws-load-balancer-controller",children:"AWS Load Balancer Controller"}),"\ub97c \uc0ac\uc6a9\ud558\uc5ec AWS Network Load Balancer\ub97c \ub3d9\uc801\uc73c\ub85c \uc0dd\uc131\ud558\ub3c4\ub85d \uc5b4\ub178\ud14c\uc774\uc158\ub418\uc5b4 \uc788\uc5b4, ML \uacfc\ud559\uc790\ub4e4\uc774 kubectl\uc744 \ud1b5\ud574 Kubernetes API \uc11c\ubc84\uc640 \uc778\ud130\ud398\uc774\uc2a4\ud558\uc9c0 \uc54a\uace0\ub3c4 \ub85c\uadf8\uc778 \ud30c\ub4dc\uc5d0 SSH\ub85c \uc811\uc18d\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,l.jsxs)(s.p,{children:["\ub85c\uadf8\uc778 \ubc0f slurmd \ud30c\ub4dc\uc5d0\ub294 ",(0,l.jsx)(s.a,{href:"https://aws.amazon.com/fsx/lustre/",children:"Amazon FSx for Lustre"})," \uacf5\uc720 \ud30c\uc77c \uc2dc\uc2a4\ud15c\ub3c4 \ub9c8\uc6b4\ud2b8\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4. \ucee8\ud14c\uc774\ub108\ud654\ub41c slurmd \ud30c\ub4dc\ub97c \uc0ac\uc6a9\ud558\uba74 \uc804\ud1b5\uc801\uc73c\ub85c Conda\ub098 Python \uac00\uc0c1 \ud658\uacbd\uc744 \uc0ac\uc6a9\ud558\uc5ec \uc218\ub3d9\uc73c\ub85c \uc124\uce58\ud588\ub358 \ub9ce\uc740 \uc885\uc18d\uc131\uc744 \ucee8\ud14c\uc774\ub108 \uc774\ubbf8\uc9c0\uc5d0 \ud3ec\ud568\ud560 \uc218 \uc788\uc9c0\ub9cc, \uacf5\uc720 \ud30c\uc77c \uc2dc\uc2a4\ud15c\uc740 \ud6c8\ub828 \uc544\ud2f0\ud329\ud2b8, \ub370\uc774\ud130, \ub85c\uadf8 \ubc0f \uccb4\ud06c\ud3ec\uc778\ud2b8 \uc800\uc7a5\uc5d0 \uc5ec\uc804\ud788 \uc720\uc6a9\ud569\ub2c8\ub2e4."]}),"\n",(0,l.jsx)(s.h3,{id:"\uc8fc\uc694-\uae30\ub2a5-\ubc0f-\uc774\uc810",children:"\uc8fc\uc694 \uae30\ub2a5 \ubc0f \uc774\uc810"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"\ub3d9\uc77c\ud55c \uc778\ud504\ub77c\uc5d0\uc11c Slurm \uc6cc\ud06c\ub85c\ub4dc\uc640 \ucee8\ud14c\uc774\ub108\ud654\ub41c Kubernetes \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \ub098\ub780\ud788 \uc2e4\ud589\ud569\ub2c8\ub2e4. Slurm\uacfc Kubernetes \uc6cc\ud06c\ub85c\ub4dc \ubaa8\ub450 \ub3d9\uc77c\ud55c \ub178\ub4dc \ud480\uc5d0\uc11c \uc2a4\ucf00\uc904\ub9c1\ub418\uc5b4 \ud65c\uc6a9\ub3c4\ub97c \ub192\uc774\uace0 \ub9ac\uc18c\uc2a4 \ub2e8\ud3b8\ud654\ub97c \ubc29\uc9c0\ud569\ub2c8\ub2e4."}),"\n",(0,l.jsx)(s.li,{children:"\uc591\ucabd \uc5d0\ucf54\uc2dc\uc2a4\ud15c\uc758 \uc775\uc219\ud55c \ub3c4\uad6c\ub97c \ud65c\uc6a9\ud558\uc5ec Slurm \uc791\uc5c5\uacfc Kubernetes \ud30c\ub4dc\ub97c \uc6d0\ud65c\ud558\uac8c \uad00\ub9ac\ud558\uba74\uc11c \uc81c\uc5b4\ub098 \uc131\ub2a5\uc744 \ud76c\uc0dd\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."}),"\n",(0,l.jsx)(s.li,{children:"\uc6cc\ud06c\ub85c\ub4dc \uc218\uc694\uc5d0 \ub530\ub77c \ucef4\ud4e8\ud2b8 \ub178\ub4dc\ub97c \ub3d9\uc801\uc73c\ub85c \ucd94\uac00\ud558\uac70\ub098 \uc81c\uac70\ud558\uc5ec \ud560\ub2f9\ub41c \ub9ac\uc18c\uc2a4\ub97c \ud6a8\uc728\uc801\uc73c\ub85c \uc790\ub3d9 \uc2a4\ucf00\uc77c\ub9c1\ud558\uace0, \uc218\uc694\uc758 \uae09\uc99d\uacfc \uac10\uc18c\ub97c \ucc98\ub9ac\ud558\uc5ec \uc778\ud504\ub77c \ube44\uc6a9\uacfc \uc720\ud734 \ub9ac\uc18c\uc2a4 \ub0ad\ube44\ub97c \uc904\uc785\ub2c8\ub2e4."}),"\n",(0,l.jsx)(s.li,{children:"Kubernetes \uc624\ucf00\uc2a4\ud2b8\ub808\uc774\uc158\uc744 \ud1b5\ud55c \uace0\uac00\uc6a9\uc131. \ucee8\ud2b8\ub864\ub7ec\ub098 \uc6cc\ucee4 \ud30c\ub4dc\uac00 \uc2e4\ud328\ud558\uba74 Kubernetes\uac00 \uc790\ub3d9\uc73c\ub85c \ub2e4\uc2dc \uc2dc\uc791\ud558\uc5ec \uc218\ub3d9 \uac1c\uc785\uc744 \uc904\uc785\ub2c8\ub2e4."}),"\n",(0,l.jsx)(s.li,{children:"Slurm\uc758 \uc815\uad50\ud55c \uc2a4\ucf00\uc904\ub9c1 \uae30\ub2a5(\uacf5\uc815 \uacf5\uc720 \ud560\ub2f9, \uc885\uc18d\uc131 \uad00\ub9ac, \uc6b0\uc120\uc21c\uc704 \uc2a4\ucf00\uc904\ub9c1)\uc774 Kubernetes\uc5d0 \ud1b5\ud569\ub418\uc5b4 \ucef4\ud4e8\ud2b8 \ud65c\uc6a9\ub960\uc744 \uadf9\ub300\ud654\ud558\uace0 \uc6cc\ud06c\ub85c\ub4dc \uc694\uad6c\uc0ac\ud56d\uc5d0 \ub9de\ucdb0 \ub9ac\uc18c\uc2a4\ub97c \uc870\uc815\ud569\ub2c8\ub2e4."}),"\n",(0,l.jsx)(s.li,{children:"Slurm\uacfc \uadf8 \uc885\uc18d\uc131\uc774 \ucee8\ud14c\uc774\ub108\ub85c \ubc30\ud3ec\ub418\uc5b4 \ud658\uacbd \uc804\ubc18\uc5d0 \uac78\uccd0 \uc77c\uad00\ub41c \ubc30\ud3ec\ub97c \ubcf4\uc7a5\ud569\ub2c8\ub2e4. \uc774\ub294 \uad6c\uc131 \ub4dc\ub9ac\ud504\ud2b8\ub97c \uc904\uc774\uace0 \uac1c\ubc1c\uc5d0\uc11c \ud504\ub85c\ub355\uc158\uc73c\ub85c\uc758 \uc804\ud658\uc744 \uac04\uc18c\ud654\ud569\ub2c8\ub2e4."}),"\n",(0,l.jsx)(s.li,{children:"\uc0ac\uc6a9\uc790\ub294 \ud2b9\uc218\ud55c \uc694\uad6c\uc0ac\ud56d(\uc608: \ucee4\uc2a4\ud140 \uc885\uc18d\uc131, \ub77c\uc774\ube0c\ub7ec\ub9ac)\uc5d0 \ub9de\ucda4\ud654\ub41c Slurm \uc774\ubbf8\uc9c0\ub97c \ube4c\ub4dc\ud558\uc5ec \uacfc\ud559\uc801 \ub610\ub294 \uaddc\uc81c \ud658\uacbd\uc5d0\uc11c \uc77c\uad00\uc131\uacfc \uc7ac\ud604\uc131\uc744 \ucd09\uc9c4\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),"\n",(0,l.jsx)(s.li,{children:"\uad00\ub9ac\uc790\ub294 Kubernetes Custom Resources\ub97c \uc0ac\uc6a9\ud558\uc5ec \ucee4\uc2a4\ud140 Slurm \ud074\ub7ec\uc2a4\ud130\uc640 \ub178\ub4dc \uc138\ud2b8\ub97c \uc9c1\uc811 \uc815\uc758\ud560 \uc218 \uc788\uc73c\uba70, \ub2e4\ub978 \uc720\ud615\uc758 \uc791\uc5c5(\uc608: \uc548\uc815\uc801 vs \uae30\ud68c\uc8fc\uc758\uc801/\ubc31\ud544 \ud30c\ud2f0\uc158)\uc744 \uc704\ud574 \ucef4\ud4e8\ud2b8 \ub178\ub4dc\ub97c \ud30c\ud2f0\uc154\ub2dd\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),"\n",(0,l.jsx)(s.li,{children:"Slinky\ub294 Slurm\uacfc Kubernetes \ubaa8\ub450\ub97c \uc704\ud55c \ubaa8\ub2c8\ud130\ub9c1 \uc2a4\ud0dd\uacfc \ud1b5\ud569\ub418\uc5b4 \uad00\ub9ac\uc790\uc640 \uc0ac\uc6a9\uc790\uc5d0\uac8c \uac15\ub825\ud55c \uba54\ud2b8\ub9ad\uacfc \uc2dc\uac01\ud654\ub97c \uc81c\uacf5\ud569\ub2c8\ub2e4."}),"\n"]}),"\n",(0,l.jsxs)(c.A,{header:(0,l.jsx)(s.h2,{children:(0,l.jsx)(s.span,{children:"\uc194\ub8e8\uc158 \ubc30\ud3ec"})}),children:[(0,l.jsx)(s.p,{children:"\uc774 \uc608\uc81c\uc5d0\uc11c\ub294 Amazon EKS\uc5d0\uc11c Slinky Slurm \ud074\ub7ec\uc2a4\ud130\ub97c \ud504\ub85c\ube44\uc800\ub2dd\ud569\ub2c8\ub2e4."}),(0,l.jsx)(s.p,{children:(0,l.jsx)(s.strong,{children:"0. \uc0ac\uc804 \uc694\uad6c\uc0ac\ud56d:"})}),(0,l.jsx)(s.p,{children:"\uba38\uc2e0\uc5d0 \ub2e4\uc74c \ub3c4\uad6c\uac00 \uc124\uce58\ub418\uc5b4 \uc788\ub294\uc9c0 \ud655\uc778\ud558\uc138\uc694."}),(0,l.jsxs)(s.ol,{children:["\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.a,{href:"https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2.html",children:"aws cli"})}),"\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.a,{href:"https://Kubernetes.io/docs/tasks/tools/",children:"kubectl"})}),"\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.a,{href:"https://learn.hashicorp.com/tutorials/terraform/install-cli",children:"terraform"})}),"\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.a,{href:"https://docs.docker.com/engine/install/",children:"docker"})}),"\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.a,{href:"https://helm.sh/",children:"helm"})}),"\n"]}),(0,l.jsx)(s.p,{children:(0,l.jsx)(s.strong,{children:"1. \uc800\uc7a5\uc18c \ud074\ub860:"})}),(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"git clone https://github.com/awslabs/ai-on-eks.git\n"})}),(0,l.jsx)(s.admonition,{type:"info",children:(0,l.jsxs)(s.p,{children:["\uc778\uc99d\uc5d0 \ud504\ub85c\ud544\uc744 \uc0ac\uc6a9\ud558\ub294 \uacbd\uc6b0\n",(0,l.jsx)(s.code,{children:'export AWS_PROFILE="<PROFILE_name>"'}),"\uc744 \uc6d0\ud558\ub294 \ud504\ub85c\ud544 \uc774\ub984\uc73c\ub85c \uc124\uc815\ud558\uc138\uc694"]})}),(0,l.jsx)(s.p,{children:(0,l.jsx)(s.strong,{children:"2. \uad6c\uc131 \uac80\ud1a0 \ubc0f \ucee4\uc2a4\ud130\ub9c8\uc774\uc9d5:"})}),(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"infra/base/terraform/variables.tf"}),"\uc5d0\uc11c \uc0ac\uc6a9 \uac00\ub2a5\ud55c \uc560\ub4dc\uc628 \ud655\uc778"]}),"\n",(0,l.jsxs)(s.li,{children:["\ud544\uc694\uc5d0 \ub530\ub77c ",(0,l.jsx)(s.code,{children:"infra/slinky-slurm/terraform/blueprint.tfvars"}),"\uc5d0\uc11c \uc560\ub4dc\uc628 \uc124\uc815 \uc218\uc815"]}),"\n"]}),(0,l.jsx)(s.p,{children:(0,l.jsx)(s.strong,{children:"3. slurmd \ucee8\ud14c\uc774\ub108 \uc774\ubbf8\uc9c0 \ube4c\ub4dc \uc790\ub3d9\ud654 \uac80\ud1a0:"})}),(0,l.jsxs)(s.p,{children:["\uae30\ubcf8\uc801\uc73c\ub85c ",(0,l.jsx)(s.code,{children:"blueprints/training/slinky-slurm/install.sh"})," \uc2a4\ud06c\ub9bd\ud2b8\ub294 ",(0,l.jsx)(s.code,{children:"blueprints/training/slinky-slurm/dlc-slurmd.Dockerfile"}),"\uc744 \uc0ac\uc6a9\ud558\uc5ec \uc0c8 slurmd \ucee8\ud14c\uc774\ub108 \uc774\ubbf8\uc9c0\ub97c \uc790\ub3d9\uc73c\ub85c \ube4c\ub4dc\ud558\ub294 \uc124\uc815 \ub2e8\uacc4\ub97c \ud2b8\ub9ac\uac70\ud569\ub2c8\ub2e4. \uc774 Dockerfile\uc740 ",(0,l.jsx)(s.a,{href:"https://github.com/aws/deep-learning-containers",children:"AWS Deep Learning Container (DLC)"})," \uc704\uc5d0 \ube4c\ub4dc\ub418\uc5b4 Python 3.12.8 + PyTorch 2.6.0 + CUDA 12.6 + NCCL 2.23.4 + EFA Installer 1.38.0 (OFI NCCL \ud50c\ub7ec\uadf8\uc778 \ubc88\ub4e4 \ud3ec\ud568)\uc774 \ucee8\ud14c\uc774\ub108 \uc774\ubbf8\uc9c0\uc5d0 \uc0ac\uc804 \uc124\uce58\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4."]}),(0,l.jsxs)(s.p,{children:["\uadf8\ub7f0 \ub2e4\uc74c \uc0c8 ECR \uc800\uc7a5\uc18c\ub97c \uc0dd\uc131\ud558\uace0 \uc774 \uc774\ubbf8\uc9c0\ub97c \uc800\uc7a5\uc18c\uc5d0 \ud478\uc2dc\ud569\ub2c8\ub2e4. \uba38\uc2e0\uc5d0 \uc544\uc9c1 \uc5c6\ub294 \uacbd\uc6b0 Slurm \ub85c\uadf8\uc778 \ud30c\ub4dc \uc811\uadfc\uc744 \uc704\ud55c \uc0c8 SSH \ud0a4 ",(0,l.jsx)(s.code,{children:"~/.ssh/id_ed25519_slurm"}),"\ub3c4 \uc0dd\uc131\ub429\ub2c8\ub2e4."]}),(0,l.jsxs)(s.p,{children:["\uc774\ubbf8\uc9c0 \uc800\uc7a5\uc18c URI, \uc774\ubbf8\uc9c0 \ud0dc\uadf8 \ubc0f \uacf5\uac1c SSH \ud0a4\ub294 Slurm \ud074\ub7ec\uc2a4\ud130 \ubc30\ud3ec\uc5d0 \uc0ac\uc6a9\ud560 ",(0,l.jsx)(s.code,{children:"blueprints/training/slinky-slurm/slurm-values.yaml.template"})," \ud30c\uc77c\uc744 \uae30\ubc18\uc73c\ub85c \uc0c8 ",(0,l.jsx)(s.code,{children:"slurm-values.yaml"})," \ud30c\uc77c\uc744 \uc0dd\uc131\ud558\ub294 \ub370 \uc0ac\uc6a9\ub429\ub2c8\ub2e4."]}),(0,l.jsx)(s.p,{children:"\uc774 \ub3d9\uc791\uc744 \ucee4\uc2a4\ud130\ub9c8\uc774\uc9d5\ud558\ub824\uba74 \ub2e4\uc74c \uc120\ud0dd\uc801 \ud50c\ub798\uadf8\ub97c \ucd94\uac00\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4:"}),(0,l.jsxs)(s.table,{children:[(0,l.jsx)(s.thead,{children:(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.th,{children:"\uad6c\uc131 \uc694\uc18c"}),(0,l.jsx)(s.th,{children:"\uc124\uba85"}),(0,l.jsx)(s.th,{children:"\uae30\ubcf8\uac12"})]})}),(0,l.jsxs)(s.tbody,{children:[(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"--repo-name"})}),(0,l.jsx)(s.td,{children:"ECR \uc800\uc7a5\uc18c \uc774\ub984"}),(0,l.jsx)(s.td,{children:"dlc-slurmd"})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"--tag"})}),(0,l.jsx)(s.td,{children:"\uc774\ubbf8\uc9c0 \ud0dc\uadf8"}),(0,l.jsx)(s.td,{children:"25.11.1-ubuntu24.04"})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"--region"})}),(0,l.jsx)(s.td,{children:"ECR \uc800\uc7a5\uc18c\uc758 AWS \ub9ac\uc804"}),(0,l.jsxs)(s.td,{children:["AWS CLI \uad6c\uc131\uc5d0\uc11c \ucd94\ub860\ub418\uac70\ub098 ",(0,l.jsx)(s.code,{children:"us-west-2"}),"\ub85c \uc124\uc815"]})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"--skip-build"})}),(0,l.jsx)(s.td,{children:"ECR\uc5d0 \uc774\ubbf8 \uc788\ub294 \uae30\uc874 \uc774\ubbf8\uc9c0\ub97c \uc0ac\uc6a9\ud558\ub294 \uacbd\uc6b0 \uc124\uc815"}),(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"false"})})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"--skip-setup"})}),(0,l.jsxs)(s.td,{children:["\uc774\uc804\uc5d0 ",(0,l.jsx)(s.code,{children:"blueprints/training/slinky-slurm/slurm-values.yaml"})," \ud30c\uc77c\uc744 \uc0dd\uc131\ud55c \uacbd\uc6b0 \uc124\uc815"]}),(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"false"})})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"--help"})}),(0,l.jsx)(s.td,{children:"\ud50c\ub798\uadf8 \uc635\uc158 \ubcf4\uae30"}),(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"false"})})]})]})]}),(0,l.jsx)(s.p,{children:"\uc608\ub97c \ub4e4\uc5b4, \ucee4\uc2a4\ud140 slurmd \ucee8\ud14c\uc774\ub108 \uc774\ubbf8\uc9c0\ub97c \uc774\ubbf8 \ube4c\ub4dc\ud558\uace0 \ucee4\uc2a4\ud140 ECR \uc800\uc7a5\uc18c\uc5d0 \ud478\uc2dc\ud55c \uacbd\uc6b0 \ub2e4\uc74c \ud50c\ub798\uadf8\uc640 \uac12\uc744 \ucd94\uac00\ud558\uc138\uc694:"}),(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"cd ai-on-eks/blueprints/training/slinky-slurm\n./install.sh --repo-name dlc-slurmd --tag 25.11.1-ubuntu24.04 --skip-build\n"})}),(0,l.jsx)(s.p,{children:"\uc2a4\ud06c\ub9bd\ud2b8\ub294 \uc9c4\ud589\ud558\uae30 \uc804\uc5d0 \ucee8\ud14c\uc774\ub108 \uc774\ubbf8\uc9c0\uac00 ECR \uc800\uc7a5\uc18c\uc5d0 \uc788\ub294\uc9c0 \ud655\uc778\ud569\ub2c8\ub2e4."}),(0,l.jsxs)(s.p,{children:["\ucee4\uc2a4\ud140 Dockerfile\uc744 \uc0ac\uc6a9\ud558\ub824\uba74 ",(0,l.jsx)(s.code,{children:"blueprints/training/slinky-slurm/install.sh"}),"\ub97c \uc2e4\ud589\ud558\uae30 \uc804\uc5d0 ",(0,l.jsx)(s.code,{children:"blueprints/training/slinky-slurm/dlc-slurmd.Dockerfile"}),"\uc758 \ub0b4\uc6a9\uc744 \ub36e\uc5b4\uc4f0\uba74 \ub429\ub2c8\ub2e4."]}),(0,l.jsxs)(s.p,{children:["Terraform \ubc30\ud3ec\ub97c \ud2b8\ub9ac\uac70\ud558\uc9c0 \uc54a\uace0 \ucee8\ud14c\uc774\ub108 \uc774\ubbf8\uc9c0\ub97c \ube4c\ub4dc\ud558\uace0 \ud478\uc2dc\ud558\ub824\uba74 \ub3d9\uc77c\ud55c \ud50c\ub798\uadf8\ub97c \uc0ac\uc6a9\ud558\uc5ec ",(0,l.jsx)(s.code,{children:"blueprints/training/slinky-slurm/setup.sh"})," \uc2a4\ud06c\ub9bd\ud2b8\ub97c \uc9c1\uc811 \uc2e4\ud589\ud560 \uc218\ub3c4 \uc788\uc2b5\ub2c8\ub2e4. \uc774 \uc2a4\ud06c\ub9bd\ud2b8\ub294 \uc0c8 ",(0,l.jsx)(s.code,{children:"blueprints/training/slinky-slurm/slurm-values.yaml"})," \ud30c\uc77c\ub3c4 \uc0dd\uc131\ud569\ub2c8\ub2e4."]}),(0,l.jsx)(s.p,{children:(0,l.jsx)(s.strong,{children:"4. \ubc30\ud3ec \ud2b8\ub9ac\uac70:"})}),(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.code,{children:"slinky-slurm"})," \ub514\ub809\ud1a0\ub9ac\ub85c \uc774\ub3d9\ud558\uace0 ",(0,l.jsx)(s.code,{children:"install.sh"})," \uc2a4\ud06c\ub9bd\ud2b8\ub97c \uc2e4\ud589\ud569\ub2c8\ub2e4:"]}),(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"cd ai-on-eks/blueprints/training/slinky-slurm\n./install.sh\n"})})]}),"\n",(0,l.jsxs)(c.A,{header:(0,l.jsx)(s.h3,{children:(0,l.jsx)(s.span,{children:"\ubc30\ud3ec \ud655\uc778"})}),children:[(0,l.jsx)(s.p,{children:(0,l.jsx)(s.strong,{children:"0. Slurm \ubc30\ud3ec\ub97c \uc704\ud55c Kubernetes \ub9ac\uc18c\uc2a4 \ud655\uc778:"})}),(0,l.jsx)(s.p,{children:"\ub85c\uceec kubeconfig\ub97c \uc5c5\ub370\uc774\ud2b8\ud558\uc5ec kubernetes \ud074\ub7ec\uc2a4\ud130\uc5d0 \uc811\uadfc\ud569\ub2c8\ub2e4:"}),(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"aws eks update-kubeconfig --name slurm-on-eks\n"})}),(0,l.jsx)(s.p,{children:"Slinky Slurm Operator\uc758 \ubc30\ud3ec \uc0c1\ud0dc \ud655\uc778:"}),(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"kubectl get all -n slinky\n"})}),(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"NAME                                         READY   STATUS    RESTARTS   AGE\npod/slurm-operator-bb5c58dc6-5rsjg           1/1     Running   0          41m\npod/slurm-operator-webhook-87bc59884-vw8rx   1/1     Running   0          41m\n\nNAME                             TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)             AGE\nservice/slurm-operator           ClusterIP   None             <none>        8080/TCP,8081/TCP   41m\nservice/slurm-operator-webhook   ClusterIP   172.20.229.194   <none>        443/TCP,8081/TCP    41m\n\nNAME                                     READY   UP-TO-DATE   AVAILABLE   AGE\ndeployment.apps/slurm-operator           1/1     1            1           41m\ndeployment.apps/slurm-operator-webhook   1/1     1            1           41m\n\nNAME                                               DESIRED   CURRENT   READY   AGE\nreplicaset.apps/slurm-operator-bb5c58dc6           1         1         1       41m\nreplicaset.apps/slurm-operator-webhook-87bc59884   1         1         1       41m\n"})}),(0,l.jsx)(s.p,{children:"Slurm Cluster\uc758 \ubc30\ud3ec \uc0c1\ud0dc \ud655\uc778:"}),(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"kubectl get all -n slurm\n"})}),(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"NAME                                      READY   STATUS    RESTARTS   AGE\npod/mariadb-0                             1/1     Running   0          9m12s\npod/slurm-accounting-0                    1/1     Running   0          9m6s\npod/slurm-controller-0                    3/3     Running   0          9m5s\npod/slurm-login-slinky-65cdfdb557-2869l   1/1     Running   0          9m5s\npod/slurm-restapi-5c6d784dbc-6nlcw        1/1     Running   0          9m5s\npod/slurm-worker-slinky-0                 2/2     Running   0          9m5s\npod/slurm-worker-slinky-1                 2/2     Running   0          9m5s\npod/slurm-worker-slinky-2                 2/2     Running   0          9m5s\npod/slurm-worker-slinky-3                 2/2     Running   0          9m5s\n\nNAME                          TYPE           CLUSTER-IP       EXTERNAL-IP                                                                  PORT(S)        AGE\nservice/mariadb               ClusterIP      172.20.165.187   <none>                                                                       3306/TCP       9m12s\nservice/mariadb-internal      ClusterIP      None             <none>                                                                       3306/TCP       9m12s\nservice/slurm-accounting      ClusterIP      172.20.206.252   <none>                                                                       6819/TCP       9m6s\nservice/slurm-controller      ClusterIP      172.20.22.142    <none>                                                                       6817/TCP       9m5s\nservice/slurm-login-slinky    LoadBalancer   172.20.155.154   k8s-slurm-slurmlog-d3c664afd2-5c3621e9c562ee2d.elb.us-west-2.amazonaws.com   22:31787/TCP   9m5s\nservice/slurm-restapi         ClusterIP      172.20.130.229   <none>                                                                       6820/TCP       9m5s\nservice/slurm-workers-slurm   ClusterIP      None             <none>                                                                       6818/TCP       9m5s\n\nNAME                                 READY   UP-TO-DATE   AVAILABLE   AGE\ndeployment.apps/slurm-login-slinky   1/1     1            1           9m6s\ndeployment.apps/slurm-restapi        1/1     1            1           9m6s\n\nNAME                                            DESIRED   CURRENT   READY   AGE\nreplicaset.apps/slurm-login-slinky-65cdfdb557   1         1         1       9m6s\nreplicaset.apps/slurm-restapi-5c6d784dbc        1         1         1       9m6s\n\nNAME                                READY   AGE\nstatefulset.apps/mariadb            1/1     9m13s\nstatefulset.apps/slurm-accounting   1/1     9m7s\nstatefulset.apps/slurm-controller   1/1     9m6s\n"})}),(0,l.jsx)(s.p,{children:(0,l.jsx)(s.strong,{children:"1. Slurm \ub85c\uadf8\uc778 \ud30c\ub4dc \uc811\uadfc:"})}),(0,l.jsx)(s.p,{children:"\ub85c\uadf8\uc778 \ud30c\ub4dc\uc5d0 SSH \uc811\uc18d:"}),(0,l.jsx)(s.admonition,{type:"info",children:(0,l.jsxs)(s.p,{children:["\uc774 \ub370\ubaa8\uc5d0\uc11c\ub294 ",(0,l.jsx)(s.code,{children:"slurm-login-slinky"})," \uc11c\ube44\uc2a4\uac00 ",(0,l.jsx)(s.code,{children:"service.beta.kubernetes.io/load-balancer-source-ranges"}),"\ub97c \uc0ac\uc6a9\ud558\uc5ec \ub3d9\uc801\uc73c\ub85c \uc5b4\ub178\ud14c\uc774\uc158\ub418\uc5b4 \uc0ac\uc6a9\uc790\uc758 IP \uc8fc\uc18c\ub9cc Network Load Balancer\uc5d0 \ub300\ud55c \uc811\uadfc\uc744 \uc81c\ud55c\ud569\ub2c8\ub2e4. AWS Load Balancer Controller\ub294 \uc778\ubc14\uc6b4\ub4dc \ubcf4\uc548 \uadf8\ub8f9 \uaddc\uce59\uc744 \uc218\uc815\ud558\uc5ec \uc774\ub97c \ub2ec\uc131\ud569\ub2c8\ub2e4. \uc790\uc138\ud55c \ub0b4\uc6a9\uc740 ",(0,l.jsx)(s.a,{href:"https://kubernetes-sigs.github.io/aws-load-balancer-controller/v2.13/guide/ingress/annotations/#access-control",children:"\uc811\uadfc \uc81c\uc5b4 \uc5b4\ub178\ud14c\uc774\uc158"})," \ubb38\uc11c\ub97c \ucc38\uc870\ud558\uc138\uc694."]})}),(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:'SLURM_LOGIN_HOSTNAME="$(kubectl get svc slurm-login-slinky -n slurm \\\n -o jsonpath="{.status.loadBalancer.ingress[0].hostname}")"\n\nssh -i ~/.ssh/id_ed25519_slurm -p 22 root@$SLURM_LOGIN_HOSTNAME\n'})}),(0,l.jsx)(s.p,{children:"\uc0ac\uc6a9 \uac00\ub2a5\ud55c \ub178\ub4dc \ud655\uc778:"}),(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"sinfo\n"})}),(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"PARTITION AVAIL  TIMELIMIT  NODES  STATE NODELIST\nslinky       up   infinite      4   idle slinky-[0-3]\nall*         up   infinite      4   idle slinky-[0-3]\n"})}),(0,l.jsx)(s.p,{children:"Amazon FSx for Lustre \uacf5\uc720 \ud30c\uc77c \uc2dc\uc2a4\ud15c\uc774 \ub85c\uadf8\uc778 \ud30c\ub4dc\uc5d0 \ub9c8\uc6b4\ud2b8\ub418\uc5c8\ub294\uc9c0 \ud655\uc778:"}),(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"df -h\n"})}),(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"Filesystem               Size  Used Avail Use% Mounted on\noverlay                   20G  8.9G   12G  45% /\ntmpfs                     64M     0   64M   0% /dev\n/dev/root                307M  307M     0 100% /usr/local/sbin/modprobe\n10.1.0.61@tcp:/we427b4v  2.3T   16M  2.3T   1% /fsx\n/dev/nvme1n1p1            20G  8.9G   12G  45% /etc/hosts\ntmpfs                     15G  4.0K   15G   1% /etc/slurm\ntmpfs                     15G  4.0K   15G   1% /run/slurm\nshm                       64M     0   64M   0% /dev/shm\ntmpfs                     15G   24K   15G   1% /etc/ssh/ssh_host_rsa_key\ntmpfs                     15G  8.0K   15G   1% /etc/ssh/sshd_config\ntmpfs                     15G  4.0K   15G   1% /etc/sssd/sssd.conf\ntmpfs                    7.7G     0  7.7G   0% /proc/acpi\ntmpfs                    7.7G     0  7.7G   0% /sys/firmware\n"})}),(0,l.jsx)(s.p,{children:"\uba38\uc2e0\uc73c\ub85c \ub3cc\uc544\uac00\uae30:"}),(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"exit\n"})}),(0,l.jsx)(s.p,{children:(0,l.jsx)(s.strong,{children:"2. Slurm \ucef4\ud4e8\ud2b8 \ud30c\ub4dc \uc811\uadfc:"})}),(0,l.jsx)(s.p,{children:"slurm \ucef4\ud4e8\ud2b8 \ub178\ub4dc \uc911 \ud558\ub098\uc640 \ub300\ud654\ud615 \ud130\ubbf8\ub110 \uc138\uc158 \uc5f4\uae30:"}),(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"kubectl -n slurm exec -it pod/slurm-worker-slinky-0 -- bash --login\n"})}),(0,l.jsx)(s.p,{children:"Amazon FSx for Lustre \uacf5\uc720 \ud30c\uc77c \uc2dc\uc2a4\ud15c\uc774 \ub85c\uadf8\uc778 \ud30c\ub4dc\uc5d0 \ub9c8\uc6b4\ud2b8\ub418\uc5c8\ub294\uc9c0 \ud655\uc778:"}),(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"df -h\n"})}),(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"Filesystem               Size  Used Avail Use% Mounted on\noverlay                  3.5T   95G  3.4T   3% /\ntmpfs                     64M     0   64M   0% /dev\n10.1.0.61@tcp:/we427b4v  2.3T   16M  2.3T   1% /fsx\ntmpfs                    366G  4.0K  366G   1% /etc/slurm\ntmpfs                    187G     0  187G   0% /dev/shm\n/dev/nvme2n1             3.5T   95G  3.4T   3% /etc/hosts\ntmpfs                    366G     0  366G   0% /var/log/slurm\ntmpfs                     75G  4.4M   75G   1% /run/nvidia-persistenced/socket\n/dev/root                905M  905M     0 100% /usr/bin/nvidia-smi\n/dev/nvme0n1p1           300G  6.1G  294G   3% /var/lib/dcgm-exporter/job-mapping\n"})}),(0,l.jsx)(s.p,{children:"\ucef4\ud4e8\ud2b8 \ub178\ub4dc \ud30c\ub4dc\uc5d0 \uc124\uce58\ub41c CUDA \ucef4\ud30c\uc77c\ub7ec \ubc84\uc804 \ud655\uc778:"}),(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"nvcc --version\n"})}),(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"# nvcc: NVIDIA (R) Cuda compiler driver\n# Copyright (c) 2005-2024 NVIDIA Corporation\n# Built on Tue_Oct_29_23:50:19_PDT_2024\n# Cuda compilation tools, release 12.6, V12.6.85\n# Build cuda_12.6.r12.6/compiler.35059454_0\n"})}),(0,l.jsx)(s.p,{children:"\ucef4\ud4e8\ud2b8 \ub178\ub4dc \ud30c\ub4dc\uc758 NCCL \ubc84\uc804 \ud655\uc778:"}),(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"ldconfig -v | grep \"libnccl.so\" | tail -n1 | sed -r 's/^.*\\.so\\.//'\n"})}),(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"# 2.23.4\n"})}),(0,l.jsx)(s.p,{children:"EFA \uac00\uc6a9\uc131 \ud655\uc778:"}),(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"fi_info -p efa\n"})}),(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"provider: efa\n    fabric: efa\n    domain: rdmap0s26-rdm\n    version: 122.0\n    type: FI_EP_RDM\n    protocol: FI_PROTO_EFA\nprovider: efa\n    fabric: efa\n    domain: rdmap0s26-dgrm\n    version: 122.0\n    type: FI_EP_DGRAM\n    protocol: FI_PROTO_EFA\n"})}),(0,l.jsx)(s.p,{children:"libfabric \ub77c\uc774\ube0c\ub7ec\ub9ac \ud655\uc778:"}),(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"ls /opt/amazon/efa/lib\n"})}),(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"libfabric.a  libfabric.so  libfabric.so.1  libfabric.so.1.25.0  pkgconfig\n"})}),(0,l.jsx)(s.p,{children:"OFI NCCL \ud50c\ub7ec\uadf8\uc778 \ub77c\uc774\ube0c\ub7ec\ub9ac \ud655\uc778:"}),(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"ls /opt/amazon/ofi-nccl/lib/x86_64-linux-gnu\n"})}),(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"libnccl-net.so  libnccl-ofi-tuner.so\n"})}),(0,l.jsx)(s.p,{children:"\ub178\ub4dc \ub0b4 GPU \ud1a0\ud3f4\ub85c\uc9c0 \ud655\uc778:"}),(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"nvidia-smi topo -m\n"})}),(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"\tGPU0\tCPU Affinity\tNUMA Affinity\tGPU NUMA ID\nGPU0\t X \t0-31\t0\t\tN/A\n"})}),(0,l.jsx)(s.p,{children:"\uba38\uc2e0\uc73c\ub85c \ub3cc\uc544\uac00\uae30:"}),(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"exit\n"})})]}),"\n",(0,l.jsxs)(c.A,{header:(0,l.jsx)(s.h3,{children:(0,l.jsx)(s.span,{children:"FSDP \uc608\uc81c \uc2e4\ud589"})}),children:[(0,l.jsx)(s.p,{children:(0,l.jsx)(s.strong,{children:"0. \ud6c8\ub828 \uc544\ud2f0\ud329\ud2b8 \uc900\ube44:"})}),(0,l.jsx)(s.p,{children:"\ub85c\uadf8\uc778 \ud30c\ub4dc\uc5d0 SSH \uc811\uc18d:"}),(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:'SLURM_LOGIN_HOSTNAME="$(kubectl get svc slurm-login-slinky -n slurm \\\n -o jsonpath="{.status.loadBalancer.ingress[0].hostname}")"\n\nssh -i ~/.ssh/id_ed25519_slurm -p 22 root@$SLURM_LOGIN_HOSTNAME\n'})}),(0,l.jsx)(s.p,{children:"\ub85c\uadf8\uc778 \ud30c\ub4dc\uc5d0 Git \uc124\uce58:"}),(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"apt update\napt install -y git\ngit --version\n"})}),(0,l.jsx)(s.p,{children:"FSx \ub9c8\uc6b4\ud2b8\ub85c \ub514\ub809\ud1a0\ub9ac \ubcc0\uacbd:"}),(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"cd /fsx\n"})}),(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.a,{href:"https://github.com/aws-samples/awsome-distributed-training",children:"awsome-distributed-training"})," \uc800\uc7a5\uc18c \ud074\ub860:"]}),(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"git clone https://github.com/aws-samples/awsome-distributed-training/\n"})}),(0,l.jsx)(s.p,{children:"Slurm\uc6a9 FSDP \uc608\uc81c \ub514\ub809\ud1a0\ub9ac\ub85c \ubcc0\uacbd:"}),(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"cd awsome-distributed-training/3.test_cases/pytorch/FSDP/slurm\n"})}),(0,l.jsx)(s.p,{children:"\uccb4\ud06c\ud3ec\uc778\ud2b8\ub97c \uc704\ud55c \uc0c8 \ub514\ub809\ud1a0\ub9ac \uc0dd\uc131"}),(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"mkdir -p checkpoints\n"})}),(0,l.jsxs)(s.admonition,{type:"info",children:[(0,l.jsxs)(s.p,{children:["\uae30\ubcf8\uc801\uc73c\ub85c ",(0,l.jsx)(s.code,{children:"llama2_7b-training.sbatch"})," \ubc30\uce58 \ud6c8\ub828 \uc2a4\ud06c\ub9bd\ud2b8\ub294 4\uac1c\uc758 ",(0,l.jsx)(s.code,{children:"g5.8xlarge"})," \ub178\ub4dc\uc5d0 FSDP \uc6cc\ud06c\ub85c\ub4dc\ub97c \ubd84\uc0b0\ud558\ub3c4\ub85d \uad6c\uc131\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4. Slurm NodeSet\uc740 ",(0,l.jsx)(s.code,{children:"karpenter.sh/nodepool"})," nodeSelector\ub97c \ud1b5\ud574 ",(0,l.jsx)(s.code,{children:"g5-nvidia"})," NodePool\uc5d0 \ub9e4\ud551\ub429\ub2c8\ub2e4. Karpenter\uac00 4\uac1c\uc758 \uc628\ub514\ub9e8\ub4dc \ub610\ub294 \uc2a4\ud31f \uc778\uc2a4\ud134\uc2a4\ub97c \ucc3e\uc744 \uc218 \uc5c6\ub294 \uacbd\uc6b0 \ubc30\uce58 \ud6c8\ub828 \uc2a4\ud06c\ub9bd\ud2b8\ub97c \uc870\uc815\ud55c \ub2e4\uc74c \ud504\ub85c\ube44\uc800\ub2dd\ub41c S3 \ubc84\ud0b7\uc5d0 \uc0c8 \ubcf5\uc0ac\ubcf8\uc744 \uc5c5\ub85c\ub4dc\ud574\uc57c \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uc774\ub294 ",(0,l.jsx)(s.a,{href:"https://docs.aws.amazon.com/fsx/latest/LustreGuide/create-dra-linked-data-repo.html",children:"\ub370\uc774\ud130 \uc800\uc7a5\uc18c \uc5f0\uacb0"}),"\uc744 \ud1b5\ud574 FSx for Lustre \ud30c\uc77c \uc2dc\uc2a4\ud15c\uc5d0 \ub3d9\uae30\ud654\ub429\ub2c8\ub2e4:"]}),(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"cd ../../../infra/slinky-slurm/terraform/_LOCAL\nS3_BUCKET_NAME=$(terraform output -raw fsx_s3_bucket_name)\ncd ../../../../blueprints/training/slinky-slurm\naws s3 cp llama2_7b-training.sbatch s3://${S3_BUCKET_NAME}/\n"})})]}),(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.code,{children:"llama2_7b-training.sbatch"})," \ubc30\uce58 \ud6c8\ub828 \uc2a4\ud06c\ub9bd\ud2b8\ub97c Slurm\uc6a9 FSDP \uc608\uc81c \ub514\ub809\ud1a0\ub9ac\ub85c \ubcf5\uc0ac:"]}),(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"cp /fsx/data/llama2_7b-training.sbatch ./llama2_7b-training.sbatch\n"})}),(0,l.jsx)(s.p,{children:(0,l.jsx)(s.strong,{children:"1. Hugging Face \uc811\uadfc \ud1a0\ud070 \uad6c\uc131:"})}),(0,l.jsxs)(s.p,{children:["\uc2a4\ub85c\ud2c0\ub9c1 \uc5c6\uc774 ",(0,l.jsx)(s.a,{href:"https://huggingface.co/datasets/allenai/c4",children:"allenai/c4"})," \ub370\uc774\ud130\uc14b\uc744 \uc2a4\ud2b8\ub9ac\ubc0d\ud558\uae30 \uc704\ud574 \uc0c8 ",(0,l.jsx)(s.a,{href:"https://huggingface.co/",children:"Hugging Face"})," \uc77d\uae30 ",(0,l.jsx)(s.a,{href:"https://huggingface.co/docs/hub/en/security-tokens",children:"\uc0ac\uc6a9\uc790 \uc811\uadfc \ud1a0\ud070"}),"\uc744 \uc0dd\uc131\ud569\ub2c8\ub2e4."]}),(0,l.jsx)(s.p,{children:"\uc0c8 Hugging Face \ud1a0\ud070\uc744 \ud6c8\ub828 \uc2a4\ud06c\ub9bd\ud2b8\uc5d0 \uc8fc\uc785:"}),(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:'NEW_TOKEN="<you-token-here>"\n'})}),(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:'sed -i "s/export HF_TOKEN=.*$/export HF_TOKEN=$NEW_TOKEN/" llama2_7b-training.sbatch\n'})}),(0,l.jsx)(s.p,{children:(0,l.jsx)(s.strong,{children:"2. \ucee8\ud14c\uc774\ub108\ud654\ub41c \ud658\uacbd\uc744 \uc704\ud55c DataLoader \uad6c\uc131:"})}),(0,l.jsxs)(s.p,{children:["\uc774 Kubernetes \uae30\ubc18 Slurm \uc124\uc815\uc5d0\uc11c \uc2e4\ud589\ud560 \ub54c DataLoader\ub294 \uae30\ubcf8 fork \ubc29\uc2dd \ub300\uc2e0 spawn \uae30\ubc18 \uba40\ud2f0\ud504\ub85c\uc138\uc2f1\uc744 \uc0ac\uc6a9\ud574\uc57c \ud569\ub2c8\ub2e4. \uc774\ub294 \ucee8\ud14c\uc774\ub108\ud654\ub41c \uc6cc\ucee4 \ud504\ub85c\uc138\uc2a4 \ub0b4\uc5d0\uc11c \uc801\uc808\ud55c CUDA \ucd08\uae30\ud654\ub97c \ubcf4\uc7a5\ud569\ub2c8\ub2e4. \uc774\ub97c \uc704\ud574 ",(0,l.jsx)(s.code,{children:"train_utils.py"})," \ud30c\uc77c\uc5d0 \uc815\uc758\ub41c DataLoader\uc5d0 ",(0,l.jsx)(s.code,{children:"multiprocessing_context='spawn'"}),"\uc744 \ucd94\uac00\ud569\ub2c8\ub2e4."]}),(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"sed -i \"s/timeout=600)/timeout=600, multiprocessing_context='spawn')/\" ../src/model_utils/train_utils.py\n"})}),(0,l.jsx)(s.p,{children:(0,l.jsx)(s.strong,{children:"3. \ud6c8\ub828 \uc791\uc5c5 \uc2dc\uc791:"})}),(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.a,{href:"https://slurm.schedmd.com/sbatch.html",children:"sbatch"})," \uba85\ub839\uc744 \uc0ac\uc6a9\ud558\uc5ec Slurm Controller\uc5d0 \ubc30\uce58 \ud6c8\ub828 \uc2a4\ud06c\ub9bd\ud2b8 \uc81c\ucd9c:"]}),(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"sbatch llama2_7b-training.sbatch\n"})}),(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"Submitted batch job 1\n"})}),(0,l.jsx)(s.p,{children:(0,l.jsx)(s.strong,{children:"4. \ud6c8\ub828 \uc9c4\ud589 \uc0c1\ud669 \ubaa8\ub2c8\ud130\ub9c1:"})}),(0,l.jsx)(s.p,{children:"\ub85c\uadf8\uc778 \ud30c\ub4dc\uc5d0\uc11c \ucd9c\ub825 \ub85c\uadf8 \ud655\uc778:"}),(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:'export JOB_ID=$(squeue -h -u root -o "%i" | head -1)\n\ntail -f logs/llama2_7b-FSDP_${JOB_ID}.out\n'})}),(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"2: node-0:309:309 [0] NCCL INFO AllGather: 37756928 Bytes -> Algo 1 proto 2 time 2860.208008\n1: node-3:278:278 [0] NCCL INFO AllGather: opCount 1606 sendbuff 0x93fd44a00 recvbuff 0x96d44e200 count 2359808 datatype 7 op 0 root 0 comm 0x555e2c6387e0 [nranks=4] stream 0x555e2b3a4370\n0: node-1:397:397 [0] NCCL INFO AllGather: opCount 1606 sendbuff 0x93fd44a00 recvbuff 0x96d44e200 count 2359808 datatype 7 op 0 root 0 comm 0x55c1eaee2a20 [nranks=4] stream 0x55c1e9c4f3d0\n3: node-2:278:278 [0] NCCL INFO AllGather: opCount 1606 sendbuff 0x93fd44a00 recvbuff 0x96d44e200 count 2359808 datatype 7 op 0 root 0 comm 0x5611d45babf0 [nranks=4] stream 0x5611d3327480\n1: node-3:278:278 [0] NCCL INFO AllGather: opCount 1607 sendbuff 0x940645200 recvbuff 0x96d44e200 count 2359808 datatype 7 op 0 root 0 comm 0x555e2c6387e0 [nranks=4] stream 0x555e2b3a4370\n3: node-2:278:278 [0] NCCL INFO AllGather: opCount 1607 sendbuff 0x940645200 recvbuff 0x96d44e200 count 2359808 datatype 7 op 0 root 0 comm 0x5611d45babf0 [nranks=4] stream 0x5611d3327480\n1: node-3:278:278 [0] NCCL INFO Broadcast: opCount 1608 sendbuff 0x302287400 recvbuff 0x302287400 count 1 datatype 4 op 0 root 0 comm 0x555e2c6387e0 [nranks=4] stream 0x555e2b3a4370\n0: node-1:397:397 [0] NCCL INFO AllGather: opCount 1607 sendbuff 0x940645200 recvbuff 0x96d44e200 count 2359808 datatype 7 op 0 root 0 comm 0x55c1eaee2a20 [nranks=4] stream 0x55c1e9c4f3d0\n3: node-2:278:278 [0] NCCL INFO Broadcast: opCount 1608 sendbuff 0x302287400 recvbuff 0x302287400 count 1 datatype 4 op 0 root 0 comm 0x5611d45babf0 [nranks=4] stream 0x5611d3327480\n1: node-3:278:278 [0] NCCL INFO Broadcast: opCount 1609 sendbuff 0x302287600 recvbuff 0x302287600 count 3145 datatype 1 op 0 root 0 comm 0x555e2c6387e0 [nranks=4] stream 0x555e2b3a4370\n"})}),(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.code,{children:"slurm-worker-slinky-0"}),"\uc5d0\uc11c \ubc30\uce58 \ubc0f \uc190\uc2e4 \ud655\uc778 (\uc0c8 \ud130\ubbf8\ub110 \ucc3d\uc5d0\uc11c):"]}),(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"kubectl -n slurm exec -it pod/slurm-worker-slinky-0 -- bash --login\n"})}),(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:'cd /fsx/awsome-distributed-training/3.test_cases/pytorch/FSDP/slurm\nexport JOB_ID=$(squeue -h -u root -o "%i" | head -1)\n\nwatch "grep \'Batch.*Loss\' logs/llama2_7b-FSDP_${JOB_ID}.out"\n'})}),(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"2: 2026-01-16 06:33:23,797 [INFO] __main__: Batch 0 Loss: 11.07265, Speed: 1.17 samples/sec, lr: 0.000031\n2: 2026-01-16 06:33:24,456 [INFO] __main__: Batch 1 Loss: 11.05403, Speed: 6.08 samples/sec, lr: 0.000063\n2: 2026-01-16 06:33:25,111 [INFO] __main__: Batch 2 Loss: 10.88060, Speed: 6.11 samples/sec, lr: 0.000094\n2: 2026-01-16 06:33:25,765 [INFO] __main__: Batch 3 Loss: 10.60247, Speed: 6.12 samples/sec, lr: 0.000100\n2: 2026-01-16 06:33:26,422 [INFO] __main__: Batch 4 Loss: 10.19984, Speed: 6.09 samples/sec, lr: 0.000100\n2: 2026-01-16 06:33:27,080 [INFO] __main__: Batch 5 Loss: 9.90466, Speed: 6.08 samples/sec, lr: 0.000100\n2: 2026-01-16 06:33:27,733 [INFO] __main__: Batch 6 Loss: 9.80892, Speed: 6.14 samples/sec, lr: 0.000100\n2: 2026-01-16 06:33:28,388 [INFO] __main__: Batch 7 Loss: 9.69072, Speed: 6.11 samples/sec, lr: 0.000100\n2: 2026-01-16 06:33:29,046 [INFO] __main__: Batch 8 Loss: 9.57264, Speed: 6.09 samples/sec, lr: 0.000100\n2: 2026-01-16 06:33:29,703 [INFO] __main__: Batch 9 Loss: 9.37485, Speed: 6.09 samples/sec, lr: 0.000100\n2: 2026-01-16 06:33:30,357 [INFO] __main__: Batch 10 Loss: 9.25147, Speed: 6.11 samples/sec, lr: 0.000100\n2: 2026-01-16 06:33:31,010 [INFO] __main__: Batch 11 Loss: 9.27672, Speed: 6.13 samples/sec, lr: 0.000100\n2: 2026-01-16 06:33:31,669 [INFO] __main__: Batch 12 Loss: 9.16106, Speed: 6.08 samples/sec, lr: 0.000100\n2: 2026-01-16 06:33:32,328 [INFO] __main__: Batch 13 Loss: 9.02550, Speed: 6.07 samples/sec, lr: 0.000100\n2: 2026-01-16 06:33:32,981 [INFO] __main__: Batch 14 Loss: 8.93448, Speed: 6.14 samples/sec, lr: 0.000100\n2: 2026-01-16 06:33:33,639 [INFO] __main__: Batch 15 Loss: 8.83249, Speed: 6.08 samples/sec, lr: 0.000100\n2: 2026-01-16 06:33:34,300 [INFO] __main__: Batch 16 Loss: 8.68732, Speed: 6.05 samples/sec, lr: 0.000100\n2: 2026-01-16 06:33:34,957 [INFO] __main__: Batch 17 Loss: 8.85516, Speed: 6.09 samples/sec, lr: 0.000100\n2: 2026-01-16 06:33:35,616 [INFO] __main__: Batch 18 Loss: 8.63410, Speed: 6.08 samples/sec, lr: 0.000100\n2: 2026-01-16 06:33:36,274 [INFO] __main__: Batch 19 Loss: 8.46158, Speed: 6.08 samples/sec, lr: 0.000100\n2: 2026-01-16 06:33:36,926 [INFO] __main__: Batch 20 Loss: 8.60995, Speed: 6.14 samples/sec, lr: 0.000100\n2: 2026-01-16 06:33:37,591 [INFO] __main__: Batch 21 Loss: 8.39657, Speed: 6.02 samples/sec, lr: 0.000100\n2: 2026-01-16 06:33:38,246 [INFO] __main__: Batch 22 Loss: 8.26141, Speed: 6.11 samples/sec, lr: 0.000100\n2: 2026-01-16 06:33:38,902 [INFO] __main__: Batch 23 Loss: 8.25075, Speed: 6.10 samples/sec, lr: 0.000100\n2: 2026-01-16 06:33:39,561 [INFO] __main__: Batch 24 Loss: 8.46888, Speed: 6.08 samples/sec, lr: 0.000100\n2: 2026-01-16 06:33:40,218 [INFO] __main__: Batch 25 Loss: 8.16549, Speed: 6.08 samples/sec, lr: 0.000100\n2: 2026-01-16 06:33:40,870 [INFO] __main__: Batch 26 Loss: 8.17494, Speed: 6.14 samples/sec, lr: 0.000100\n2: 2026-01-16 06:33:41,528 [INFO] __main__: Batch 27 Loss: 7.95398, Speed: 6.09 samples/sec, lr: 0.000100\n"})}),(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.code,{children:"slurm-worker-slinky-1"}),"\uc5d0\uc11c squeue \ud655\uc778 (\uc0c8 \ud130\ubbf8\ub110 \ucc3d\uc5d0\uc11c):"]}),(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"kubectl -n slurm exec -it pod/slurm-worker-slinky-1 -- bash --login\n"})}),(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"# 1\ucd08 \uac04\uaca9 \uc5c5\ub370\uc774\ud2b8\nwatch -n 1 squeue\n"})}),(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"Every 1.0s: squeue                                                                                                                                node-1: Thu Jul 17 13:18:13 2025\n\n             JOBID PARTITION     NAME     USER ST       TIME  NODES NODELIST(REASON)\n                 1       all llama2_7     root  R       4:47      4 node-[0-3]\n"})}),(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.code,{children:"slurm-worker-slinky-2"}),"\uc5d0\uc11c \uccb4\ud06c\ud3ec\uc778\ud2b8 \ud655\uc778 (\uc0c8 \ud130\ubbf8\ub110 \ucc3d\uc5d0\uc11c):"]}),(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"kubectl -n slurm exec -it pod/slurm-worker-slinky-2 -- bash --login\n"})}),(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:'cd /fsx/awsome-distributed-training/3.test_cases/pytorch/FSDP/slurm\n\n# \ubcc0\uacbd \uc0ac\ud56d \uac15\uc870, \ud0c0\uc784\uc2a4\ud0ec\ud504 \ud45c\uc2dc, 5\ucd08 \uac04\uaca9 \uc5c5\ub370\uc774\ud2b8\nwatch -n 5 -d "ls -lh checkpoints"\n'})}),(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"Every 5.0s: ls -lh checkpoints                                                                                                                    node-2: Thu Jul 17 13:35:32 2025\n\ntotal 175K\ndrwxr-xr-x. 2 root root 25K Jul 17 13:15 llama_v2-100steps\ndrwxr-xr-x. 2 root root 25K Jul 17 13:16 llama_v2-200steps\ndrwxr-xr-x. 2 root root 25K Jul 17 13:28 llama_v2-300steps\ndrwxr-xr-x. 2 root root 25K Jul 17 13:29 llama_v2-400steps\ndrwxr-xr-x. 2 root root 25K Jul 17 13:30 llama_v2-500steps\ndrwxr-xr-x. 2 root root 25K Jul 17 13:32 llama_v2-600steps\ndrwxr-xr-x. 2 root root 25K Jul 17 13:33 llama_v2-700steps\n"})}),(0,l.jsx)(s.p,{children:"\uba38\uc2e0\uc73c\ub85c \ub3cc\uc544\uac00\uae30:"}),(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"exit\n"})})]}),"\n",(0,l.jsxs)(c.A,{header:(0,l.jsx)(s.h3,{children:(0,l.jsx)(s.span,{children:"CloudWatch Container Insights"})}),children:[(0,l.jsxs)(s.p,{children:["GPU \ud65c\uc6a9\ub960 \ubc0f EFA \ub124\ud2b8\uc6cc\ud06c \uba54\ud2b8\ub9ad\uc744 \ubcf4\ub824\uba74 ",(0,l.jsx)(s.a,{href:"https://console.aws.amazon.com/cloudwatch/home?#container-insights:?~(query~()~context~(orchestrationService~'eks))",children:"Amazon CloudWatch Container Insights"}),"\ub85c \uc774\ub3d9\ud558\uc138\uc694:"]}),(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.img,{alt:"alt text",src:n(50437).A+"",width:"1177",height:"362"}),"\n",(0,l.jsx)(s.img,{alt:"alt text",src:n(18661).A+"",width:"1175",height:"364"})]})]}),"\n",(0,l.jsxs)(c.A,{header:(0,l.jsx)(s.h3,{children:(0,l.jsx)(s.span,{children:"\uc815\ub9ac"})}),children:[(0,l.jsx)(s.admonition,{type:"caution",children:(0,l.jsx)(s.p,{children:"AWS \uacc4\uc815\uc5d0 \uc6d0\uce58 \uc54a\ub294 \uc694\uae08\uc774 \ubc1c\uc0dd\ud558\uc9c0 \uc54a\ub3c4\ub85d \uc774 \ubc30\ud3ec \uc911\uc5d0 \uc0dd\uc131\ub41c \ubaa8\ub4e0 AWS \ub9ac\uc18c\uc2a4\ub97c \uc0ad\uc81c\ud558\uc138\uc694."})}),(0,l.jsxs)(s.p,{children:["\uc774 \uc2a4\ud06c\ub9bd\ud2b8\ub294 \ubaa8\ub4e0 \ub9ac\uc18c\uc2a4\uac00 \uc62c\ubc14\ub978 \uc21c\uc11c\ub85c \uc0ad\uc81c\ub418\ub3c4\ub85d ",(0,l.jsx)(s.code,{children:"-target"})," \uc635\uc158\uc744 \uc0ac\uc6a9\ud558\uc5ec \ud658\uacbd\uc744 \uc815\ub9ac\ud569\ub2c8\ub2e4."]}),(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"cd ai-on-eks/blueprints/training/slinky-slurm\n"})}),(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"./cleanup.sh\n"})})]})]})}function p(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,l.jsx)(s,{...e,children:(0,l.jsx)(h,{...e})}):h(e)}},42450(e,s,n){n.d(s,{A:()=>m});var r=n(96540),l=n(5556),i=n.n(l),c=n(34164);const d="collapsibleContent_q3kw",t="header_QCEw",o="icon_PckA",a="content_qLC1",h="expanded_iGsi";var p=n(74848);function x({children:e,header:s}){const[n,l]=(0,r.useState)(!1);return(0,p.jsxs)("div",{className:d,children:[(0,p.jsxs)("div",{className:(0,c.A)(t,{[h]:n}),onClick:()=>{l(!n)},children:[s,(0,p.jsx)("span",{className:(0,c.A)(o,{[h]:n}),children:n?"\ud83d\udc47":"\ud83d\udc48"})]}),n&&(0,p.jsx)("div",{className:a,children:e})]})}x.propTypes={children:i().node.isRequired,header:i().node.isRequired};const m=x},18661(e,s,n){n.d(s,{A:()=>r});const r=n.p+"assets/images/EFA-Insights-529254b691ddd97e0c1076de518be80c.png"},50437(e,s,n){n.d(s,{A:()=>r});const r=n.p+"assets/images/GPU-Insights-d5689512edfa8778f7e26f85ece55a86.png"},15052(e,s,n){n.d(s,{A:()=>r});const r=n.p+"assets/images/Slurm-on-EKS-3d159d1c9ddc8da93a871260ec2fd4d8.png"},28453(e,s,n){n.d(s,{R:()=>c,x:()=>d});var r=n(96540);const l={},i=r.createContext(l);function c(e){const s=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:c(e.components),r.createElement(i.Provider,{value:s},e.children)}}}]);