"use strict";(globalThis.webpackChunkdoeks_website=globalThis.webpackChunkdoeks_website||[]).push([[3566],{34006(e,n,s){s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>d,metadata:()=>a,toc:()=>t});const a=JSON.parse('{"id":"blueprints/inference/framework-guides/Neuron/rayserve-ha","title":"Ray Serve \uace0\uac00\uc6a9\uc131","description":"EKS\uc5d0 ML \ubaa8\ub378\uc744 \ubc30\ud3ec\ud558\ub824\uba74 GPU \ub610\ub294 Neuron \uc778\uc2a4\ud134\uc2a4\uc5d0 \ub300\ud55c \uc561\uc138\uc2a4\uac00 \ud544\uc694\ud569\ub2c8\ub2e4. \ubc30\ud3ec\uac00 \uc791\ub3d9\ud558\uc9c0 \uc54a\ub294 \uacbd\uc6b0 \uc774\ub7ec\ud55c \ub9ac\uc18c\uc2a4\uc5d0 \ub300\ud55c \uc561\uc138\uc2a4\uac00 \ub204\ub77d\ub418\uc5b4 \uc788\uae30 \ub54c\ubb38\uc778 \uacbd\uc6b0\uac00 \ub9ce\uc2b5\ub2c8\ub2e4. \ub610\ud55c \uc77c\ubd80 \ubc30\ud3ec \ud328\ud134\uc740 Karpenter \uc624\ud1a0\uc2a4\ucf00\uc77c\ub9c1 \ubc0f \uc815\uc801 \ub178\ub4dc \uadf8\ub8f9\uc5d0 \uc758\uc874\ud569\ub2c8\ub2e4. \ub178\ub4dc\uac00 \ucd08\uae30\ud654\ub418\uc9c0 \uc54a\uc73c\uba74 Karpenter \ub610\ub294 \ub178\ub4dc \uadf8\ub8f9\uc758 \ub85c\uadf8\ub97c \ud655\uc778\ud558\uc5ec \ubb38\uc81c\ub97c \ud574\uacb0\ud558\uc2ed\uc2dc\uc624.","source":"@site/i18n/ko/docusaurus-plugin-content-docs/current/blueprints/inference/framework-guides/Neuron/rayserve-ha.md","sourceDirName":"blueprints/inference/framework-guides/Neuron","slug":"/blueprints/inference/framework-guides/Neuron/rayserve-ha","permalink":"/ai-on-eks/ko/docs/blueprints/inference/framework-guides/Neuron/rayserve-ha","draft":false,"unlisted":false,"editUrl":"https://github.com/awslabs/ai-on-eks/blob/main/website/docs/blueprints/inference/framework-guides/Neuron/rayserve-ha.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"title":"Ray Serve \uace0\uac00\uc6a9\uc131","sidebar_position":6},"sidebar":"blueprints","previous":{"title":"Inferentia2\uc758 Stable Diffusion","permalink":"/ai-on-eks/ko/docs/blueprints/inference/framework-guides/Neuron/stablediffusion-inf2"},"next":{"title":"Llama 4 with vLLM on Trainium","permalink":"/ai-on-eks/ko/docs/blueprints/inference/framework-guides/Neuron/llama4-trn2"}}');var r=s(74848),i=s(28453);s(42450);const d={title:"Ray Serve \uace0\uac00\uc6a9\uc131",sidebar_position:6},c=void 0,l={},t=[{value:"Elastic Cache for Redis\ub97c \uc0ac\uc6a9\ud55c Ray Head \ub178\ub4dc \uace0\uac00\uc6a9\uc131(HA)",id:"elastic-cache-for-redis\ub97c-\uc0ac\uc6a9\ud55c-ray-head-\ub178\ub4dc-\uace0\uac00\uc6a9\uc131ha",level:2},{value:"\uc678\ubd80 Redis \uc11c\ubc84 \ucd94\uac00",id:"\uc678\ubd80-redis-\uc11c\ubc84-\ucd94\uac00",level:3},{value:"RayService\uc5d0 \uc678\ubd80 Redis \uc815\ubcf4 \ucd94\uac00",id:"rayservice\uc5d0-\uc678\ubd80-redis-\uc815\ubcf4-\ucd94\uac00",level:3},{value:"Ray Head Pod \ucda9\ub3cc \uc2dc\ubbac\ub808\uc774\uc158",id:"ray-head-pod-\ucda9\ub3cc-\uc2dc\ubbac\ub808\uc774\uc158",level:3},{value:"Mistral AI Gradio \uc571 \ud14c\uc2a4\ud2b8",id:"mistral-ai-gradio-\uc571-\ud14c\uc2a4\ud2b8",level:4},{value:"\uc815\ub9ac",id:"\uc815\ub9ac",level:2}];function o(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.admonition,{type:"warning",children:(0,r.jsx)(n.p,{children:"EKS\uc5d0 ML \ubaa8\ub378\uc744 \ubc30\ud3ec\ud558\ub824\uba74 GPU \ub610\ub294 Neuron \uc778\uc2a4\ud134\uc2a4\uc5d0 \ub300\ud55c \uc561\uc138\uc2a4\uac00 \ud544\uc694\ud569\ub2c8\ub2e4. \ubc30\ud3ec\uac00 \uc791\ub3d9\ud558\uc9c0 \uc54a\ub294 \uacbd\uc6b0 \uc774\ub7ec\ud55c \ub9ac\uc18c\uc2a4\uc5d0 \ub300\ud55c \uc561\uc138\uc2a4\uac00 \ub204\ub77d\ub418\uc5b4 \uc788\uae30 \ub54c\ubb38\uc778 \uacbd\uc6b0\uac00 \ub9ce\uc2b5\ub2c8\ub2e4. \ub610\ud55c \uc77c\ubd80 \ubc30\ud3ec \ud328\ud134\uc740 Karpenter \uc624\ud1a0\uc2a4\ucf00\uc77c\ub9c1 \ubc0f \uc815\uc801 \ub178\ub4dc \uadf8\ub8f9\uc5d0 \uc758\uc874\ud569\ub2c8\ub2e4. \ub178\ub4dc\uac00 \ucd08\uae30\ud654\ub418\uc9c0 \uc54a\uc73c\uba74 Karpenter \ub610\ub294 \ub178\ub4dc \uadf8\ub8f9\uc758 \ub85c\uadf8\ub97c \ud655\uc778\ud558\uc5ec \ubb38\uc81c\ub97c \ud574\uacb0\ud558\uc2ed\uc2dc\uc624."})}),"\n",(0,r.jsx)(n.admonition,{type:"danger",children:(0,r.jsxs)(n.p,{children:["\ucc38\uace0: Mistral-7B-Instruct-v0.2\ub294 ",(0,r.jsx)(n.a,{href:"https://huggingface.co/mistralai/Mistral-7B-Instruct-v0.2",children:"Huggingface"})," \ub9ac\ud3ec\uc9c0\ud1a0\ub9ac\uc758 \uc81c\ud55c \ubaa8\ub378\uc785\ub2c8\ub2e4. \uc774 \ubaa8\ub378\uc744 \uc0ac\uc6a9\ud558\ub824\uba74 HuggingFace \ud1a0\ud070\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.\nHuggingFace\uc5d0\uc11c \ud1a0\ud070\uc744 \uc0dd\uc131\ud558\ub824\uba74 HuggingFace \uacc4\uc815\uc73c\ub85c \ub85c\uadf8\uc778\ud558\uace0 ",(0,r.jsx)(n.a,{href:"https://huggingface.co/settings/tokens",children:"\uc124\uc815"})," \ud398\uc774\uc9c0\uc758 ",(0,r.jsx)(n.code,{children:"Access Tokens"})," \uba54\ub274 \ud56d\ubaa9\uc744 \ud074\ub9ad\ud558\uc2ed\uc2dc\uc624."]})}),"\n",(0,r.jsx)(n.h2,{id:"elastic-cache-for-redis\ub97c-\uc0ac\uc6a9\ud55c-ray-head-\ub178\ub4dc-\uace0\uac00\uc6a9\uc131ha",children:"Elastic Cache for Redis\ub97c \uc0ac\uc6a9\ud55c Ray Head \ub178\ub4dc \uace0\uac00\uc6a9\uc131(HA)"}),"\n",(0,r.jsx)(n.p,{children:"Ray \ud074\ub7ec\uc2a4\ud130\uc758 \ud575\uc2ec \uad6c\uc131 \uc694\uc18c\ub294 \uc791\uc5c5 \uc2a4\ucf00\uc904\ub9c1, \uc0c1\ud0dc \ub3d9\uae30\ud654 \ubc0f \ub178\ub4dc \uc870\uc815\uc744 \uad00\ub9ac\ud558\uc5ec \uc804\uccb4 \ud074\ub7ec\uc2a4\ud130\ub97c \uc624\ucf00\uc2a4\ud2b8\ub808\uc774\uc158\ud558\ub294 \ud5e4\ub4dc \ub178\ub4dc\uc785\ub2c8\ub2e4. \uadf8\ub7ec\ub098 \uae30\ubcf8\uc801\uc73c\ub85c Ray head Pod\ub294 \ub2e8\uc77c \uc7a5\uc560 \uc9c0\uc810\uc744 \ub098\ud0c0\ub0c5\ub2c8\ub2e4. \uc2e4\ud328\ud558\uba74 Ray \uc6cc\ucee4 Pod\ub97c \ud3ec\ud568\ud55c \uc804\uccb4 \ud074\ub7ec\uc2a4\ud130\ub97c \ub2e4\uc2dc \uc2dc\uc791\ud574\uc57c \ud569\ub2c8\ub2e4."}),"\n",(0,r.jsx)(n.p,{children:"\uc774\ub97c \ud574\uacb0\ud558\uae30 \uc704\ud574 Ray head \ub178\ub4dc\uc758 \uace0\uac00\uc6a9\uc131(HA)\uc774 \ud544\uc218\uc801\uc785\ub2c8\ub2e4. Global Control Service (GCS)\ub294 RayCluster\uc5d0\uc11c \ud074\ub7ec\uc2a4\ud130 \uc218\uc900 \uba54\ud0c0\ub370\uc774\ud130\ub97c \uad00\ub9ac\ud569\ub2c8\ub2e4. \uae30\ubcf8\uc801\uc73c\ub85c GCS\ub294 \ubaa8\ub4e0 \ub370\uc774\ud130\ub97c \uba54\ubaa8\ub9ac\uc5d0 \uc800\uc7a5\ud558\ubbc0\ub85c \uc7a5\uc560 \ud5c8\uc6a9\uc774 \uc5c6\uc73c\uba70, \uc2e4\ud328 \uc2dc \uc804\uccb4 Ray \ud074\ub7ec\uc2a4\ud130\uac00 \uc2e4\ud328\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uc774\ub97c \ubc29\uc9c0\ud558\ub824\uba74 Ray\uc758 Global Control Store (GCS)\uc5d0 \uc7a5\uc560 \ud5c8\uc6a9\uc744 \ucd94\uac00\ud574\uc57c \ud558\uba70, \uc774\ub97c \ud1b5\ud574 head \ub178\ub4dc\uac00 \ucda9\ub3cc\ud574\ub3c4 Ray Serve \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc774 \ud2b8\ub798\ud53d\uc744 \uc11c\ube59\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. GCS\uac00 \uc7ac\uc2dc\uc791\ub418\uba74 Redis \uc778\uc2a4\ud134\uc2a4\uc5d0\uc11c \ubaa8\ub4e0 \ub370\uc774\ud130\ub97c \uac80\uc0c9\ud558\uace0 \uc815\uc0c1 \uae30\ub2a5\uc744 \uc7ac\uac1c\ud569\ub2c8\ub2e4."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Ray-head-worker-redis",src:s(93619).A+"",width:"1024",height:"576"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Ray-head-ha",src:s(19128).A+"",width:"1024",height:"576"})}),"\n",(0,r.jsxs)(n.p,{children:["\ub2e4\uc74c \uc139\uc158\uc5d0\uc11c\ub294 GCS \uc7a5\uc560 \ud5c8\uc6a9\uc744 \ud65c\uc131\ud654\ud558\uace0 Ray head Pod\uc758 \uace0\uac00\uc6a9\uc131\uc744 \ubcf4\uc7a5\ud558\ub294 \ubc29\ubc95\uc5d0 \ub300\ud55c \ub2e8\uacc4\ub97c \uc81c\uacf5\ud569\ub2c8\ub2e4. ",(0,r.jsx)(n.code,{children:"Mistral-7B-Instruct-v0.2"})," \ubaa8\ub378\uc744 \uc0ac\uc6a9\ud558\uc5ec Ray head \uace0\uac00\uc6a9\uc131\uc744 \uc2dc\uc5f0\ud569\ub2c8\ub2e4."]}),"\n",(0,r.jsx)(n.h3,{id:"\uc678\ubd80-redis-\uc11c\ubc84-\ucd94\uac00",children:"\uc678\ubd80 Redis \uc11c\ubc84 \ucd94\uac00"}),"\n",(0,r.jsx)(n.p,{children:"GCS \uc7a5\uc560 \ud5c8\uc6a9\uc5d0\ub294 \uc678\ubd80 Redis \ub370\uc774\ud130\ubca0\uc774\uc2a4\uac00 \ud544\uc694\ud569\ub2c8\ub2e4. \uc790\uccb4 Redis \ub370\uc774\ud130\ubca0\uc774\uc2a4\ub97c \ud638\uc2a4\ud305\ud558\uac70\ub098 \ud0c0\uc0ac \ubca4\ub354\ub97c \ud1b5\ud574 \uc0ac\uc6a9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),"\n",(0,r.jsxs)(n.p,{children:["\uac1c\ubc1c \ubc0f \ud14c\uc2a4\ud2b8 \ubaa9\uc801\uc73c\ub85c Ray \ud074\ub7ec\uc2a4\ud130\uc640 \ub3d9\uc77c\ud55c EKS \ud074\ub7ec\uc2a4\ud130\uc5d0 \ucee8\ud14c\uc774\ub108\ud654\ub41c Redis \ub370\uc774\ud130\ubca0\uc774\uc2a4\ub97c \ud638\uc2a4\ud305\ud560 \uc218\ub3c4 \uc788\uc2b5\ub2c8\ub2e4. \uadf8\ub7ec\ub098 \ud504\ub85c\ub355\uc158 \uc124\uc815\uc758 \uacbd\uc6b0 \uace0\uac00\uc6a9\uc131 \uc678\ubd80 Redis \ud074\ub7ec\uc2a4\ud130\ub97c \uc0ac\uc6a9\ud558\ub294 \uac83\uc774 \uc88b\uc2b5\ub2c8\ub2e4. \uc774 \ud328\ud134\uc5d0\uc11c\ub294 ",(0,r.jsx)(n.a,{href:"https://aws.amazon.com/elasticache/redis/",children:"Amazon ElasticCache for Redis"}),"\ub97c \uc0ac\uc6a9\ud558\uc5ec \uc678\ubd80 Redis \ud074\ub7ec\uc2a4\ud130\ub97c \uc0dd\uc131\ud588\uc2b5\ub2c8\ub2e4. Redis \ud074\ub7ec\uc2a4\ud130 \uc124\uc815\uc5d0 ",(0,r.jsx)(n.a,{href:"https://aws.amazon.com/memorydb/",children:"Amazon memoryDB"}),"\ub97c \uc0ac\uc6a9\ud560 \uc218\ub3c4 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,r.jsxs)(n.p,{children:["\ud604\uc7ac \ube14\ub8e8\ud504\ub9b0\ud2b8\uc758 \uc77c\ubd80\ub85c AWS\uc5d0\uc11c Elastic Cache Redis \ud074\ub7ec\uc2a4\ud130\ub97c \uc0dd\uc131\ud558\ub294 ",(0,r.jsx)(n.code,{children:"elasticache"}),"\ub77c\ub294 terraform \ubaa8\ub4c8\uc744 \ucd94\uac00\ud588\uc2b5\ub2c8\ub2e4. Redis \ud074\ub7ec\uc2a4\ud130\ub294 \ud074\ub7ec\uc2a4\ud130 \ubaa8\ub4dc\uac00 \ube44\ud65c\uc131\ud654\ub418\uc5b4 \uc788\uc73c\uba70 \ud558\ub098\uc758 \ub178\ub4dc\ub97c \ud3ec\ud568\ud569\ub2c8\ub2e4. \uc774 \ud074\ub7ec\uc2a4\ud130 \ub178\ub4dc\uc758 \uc5d4\ub4dc\ud3ec\uc778\ud2b8\ub294 \uc77d\uae30\uc640 \uc4f0\uae30 \ubaa8\ub450\uc5d0 \uc0ac\uc6a9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,r.jsx)(n.p,{children:"\uc774 \ubaa8\ub4c8\uc5d0\uc11c \uc8fc\ubaa9\ud560 \uc8fc\uc694 \uc0ac\ud56d\uc740 \ub2e4\uc74c\uacfc \uac19\uc2b5\ub2c8\ub2e4:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Redis \ud074\ub7ec\uc2a4\ud130\ub294 EKS \ud074\ub7ec\uc2a4\ud130\uc640 \ub3d9\uc77c\ud55c VPC\uc5d0 \uc788\uc2b5\ub2c8\ub2e4. Redis \ud074\ub7ec\uc2a4\ud130\uac00 \ubcc4\ub3c4\uc758 VPC\uc5d0 \uc0dd\uc131\ub41c \uacbd\uc6b0 \ub124\ud2b8\uc6cc\ud06c \uc5f0\uacb0\uc744 \ud65c\uc131\ud654\ud558\ub824\uba74 EKS \ud074\ub7ec\uc2a4\ud130 VPC\uc640 Elastic Cache Redis \ud074\ub7ec\uc2a4\ud130 VPC \uac04\uc5d0 VPC \ud53c\uc5b4\ub9c1\uc744 \uc124\uc815\ud574\uc57c \ud569\ub2c8\ub2e4."}),"\n",(0,r.jsx)(n.li,{children:"Redis \ud074\ub7ec\uc2a4\ud130 \uc0dd\uc131 \uc2dc \uce90\uc2dc \uc11c\ube0c\ub137 \uadf8\ub8f9\uc744 \uc0dd\uc131\ud574\uc57c \ud569\ub2c8\ub2e4. \uc11c\ube0c\ub137 \uadf8\ub8f9\uc740 VPC\uc758 \uce90\uc2dc\uc5d0 \uc9c0\uc815\ud560 \uc218 \uc788\ub294 \uc11c\ube0c\ub137 \ubaa8\uc74c\uc785\ub2c8\ub2e4. ElastiCache\ub294 \ud574\ub2f9 \uce90\uc2dc \uc11c\ube0c\ub137 \uadf8\ub8f9\uc744 \uc0ac\uc6a9\ud558\uc5ec \ud574\ub2f9 \uc11c\ube0c\ub137 \ub0b4\uc758 \uac01 \uce90\uc2dc \ub178\ub4dc\uc5d0 IP \uc8fc\uc18c\ub97c \ud560\ub2f9\ud569\ub2c8\ub2e4. \ube14\ub8e8\ud504\ub9b0\ud2b8\ub294 Elastic cache Redis \ud074\ub7ec\uc2a4\ud130\uc758 \uc11c\ube0c\ub137 \uadf8\ub8f9\uc5d0 EKS \ud074\ub7ec\uc2a4\ud130\uac00 \uc0ac\uc6a9\ud558\ub294 \ubaa8\ub4e0 \uc11c\ube0c\ub137\uc744 \uc790\ub3d9\uc73c\ub85c \ucd94\uac00\ud569\ub2c8\ub2e4."}),"\n",(0,r.jsx)(n.li,{children:"\ubcf4\uc548 \uadf8\ub8f9 - Redis \uce90\uc2dc\uc5d0 \ud560\ub2f9\ub41c \ubcf4\uc548 \uadf8\ub8f9\uc5d0\ub294 EKS \ud074\ub7ec\uc2a4\ud130\uc758 \uc6cc\ucee4 \ub178\ub4dc \ubcf4\uc548 \uadf8\ub8f9\uc5d0\uc11c \ud3ec\ud2b8 6379\ub97c \ud1b5\ud574 Redis \ud074\ub7ec\uc2a4\ud130 \ubcf4\uc548 \uadf8\ub8f9\uc73c\ub85c\uc758 TCP \ud2b8\ub798\ud53d\uc744 \ud5c8\uc6a9\ud558\ub294 \uc778\ubc14\uc6b4\ub4dc \uaddc\uce59\uc774 \uc788\uc5b4\uc57c \ud569\ub2c8\ub2e4. Ray head Pod\uac00 \ud3ec\ud2b8 6379\ub97c \ud1b5\ud574 Elastic cache Redis \ud074\ub7ec\uc2a4\ud130\uc5d0 \uc5f0\uacb0\uc744 \uc124\uc815\ud574\uc57c \ud558\uae30 \ub54c\ubb38\uc785\ub2c8\ub2e4. \ube14\ub8e8\ud504\ub9b0\ud2b8\ub294 \uc778\ubc14\uc6b4\ub4dc \uaddc\uce59\uc73c\ub85c \ubcf4\uc548 \uadf8\ub8f9\uc744 \uc790\ub3d9\uc73c\ub85c \uc124\uc815\ud569\ub2c8\ub2e4."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Amazon Elastic Cache\ub97c \uc0ac\uc6a9\ud558\uc5ec Redis \ud074\ub7ec\uc2a4\ud130\ub97c \uc0dd\uc131\ud558\ub824\uba74 \uc544\ub798 \ub2e8\uacc4\ub97c \ub530\ub974\uc2ed\uc2dc\uc624."}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsx)(n.p,{children:"\uc774 Mistral7b \ubc30\ud3ec\ub294 \uace0\uac00\uc6a9\uc131\uacfc \ud568\uaed8 Ray Serve\ub97c \uc0ac\uc6a9\ud569\ub2c8\ub2e4. \uc774\uc804 \ub2e8\uacc4\uc5d0\uc11c \uc774\ubbf8 mistral7b\ub97c \ubc30\ud3ec\ud55c \uacbd\uc6b0 \ubc30\ud3ec\ub97c \uc0ad\uc81c\ud558\uace0 \uc544\ub798 \ub2e8\uacc4\ub97c \uc2e4\ud589\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\uc0ac\uc804 \uc694\uad6c \uc0ac\ud56d"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2.html",children:"aws cli"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://Kubernetes.io/docs/tasks/tools/",children:"kubectl"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://learn.hashicorp.com/tutorials/terraform/install-cli",children:"terraform"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://pypi.org/project/envsubst/",children:"envsubst"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://jqlang.github.io/jq/download/",children:"jq"})}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["\uba3c\uc800 \uc544\ub798 \uba85\ub839\uc744 \uc2e4\ud589\ud558\uc5ec ",(0,r.jsx)(n.code,{children:"enable_rayserve_ha_elastic_cache_redis"})," \ubcc0\uc218\ub97c ",(0,r.jsx)(n.code,{children:"true"}),"\ub85c \uc124\uc815\ud558\uc5ec Redis \ud074\ub7ec\uc2a4\ud130 \uc0dd\uc131\uc744 \ud65c\uc131\ud654\ud569\ub2c8\ub2e4. \uae30\ubcf8\uac12\uc740 ",(0,r.jsx)(n.code,{children:"false"}),"\uc785\ub2c8\ub2e4."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"export TF_VAR_enable_rayserve_ha_elastic_cache_redis=true\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\uadf8\ub7f0 \ub2e4\uc74c ",(0,r.jsx)(n.code,{children:"install.sh"})," \uc2a4\ud06c\ub9bd\ud2b8\ub97c \uc2e4\ud589\ud558\uc5ec KubeRay operator \ubc0f \uae30\ud0c0 \uc560\ub4dc\uc628\uc774 \uc788\ub294 EKS \ud074\ub7ec\uc2a4\ud130\ub97c \uc124\uce58\ud569\ub2c8\ub2e4."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd ai-on-eks/infra/trainium-inferentia\n./install.sh\n"})}),"\n",(0,r.jsx)(n.p,{children:"EKS \ud074\ub7ec\uc2a4\ud130 \uc678\uc5d0\ub3c4 \uc774 \ube14\ub8e8\ud504\ub9b0\ud2b8\ub294 AWS Elastic Cache Redis \ud074\ub7ec\uc2a4\ud130\ub97c \uc0dd\uc131\ud569\ub2c8\ub2e4. \uc0d8\ud50c \ucd9c\ub825\uc740 \uc544\ub798\uc640 \uac19\uc2b5\ub2c8\ub2e4"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:'Apply complete! Resources: 8 added, 1 changed, 0 destroyed.\n\nOutputs:\n\nconfigure_kubectl = "aws eks --region us-west-2 update-kubeconfig --name trainium-inferentia"\nelastic_cache_redis_cluster_arn = "arn:aws:elasticache:us-west-2:11111111111:cluster:trainium-inferentia"\n'})}),"\n",(0,r.jsx)(n.h3,{id:"rayservice\uc5d0-\uc678\ubd80-redis-\uc815\ubcf4-\ucd94\uac00",children:"RayService\uc5d0 \uc678\ubd80 Redis \uc815\ubcf4 \ucd94\uac00"}),"\n",(0,r.jsxs)(n.p,{children:["elastic cache Redis \ud074\ub7ec\uc2a4\ud130\uac00 \uc0dd\uc131\ub418\uba74 ",(0,r.jsx)(n.code,{children:"mistral-7b"})," \ubaa8\ub378 \ucd94\ub860\uc744 \uc704\ud55c ",(0,r.jsx)(n.code,{children:"RayService"})," \uad6c\uc131\uc744 \uc218\uc815\ud574\uc57c \ud569\ub2c8\ub2e4."]}),"\n",(0,r.jsx)(n.p,{children:"\uba3c\uc800 AWS CLI\uc640 jq\ub97c \uc0ac\uc6a9\ud558\uc5ec \uc544\ub798\uc640 \uac19\uc774 Elastic Cache Redis \ud074\ub7ec\uc2a4\ud130 \uc5d4\ub4dc\ud3ec\uc778\ud2b8\ub97c \uac00\uc838\uc640\uc57c \ud569\ub2c8\ub2e4."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"export EXT_REDIS_ENDPOINT=$(aws elasticache describe-cache-clusters \\\n    --cache-cluster-id \"trainium-inferentia\" \\\n    --show-cache-node-info | jq -r '.CacheClusters[0].CacheNodes[0].Endpoint.Address')\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\uc774\uc81c ",(0,r.jsx)(n.code,{children:"RayService"})," CRD \uc544\ub798\uc5d0 ",(0,r.jsx)(n.code,{children:'ray.io/ft-enabled: "true"'})," \uc5b4\ub178\ud14c\uc774\uc158\uc744 \ucd94\uac00\ud569\ub2c8\ub2e4. ",(0,r.jsx)(n.code,{children:"ray.io/ft-enabled"})," \uc5b4\ub178\ud14c\uc774\uc158\uc740 ",(0,r.jsx)(n.code,{children:"true"}),"\ub85c \uc124\uc815\ud558\uba74 GCS \uc7a5\uc560 \ud5c8\uc6a9\uc744 \ud65c\uc131\ud654\ud569\ub2c8\ub2e4."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'apiVersion: ray.io/v1\nkind: RayService\nmetadata:\n  name: mistral\n  namespace: mistral\n  annotations:\n    ray.io/ft-enabled: "true"\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"headGroupSpec"}),"\uc5d0 \uc678\ubd80 Redis \ud074\ub7ec\uc2a4\ud130 \uc815\ubcf4\ub97c ",(0,r.jsx)(n.code,{children:"RAY_REDIS_ADDRESS"})," \ud658\uacbd \ubcc0\uc218\ub85c \ucd94\uac00\ud569\ub2c8\ub2e4."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"headGroupSpec:\n  headService:\n    metadata:\n      name: mistral\n      namespace: mistral\n  rayStartParams:\n    dashboard-host: '0.0.0.0'\n    num-cpus: \"0\"\n  template:\n    spec:\n      containers:\n      - name: head\n        ....\n        env:\n          - name: RAY_REDIS_ADDRESS\n            value: $EXT_REDIS_ENDPOINT:6379\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"RAY_REDIS_ADDRESS"}),"\uc758 \uac12\uc740 Redis \ub370\uc774\ud130\ubca0\uc774\uc2a4\uc758 \uc8fc\uc18c\uc5ec\uc57c \ud569\ub2c8\ub2e4. Redis \ud074\ub7ec\uc2a4\ud130 \uc5d4\ub4dc\ud3ec\uc778\ud2b8\uc640 \ud3ec\ud2b8\ub97c \ud3ec\ud568\ud574\uc57c \ud569\ub2c8\ub2e4."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"ai/inference/mistral-7b-rayserve-inf2/ray-service-mistral-ft.yaml"})," \ud30c\uc77c\uc5d0\uc11c GCS \uc7a5\uc560 \ud5c8\uc6a9\uc774 \ud65c\uc131\ud654\ub41c \uc804\uccb4 ",(0,r.jsx)(n.code,{children:"RayService"})," \uad6c\uc131\uc744 \ucc3e\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,r.jsxs)(n.p,{children:["\uc704\uc758 ",(0,r.jsx)(n.code,{children:"RayService"})," \uad6c\uc131\uc73c\ub85c Ray head Pod\uc5d0 \ub300\ud55c GCS \uc7a5\uc560 \ud5c8\uc6a9\uc744 \ud65c\uc131\ud654\ud588\uc73c\uba70, Ray \ud074\ub7ec\uc2a4\ud130\ub294 \ubaa8\ub4e0 Ray \uc6cc\ucee4\ub97c \uc7ac\uc2dc\uc791\ud558\uc9c0 \uc54a\uace0 head Pod \ucda9\ub3cc\uc5d0\uc11c \ubcf5\uad6c\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,r.jsxs)(n.p,{children:["\uc704\uc758 ",(0,r.jsx)(n.code,{children:"RayService"})," \uad6c\uc131\uc744 \uc801\uc6a9\ud558\uace0 \ub3d9\uc791\uc744 \ud655\uc778\ud574 \ubd05\uc2dc\ub2e4."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd ai-on-eks/blueprints/inference/\nenvsubst < mistral-7b-rayserve-inf2/ray-service-mistral-ft.yaml| kubectl apply -f -\n"})}),"\n",(0,r.jsx)(n.p,{children:"\ucd9c\ub825\uc740 \uc544\ub798\uc640 \uac19\uc544\uc57c \ud569\ub2c8\ub2e4"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:"namespace/mistral created\nsecret/hf-token created\nrayservice.ray.io/mistral created\ningress.networking.k8s.io/mistral created\n"})}),"\n",(0,r.jsx)(n.p,{children:"\ud074\ub7ec\uc2a4\ud130\uc758 Ray Pod \uc0c1\ud0dc\ub97c \ud655\uc778\ud569\ub2c8\ub2e4."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"kubectl get po -n mistral\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Ray head \ubc0f \uc6cc\ucee4 Pod\ub294 \uc544\ub798\uc640 \uac19\uc774 ",(0,r.jsx)(n.code,{children:"Running"})," \uc0c1\ud0dc\uc5ec\uc57c \ud569\ub2c8\ub2e4."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:"NAME                                         READY   STATUS    RESTARTS   AGE\nmistral-raycluster-rf6l9-head-hc8ch          2/2     Running   0          31m\nmistral-raycluster-rf6l9-worker-inf2-tdrs6   1/1     Running   0          31m\n"})}),"\n",(0,r.jsx)(n.h3,{id:"ray-head-pod-\ucda9\ub3cc-\uc2dc\ubbac\ub808\uc774\uc158",children:"Ray Head Pod \ucda9\ub3cc \uc2dc\ubbac\ub808\uc774\uc158"}),"\n",(0,r.jsx)(n.p,{children:"Pod\ub97c \uc0ad\uc81c\ud558\uc5ec Ray head Pod \ucda9\ub3cc\uc744 \uc2dc\ubbac\ub808\uc774\uc158\ud569\ub2c8\ub2e4"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'kubectl -n mistral delete po mistral-raycluster-rf6l9-head-xxxxx\npod "mistral-raycluster-rf6l9-head-xxxxx" deleted\n'})}),"\n",(0,r.jsx)(n.p,{children:"Ray head Pod\uac00 \uc885\ub8cc\ub418\uace0 \uc790\ub3d9 \uc7ac\uc2dc\uc791\ub420 \ub54c Ray \uc6cc\ucee4 Pod\uac00 \uacc4\uc18d \uc2e4\ud589\ub418\ub294 \uac83\uc744 \ubcfc \uc218 \uc788\uc2b5\ub2c8\ub2e4. Lens IDE\uc758 \uc544\ub798 \uc2a4\ud06c\ub9b0\uc0f7\uc744 \ucc38\uc870\ud558\uc2ed\uc2dc\uc624."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Head Pod Deletion",src:s(85242).A+"",width:"2478",height:"1150"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Worker Pod Uninterrupted",src:s(37192).A+"",width:"2478",height:"1150"})}),"\n",(0,r.jsx)(n.h4,{id:"mistral-ai-gradio-\uc571-\ud14c\uc2a4\ud2b8",children:"Mistral AI Gradio \uc571 \ud14c\uc2a4\ud2b8"}),"\n",(0,r.jsx)(n.p,{children:"Ray head Pod\uac00 \uc0ad\uc81c\ub41c \ub3d9\uc548 \uc9c8\ubb38\uc5d0 \ub2f5\ud560 \uc218 \uc788\ub294\uc9c0 Gradio UI \uc571\ub3c4 \ud14c\uc2a4\ud2b8\ud574 \ubd05\uc2dc\ub2e4."}),"\n",(0,r.jsx)(n.p,{children:"\ube0c\ub77c\uc6b0\uc800\ub97c localhost:7860\uc73c\ub85c \uc9c0\uc815\ud558\uc5ec Gradio Mistral AI Chat \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \uc5fd\ub2c8\ub2e4."}),"\n",(0,r.jsx)(n.p,{children:"\uc774\uc81c \uc704 \ub2e8\uacc4\uc5d0\uc11c \ubcf4\uc5ec\uc900 \uac83\ucc98\ub7fc Ray head Pod\ub97c \uc0ad\uc81c\ud558\uc5ec Ray head Pod \ucda9\ub3cc \uc2dc\ubbac\ub808\uc774\uc158\uc744 \ubc18\ubcf5\ud569\ub2c8\ub2e4."}),"\n",(0,r.jsx)(n.p,{children:"Ray head Pod\uac00 \uc885\ub8cc\ub418\uace0 \ubcf5\uad6c\ub418\ub294 \ub3d9\uc548 Mistral AI Chat \uc778\ud130\ud398\uc774\uc2a4\uc5d0 \uc9c8\ubb38\uc744 \uc81c\ucd9c\ud569\ub2c8\ub2e4. \uc544\ub798 \uc2a4\ud06c\ub9b0\uc0f7\uc5d0\uc11c Ray head Pod\uac00 \uc0ad\uc81c\ub418\uace0 \ubcf5\uad6c\ub418\ub294 \ub3d9\uc548 \ucc44\ud305 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc774 \uc2e4\uc81c\ub85c \ud2b8\ub798\ud53d\uc744 \uc11c\ube59\ud560 \uc218 \uc788\uc74c\uc744 \uc54c \uc218 \uc788\uc2b5\ub2c8\ub2e4. GCS \uc7a5\uc560 \ud5c8\uc6a9\uc73c\ub85c \uc778\ud574 RayServe \uc11c\ube44\uc2a4\uac00 \uc774 \uacbd\uc6b0 \uc7ac\uc2dc\uc791\ub418\uc9c0 \uc54a\ub294 Ray \uc6cc\ucee4 Pod\ub97c \uac00\ub9ac\ud0a4\uae30 \ub54c\ubb38\uc785\ub2c8\ub2e4."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Gradio App Test HA",src:s(32926).A+"",width:"2774",height:"1092"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Gradio App Test 1",src:s(91510).A+"",width:"1239",height:"575"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Gradio App Test Contd",src:s(77261).A+"",width:"1239",height:"575"})}),"\n",(0,r.jsxs)(n.p,{children:["RayServe \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc5d0 \uc5d4\ub4dc\ud22c\uc5d4\ub4dc \uc7a5\uc560 \ud5c8\uc6a9\uc744 \ud65c\uc131\ud654\ud558\ub294 \uc804\uccb4 \uac00\uc774\ub4dc\ub294 ",(0,r.jsx)(n.a,{href:"https://docs.ray.io/en/latest/serve/production-guide/fault-tolerance.html#add-end-to-end-fault-tolerance",children:"Ray Guide"}),"\ub97c \ucc38\uc870\ud558\uc2ed\uc2dc\uc624."]}),"\n",(0,r.jsx)(n.h2,{id:"\uc815\ub9ac",children:"\uc815\ub9ac"}),"\n",(0,r.jsx)(n.p,{children:"\ub9c8\uc9c0\ub9c9\uc73c\ub85c \ub354 \uc774\uc0c1 \ud544\uc694\ud558\uc9c0 \uc54a\uc740 \ub9ac\uc18c\uc2a4\ub97c \uc815\ub9ac\ud558\uace0 \ud504\ub85c\ube44\uc800\ub2dd \ud574\uc81c\ud558\ub294 \ubc29\ubc95\uc744 \uc548\ub0b4\ud569\ub2c8\ub2e4."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"1\ub2e8\uacc4:"})," Gradio \uc571 \ubc0f mistral \ucd94\ub860 \ubc30\ud3ec \uc0ad\uc81c"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd ai-on-eks/blueprints/inference/mistral-7b-rayserve-inf2\nkubectl delete -f gradio-ui.yaml\nkubectl delete -f ray-service-mistral-ft.yaml\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"2\ub2e8\uacc4:"})," EKS \ud074\ub7ec\uc2a4\ud130 \uc815\ub9ac\n\uc774 \uc2a4\ud06c\ub9bd\ud2b8\ub294 ",(0,r.jsx)(n.code,{children:"-target"})," \uc635\uc158\uc744 \uc0ac\uc6a9\ud558\uc5ec \ubaa8\ub4e0 \ub9ac\uc18c\uc2a4\uac00 \uc62c\ubc14\ub978 \uc21c\uc11c\ub85c \uc0ad\uc81c\ub418\ub3c4\ub85d \ud658\uacbd\uc744 \uc815\ub9ac\ud569\ub2c8\ub2e4."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd ai-on-eks/infra/trainium-inferentia/\n./cleanup.sh\n"})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},42450(e,n,s){s.d(n,{A:()=>x});var a=s(96540),r=s(5556),i=s.n(r),d=s(34164);const c="collapsibleContent_q3kw",l="header_QCEw",t="icon_PckA",o="content_qLC1",h="expanded_iGsi";var p=s(74848);function u({children:e,header:n}){const[s,r]=(0,a.useState)(!1);return(0,p.jsxs)("div",{className:c,children:[(0,p.jsxs)("div",{className:(0,d.A)(l,{[h]:s}),onClick:()=>{r(!s)},children:[n,(0,p.jsx)("span",{className:(0,d.A)(t,{[h]:s}),children:s?"\ud83d\udc47":"\ud83d\udc48"})]}),s&&(0,p.jsx)("div",{className:o,children:e})]})}u.propTypes={children:i().node.isRequired,header:i().node.isRequired};const x=u},77261(e,n,s){s.d(n,{A:()=>a});const a=s.p+"assets/images/answer-1-contd-b71287c36f7260ebeb1d443182897fbf.png"},91510(e,n,s){s.d(n,{A:()=>a});const a=s.p+"assets/images/answer-1-2af058a004a133f49f75bd6f6222fb33.png"},32926(e,n,s){s.d(n,{A:()=>a});const a=s.p+"assets/images/gradio-test-ft-88de30e8e8c943602f929d8537f8de62.png"},85242(e,n,s){s.d(n,{A:()=>a});const a=s.p+"assets/images/head-pod-deleted-396351f6561e39dd035baa07b62687a5.png"},93619(e,n,s){s.d(n,{A:()=>a});const a=s.p+"assets/images/ray-head-ha-1-f3550b77b8a0495910286cb48193a352.png"},19128(e,n,s){s.d(n,{A:()=>a});const a=s.p+"assets/images/ray-head-ha-2-2fb1a8c21b6b7456c8797e47f626aa7a.png"},37192(e,n,s){s.d(n,{A:()=>a});const a=s.p+"assets/images/worker-pod-running-89d7529dc8edef9956c1847bf0f0488d.png"},28453(e,n,s){s.d(n,{R:()=>d,x:()=>c});var a=s(96540);const r={},i=a.createContext(r);function d(e){const n=a.useContext(i);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),a.createElement(i.Provider,{value:n},e.children)}}}]);