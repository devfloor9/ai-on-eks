"use strict";(globalThis.webpackChunkdoeks_website=globalThis.webpackChunkdoeks_website||[]).push([[2795],{66969(e,n,t){t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>m,frontMatter:()=>r,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"guidance/benchmarking/test-scenarios/automatic-saturation-detection","title":"\uc2dc\ub098\ub9ac\uc624 3: \uc790\ub3d9 \ud3ec\ud654 \uac10\uc9c0","description":"\uc774 \uc2dc\ub098\ub9ac\uc624\ub97c \uc0ac\uc6a9\ud574\uc57c \ud558\ub294 \uacbd\uc6b0:","source":"@site/i18n/ko/docusaurus-plugin-content-docs/current/guidance/benchmarking/4-test-scenarios/3-automatic-saturation-detection.md","sourceDirName":"guidance/benchmarking/4-test-scenarios","slug":"/guidance/benchmarking/test-scenarios/automatic-saturation-detection","permalink":"/ai-on-eks/ko/docs/guidance/benchmarking/test-scenarios/automatic-saturation-detection","draft":false,"unlisted":false,"editUrl":"https://github.com/awslabs/ai-on-eks/blob/main/website/docs/guidance/benchmarking/4-test-scenarios/3-automatic-saturation-detection.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_label":"\uc2dc\ub098\ub9ac\uc624 3 - \uc790\ub3d9 \ud3ec\ud654 \uac10\uc9c0"},"sidebar":"guidance","previous":{"title":"\uc2dc\ub098\ub9ac\uc624 2 - \ud3ec\ud654 \ud14c\uc2a4\ud2b8","permalink":"/ai-on-eks/ko/docs/guidance/benchmarking/test-scenarios/saturation-testing"},"next":{"title":"\uc2dc\ub098\ub9ac\uc624 4 - \ud504\ub85c\ub355\uc158 \uc2dc\ubbac\ub808\uc774\uc158","permalink":"/ai-on-eks/ko/docs/guidance/benchmarking/test-scenarios/production-simulation"}}');var i=t(74848),a=t(28453);const r={sidebar_label:"\uc2dc\ub098\ub9ac\uc624 3 - \uc790\ub3d9 \ud3ec\ud654 \uac10\uc9c0"},o="\uc2dc\ub098\ub9ac\uc624 3: \uc790\ub3d9 \ud3ec\ud654 \uac10\uc9c0",c={},l=[{value:"\uc774 \uc2dc\ub098\ub9ac\uc624\ub97c \uc0ac\uc6a9\ud574\uc57c \ud558\ub294 \uacbd\uc6b0:",id:"\uc774-\uc2dc\ub098\ub9ac\uc624\ub97c-\uc0ac\uc6a9\ud574\uc57c-\ud558\ub294-\uacbd\uc6b0",level:2},{value:"\ubc30\ud3ec",id:"\ubc30\ud3ec",level:2},{value:"Helm \ucc28\ud2b8 \uc0ac\uc6a9 (\uad8c\uc7a5)",id:"helm-\ucc28\ud2b8-\uc0ac\uc6a9-\uad8c\uc7a5",level:3},{value:"Sweep \ub9e4\uac1c\ubcc0\uc218 \uc0ac\uc6a9\uc790 \uc815\uc758",id:"sweep-\ub9e4\uac1c\ubcc0\uc218-\uc0ac\uc6a9\uc790-\uc815\uc758",level:3},{value:"\uc8fc\uc694 \uad6c\uc131:",id:"\uc8fc\uc694-\uad6c\uc131",level:2},{value:"\uacb0\uacfc \uc774\ud574:",id:"\uacb0\uacfc-\uc774\ud574",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components},{Details:t}=n;return t||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"\uc2dc\ub098\ub9ac\uc624-3-\uc790\ub3d9-\ud3ec\ud654-\uac10\uc9c0",children:"\uc2dc\ub098\ub9ac\uc624 3: \uc790\ub3d9 \ud3ec\ud654 \uac10\uc9c0"})}),"\n",(0,i.jsx)(n.h2,{id:"\uc774-\uc2dc\ub098\ub9ac\uc624\ub97c-\uc0ac\uc6a9\ud574\uc57c-\ud558\ub294-\uacbd\uc6b0",children:"\uc774 \uc2dc\ub098\ub9ac\uc624\ub97c \uc0ac\uc6a9\ud574\uc57c \ud558\ub294 \uacbd\uc6b0:"}),"\n",(0,i.jsx)(n.p,{children:"\uc801\uc808\ud55c QPS \ud14c\uc2a4\ud2b8 \ub2e8\uacc4\ub97c \uc218\ub3d9\uc73c\ub85c \ucd94\uce21\ud558\uace0 \uc2f6\uc9c0 \uc54a\uc744 \ub54c \uc790\ub3d9\ud654\ub41c \uc6a9\ub7c9 \uac80\uc0c9\uc744 \uc704\ud574 sweep \ubaa8\ub4dc\ub97c \uc0ac\uc6a9\ud558\uc2ed\uc2dc\uc624. \ucd08\uae30 \ubc30\ud3ec, CI/CD \ud30c\uc774\ud504\ub77c\uc778 \ub610\ub294 \uc778\ud504\ub77c \ubcc0\uacbd \ud6c4 \ube60\ub978 \uc6a9\ub7c9 \uc7ac\uac80\uc99d\uc5d0 \uc774\uc0c1\uc801\uc785\ub2c8\ub2e4. \ub3c4\uad6c\uac00 \uc2dc\uc2a4\ud15c\uc744 \ud50c\ub7ec\ub529\ud558\uc5ec \ud3ec\ud654\ub97c \uacbd\ud5d8\uc801\uc73c\ub85c \uacb0\uc815\ud55c \ub2e4\uc74c \ud574\ub2f9 \uc911\uc694 \uc9c0\uc810 \uc8fc\ubcc0\uc5d0 \ud074\ub7ec\uc2a4\ud130\ub41c \uc9c0\ub2a5\ud615 \ud14c\uc2a4\ud2b8 \ub2e8\uacc4\ub97c \uc790\ub3d9\uc73c\ub85c \uc0dd\uc131\ud569\ub2c8\ub2e4. \uc774\uac83\uc740 \ud14c\uc2a4\ud2b8 \uc124\uacc4\uc5d0\uc11c \uc778\uac04 \ud3b8\ud5a5\uc744 \uc81c\uac70\ud558\uace0 \ub2e4\uc591\ud55c \ud658\uacbd\uacfc \ud300\uc5d0 \uac78\uccd0 \uc77c\uad00\ub418\uace0 \uc7ac\ud604 \uac00\ub2a5\ud55c \ubc29\ubc95\ub860\uc744 \ubcf4\uc7a5\ud558\uc9c0\ub9cc, \uacfc\ud559\uc801 \uc790\ub3d9\ud654\ub97c \uc704\ud574 \uc138\ubc00\ud55c \uc81c\uc5b4\ub97c \uad50\ud658\ud569\ub2c8\ub2e4."}),"\n",(0,i.jsxs)(n.p,{children:['\ud2b9\uc815 \ubd80\ud558 \ubaa9\ud45c\ub97c \uac80\uc99d\ud574\uc57c \ud558\uac70\ub098(\uc608: "20 QPS\ub97c \ucc98\ub9ac\ud560 \uc218 \uc788\ub294\uac00?") \ud504\ub85c\ub355\uc158 \ud658\uacbd\uc744 \uc704\ud55c \uc608\uce21 \uac00\ub2a5\ud55c \ud14c\uc2a4\ud2b8 \ub2e8\uacc4\ub97c \uc6d0\ud560 \ub54c ',(0,i.jsx)(n.strong,{children:"\uc2dc\ub098\ub9ac\uc624 2\ub97c \uc120\ud0dd"}),"\ud558\uc2ed\uc2dc\uc624."]}),"\n",(0,i.jsxs)(n.p,{children:["\uc54c \uc218 \uc5c6\ub294 \uc6a9\ub7c9 \ud55c\uacc4\ub97c \ubc1c\uacac\ud558\uac70\ub098 \ud2b9\uc815 QPS \uac12\uc744 \ud14c\uc2a4\ud2b8\ud558\ub294 \uac83\ubcf4\ub2e4 \uc77c\uad00\ub41c \uc790\ub3d9\ud654 \ubc29\ubc95\ub860\uc774 \ub354 \uc911\uc694\ud560 \ub54c ",(0,i.jsx)(n.strong,{children:"\uc2dc\ub098\ub9ac\uc624 3\uc744 \uc120\ud0dd"}),"\ud558\uc2ed\uc2dc\uc624."]}),"\n",(0,i.jsx)(n.h2,{id:"\ubc30\ud3ec",children:"\ubc30\ud3ec"}),"\n",(0,i.jsx)(n.h3,{id:"helm-\ucc28\ud2b8-\uc0ac\uc6a9-\uad8c\uc7a5",children:"Helm \ucc28\ud2b8 \uc0ac\uc6a9 (\uad8c\uc7a5)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# AI on EKS Helm \uc800\uc7a5\uc18c \ucd94\uac00\nhelm repo add ai-on-eks https://awslabs.github.io/ai-on-eks-charts/\nhelm repo update\n\n# sweep \uc2dc\ub098\ub9ac\uc624 \uc124\uce58\nhelm install sweep-test ai-on-eks/benchmark-charts \\\n  --set benchmark.scenario=sweep \\\n  --set benchmark.target.baseUrl=http://qwen3-vllm.default:8000 \\\n  --set benchmark.target.modelName=qwen3-8b \\\n  --set benchmark.target.tokenizerPath=Qwen/Qwen3-8B \\\n  --namespace benchmarking --create-namespace\n\n# \uc9c4\ud589 \uc0c1\ud669 \ubaa8\ub2c8\ud130\ub9c1 - \ub85c\uadf8\uc5d0\uc11c \uc790\ub3d9 \ub2e8\uacc4 \uc0dd\uc131 \ud655\uc778\nkubectl logs -n benchmarking -l benchmark.scenario=sweep -f\n"})}),"\n",(0,i.jsx)(n.h3,{id:"sweep-\ub9e4\uac1c\ubcc0\uc218-\uc0ac\uc6a9\uc790-\uc815\uc758",children:"Sweep \ub9e4\uac1c\ubcc0\uc218 \uc0ac\uc6a9\uc790 \uc815\uc758"}),"\n",(0,i.jsx)(n.p,{children:"\ud3ec\ud654 \ud504\ub85c\ube0c \uc124\uc815 \uc870\uc815:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"# custom-sweep.yaml\nbenchmark:\n  scenario: sweep\n  target:\n    baseUrl: http://your-model.your-namespace:8000\n  scenarios:\n    sweep:\n      load:\n        sweep:\n          numRequests: 3000        # \ub354 \ud070 \uc2dc\uc2a4\ud15c\uc744 \uc704\ud55c \ub354 \ub9ce\uc740 \uc694\uccad\n          timeout: 90              # \ub354 \uae34 \ud504\ub85c\ube0c \uc2dc\uac04\n          numStages: 7             # \ub354 \ub9ce\uc740 \ud14c\uc2a4\ud2b8 \ub2e8\uacc4\n          stageDuration: 240       # \ub354 \uae34 \ub2e8\uacc4 \uae30\uac04\n          saturationPercentile: 99 # \ub354 \ubcf4\uc218\uc801\uc778 \ucd94\uc815\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"helm install sweep-test ai-on-eks/benchmark-charts -f custom-sweep.yaml -n benchmarking\n"})}),"\n",(0,i.jsx)(n.h2,{id:"\uc8fc\uc694-\uad6c\uc131",children:"\uc8fc\uc694 \uad6c\uc131:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\uac00\ubcc0 \ud569\uc131 \ub370\uc774\ud130 \ubd84\ud3ec"}),"\n",(0,i.jsx)(n.li,{children:"Sweep \ubaa8\ub4dc (\uc790\ub3d9): \ud3ec\ud654 \uc9c0\uc810\uc744 \ubc1c\uacac\ud558\uae30 \uc704\ud574 60\ucd08 \ub3d9\uc548 \uad6c\uc131 \uac00\ub2a5\ud55c \uc694\uccad \uc218(\uae30\ubcf8\uac12: 2000)\ub85c \uc2dc\uc2a4\ud15c\uc744 \ud50c\ub7ec\ub529"}),"\n",(0,i.jsx)(n.li,{children:"\ud3ec\ud654 \uc8fc\ubcc0\uc758 \uae30\ud558\ud559\uc801 \ud074\ub7ec\uc2a4\ud130\ub9c1\uc744 \uc0ac\uc6a9\ud55c \uc790\ub3d9 \uc0dd\uc131 \ud14c\uc2a4\ud2b8 \ub2e8\uacc4"}),"\n",(0,i.jsx)(n.li,{children:"\uc2a4\ud2b8\ub9ac\ubc0d \ud65c\uc131\ud654"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"\uacb0\uacfc-\uc774\ud574",children:"\uacb0\uacfc \uc774\ud574:"}),"\n",(0,i.jsxs)(n.p,{children:["\ub3c4\uad6c\uc758 \uc804\ucc98\ub9ac \ub2e8\uacc4\ub294 60\ucd08 \ub3d9\uc548 2000\uac1c\uc758 \uc694\uccad\uc73c\ub85c \uc2dc\uc2a4\ud15c\uc744 \ud50c\ub7ec\ub529\ud558\uace0 \ucc98\ub9ac \uc18d\ub3c4\ub97c \uce21\uc815\ud558\uc5ec \ud3ec\ud654\ub97c \uc2dd\ubcc4\ud569\ub2c8\ub2e4; ",(0,i.jsx)(n.code,{children:"saturation_percentile: 95"}),"\ub294 \ubcf4\uc218\uc801\uc778 \ucd94\uc815\uc744 \uc704\ud574 \uad00\ucc30\ub41c \uc18d\ub3c4\uc758 95\ubc88\uc9f8 \ubc31\ubd84\uc704\uc218\ub97c \uc0ac\uc6a9\ud55c\ub2e4\ub294 \uc758\ubbf8\uc785\ub2c8\ub2e4. \ub85c\uadf8\uc5d0\uc11c \uc790\ub3d9\uc73c\ub85c \uc0dd\uc131\ub41c \ub2e8\uacc4\ub97c \uac80\ud1a0\ud558\uace0(\uae30\ud558\ud559\uc801 \ud074\ub7ec\uc2a4\ud130\ub9c1\uc740 \ud3ec\ud654 \uadfc\ucc98\uc5d0\uc11c 4, 8, 14, 17, 18 QPS\uc640 \uac19\uc774 \ub354 \ucd18\ucd18\ud55c \uac04\uaca9\uc744 \uc0dd\uc131) \uac10\uc9c0\ub41c \ud3ec\ud654 \uc9c0\uc810\uc744 \uc218\ub3d9 \ud14c\uc2a4\ud2b8 \uae30\ub300\uce58\uc640 \ube44\uad50\ud558\uc2ed\uc2dc\uc624. \uc0c1\ub2f9\ud55c \ubd88\uc77c\uce58\ub294 \ub193\ucce4\uc744 \uc218 \uc788\ub294 \ub300\uae30\uc5f4 \ubcd1\ubaa9 \ub610\ub294 \ub9ac\uc18c\uc2a4 \uc81c\uc57d\uc744 \ub4dc\ub7ec\ub0b4\uba70, \uae30\ud558\ud559\uc801 \ubd84\ud3ec\ub294 \uc131\ub2a5\uc774 \uc548\uc815\uc5d0\uc11c \uc800\ud558\ub85c \uc804\ud658\ub418\ub294 \uc815\ud655\ud55c \uc9c0\uc810\uc5d0\uc11c \ud48d\ubd80\ud55c \ub370\uc774\ud130\ub97c \uc81c\uacf5\ud569\ub2c8\ub2e4."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\ud3ec\ud654 \ud504\ub85c\ube0c \uad6c\uc131"}),": sweep \uad6c\uc131\uc758 ",(0,i.jsx)(n.code,{children:"numRequests"})," \ub9e4\uac1c\ubcc0\uc218\ub294 \ucd08\uae30 \ud3ec\ud654 \ubc1c\uacac \ub2e8\uacc4 \ub3d9\uc548 \uc804\uc1a1\ub418\ub294 \uc694\uccad \uc218\ub97c \uc81c\uc5b4\ud569\ub2c8\ub2e4. \uae30\ubcf8\uac12 2000\uc740 \ub300\ubd80\ubd84\uc758 \ubc30\ud3ec\uc5d0 \uc801\ud569\ud558\uc9c0\ub9cc \uc608\uc0c1 \uc6a9\ub7c9\uc5d0 \ub530\ub77c \uc870\uc815\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,i.jsxs)(t,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("strong",{children:"\ub300\uc548: \uc6d0\uc2dc Kubernetes YAML"})}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'---\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: inference-perf-sweep\n  namespace: benchmarking\ndata:\n  config.yml: |\n    api:\n      type: completion\n      streaming: true\n\n    data:\n      type: synthetic\n      input_distribution:\n        mean: 512\n        std_dev: 128\n        min: 128\n        max: 2048\n      output_distribution:\n        mean: 256\n        std_dev: 64\n        min: 32\n        max: 512\n\n    load:\n      type: constant\n      stages: []  # sweep\uc5d0 \uc758\ud574 \uc790\ub3d9 \uc0dd\uc131\n      sweep:\n        type: geometric\n        num_requests: 2000\n        timeout: 60\n        num_stages: 5\n        stage_duration: 180\n        saturation_percentile: 95\n      num_workers: 8\n\n    server:\n      type: vllm\n      model_name: qwen3-8b\n      base_url: http://qwen3-vllm.default:8000\n      ignore_eos: true\n\n    tokenizer:\n      pretrained_model_name_or_path: Qwen/Qwen3-8B\n\n    storage:\n      simple_storage_service:\n        bucket_name: "inference-perf-results"\n        path: "sweep-test/results"\n---\napiVersion: batch/v1\nkind: Job\nmetadata:\n  name: inference-perf-sweep\n  namespace: benchmarking\nspec:\n  backoffLimit: 2\n  ttlSecondsAfterFinished: 3600\n  template:\n    spec:\n      restartPolicy: Never\n      serviceAccountName: inference-perf-sa\n\n      affinity:\n        podAffinity:\n          requiredDuringSchedulingIgnoredDuringExecution:\n          - labelSelector:\n              matchLabels:\n                app.kubernetes.io/component: qwen3-vllm\n            topologyKey: topology.kubernetes.io/zone\n\n      containers:\n      - name: inference-perf\n        image: quay.io/inference-perf/inference-perf:v0.2.0\n        command: ["/bin/sh", "-c"]\n        args:\n        - |\n          inference-perf --config_file /workspace/config.yml\n        volumeMounts:\n        - name: config\n          mountPath: /workspace/config.yml\n          subPath: config.yml\n        resources:\n          requests:\n            cpu: "2"\n            memory: "4Gi"\n          limits:\n            cpu: "4"\n            memory: "8Gi"\n\n      volumes:\n      - name: config\n        configMap:\n          name: inference-perf-sweep\n'})})]})]})}function m(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},28453(e,n,t){t.d(n,{R:()=>r,x:()=>o});var s=t(96540);const i={},a=s.createContext(i);function r(e){const n=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);