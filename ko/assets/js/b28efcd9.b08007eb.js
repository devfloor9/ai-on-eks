"use strict";(globalThis.webpackChunkdoeks_website=globalThis.webpackChunkdoeks_website||[]).push([[2478],{82115(n,e,a){a.r(e),a.d(e,{assets:()=>d,contentTitle:()=>c,default:()=>u,frontMatter:()=>t,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"blueprints/training/Neuron/RayTrain-Llama2","title":"RayTrain-Llama2","description":"EKS\uc5d0\uc11c ML \ubaa8\ub378\uc744 \ubc30\ud3ec\ud558\ub824\uba74 GPU \ub610\ub294 Neuron \uc778\uc2a4\ud134\uc2a4\uc5d0 \ub300\ud55c \uc811\uadfc \uad8c\ud55c\uc774 \ud544\uc694\ud569\ub2c8\ub2e4. \ubc30\ud3ec\uac00 \uc791\ub3d9\ud558\uc9c0 \uc54a\ub294 \uacbd\uc6b0 \uc774\ub7ec\ud55c \ub9ac\uc18c\uc2a4\uc5d0 \ub300\ud55c \uc811\uadfc \uad8c\ud55c\uc774 \uc5c6\uae30 \ub54c\ubb38\uc778 \uacbd\uc6b0\uac00 \ub9ce\uc2b5\ub2c8\ub2e4. \ub610\ud55c \uc77c\ubd80 \ubc30\ud3ec \ud328\ud134\uc740 Karpenter \uc790\ub3d9 \uc2a4\ucf00\uc77c\ub9c1\uacfc \uc815\uc801 \ub178\ub4dc \uadf8\ub8f9\uc5d0 \uc758\uc874\ud569\ub2c8\ub2e4. \ub178\ub4dc\uac00 \ucd08\uae30\ud654\ub418\uc9c0 \uc54a\uc73c\uba74 Karpenter \ub610\ub294 \ub178\ub4dc \uadf8\ub8f9\uc758 \ub85c\uadf8\ub97c \ud655\uc778\ud558\uc5ec \ubb38\uc81c\ub97c \ud574\uacb0\ud558\uc138\uc694.","source":"@site/i18n/ko/docusaurus-plugin-content-docs/current/blueprints/training/Neuron/RayTrain-Llama2.md","sourceDirName":"blueprints/training/Neuron","slug":"/blueprints/training/Neuron/RayTrain-Llama2","permalink":"/ai-on-eks/ko/docs/blueprints/training/Neuron/RayTrain-Llama2","draft":false,"unlisted":false,"editUrl":"https://github.com/awslabs/ai-on-eks/blob/main/website/docs/blueprints/training/Neuron/RayTrain-Llama2.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"sidebar_label":"RayTrain\uc744 \ud65c\uc6a9\ud55c Trn1\uc5d0\uc11c\uc758 Llama-2"},"sidebar":"blueprints","previous":{"title":"EKS\uc5d0\uc11c\uc758 Slurm","permalink":"/ai-on-eks/ko/docs/blueprints/training/GPUs/slinky-slurm"},"next":{"title":"Trn1\uc5d0\uc11c Nemo-Megatron\uc744 \ud65c\uc6a9\ud55c Llama-2","permalink":"/ai-on-eks/ko/docs/blueprints/training/Neuron/Llama2"}}');var s=a(74848),i=a(28453),l=a(42450);const t={sidebar_position:1,sidebar_label:"RayTrain\uc744 \ud65c\uc6a9\ud55c Trn1\uc5d0\uc11c\uc758 Llama-2"},c="RayTrain\uacfc KubeRay\ub97c \ud65c\uc6a9\ud55c Trn1\uc5d0\uc11c\uc758 Llama2 \ubd84\uc0b0 \uc0ac\uc804 \ud6c8\ub828",d={},o=[{value:"Llama-2\ub780?",id:"llama-2\ub780",level:3},{value:"\ubd84\uc0b0 \ud6c8\ub828\uc744 \uc704\ud55c RayTrain\uacfc KubeRay\uc758 \uc7a5\uc810",id:"\ubd84\uc0b0-\ud6c8\ub828\uc744-\uc704\ud55c-raytrain\uacfc-kuberay\uc758-\uc7a5\uc810",level:3},{value:"RayTrain:",id:"raytrain",level:4},{value:"KubeRay:",id:"kuberay",level:4},{value:"AWS Trainium:",id:"aws-trainium",level:4},{value:"\uc774 \uc870\ud569\uc774 \uac15\ub825\ud55c \uc774\uc720",id:"\uc774-\uc870\ud569\uc774-\uac15\ub825\ud55c-\uc774\uc720",level:3},{value:"Volcano\ub780?",id:"volcano\ub780",level:3},{value:"Volcano\uc758 Gang \uc2a4\ucf00\uc904\ub9c1 \uc791\ub3d9 \ubc29\uc2dd",id:"volcano\uc758-gang-\uc2a4\ucf00\uc904\ub9c1-\uc791\ub3d9-\ubc29\uc2dd",level:3},{value:"1. \uc194\ub8e8\uc158 \ubc30\ud3ec",id:"1-\uc194\ub8e8\uc158-\ubc30\ud3ec",level:2},{value:"\ub9ac\uc18c\uc2a4 \ud655\uc778",id:"\ub9ac\uc18c\uc2a4-\ud655\uc778",level:3},{value:"2. Docker \uc774\ubbf8\uc9c0 \ube4c\ub4dc (\uc120\ud0dd \ub2e8\uacc4)",id:"2-docker-\uc774\ubbf8\uc9c0-\ube4c\ub4dc-\uc120\ud0dd-\ub2e8\uacc4",level:2},{value:"3. KubeRay Operator\ub85c Ray \ud074\ub7ec\uc2a4\ud130 \uc2dc\uc791",id:"3-kuberay-operator\ub85c-ray-\ud074\ub7ec\uc2a4\ud130-\uc2dc\uc791",level:2},{value:"Volcano\ub97c \uc0ac\uc6a9\ud55c Ray \ud5e4\ub4dc \ubc0f \uc6cc\ucee4 \ud30c\ub4dc\uc758 Gang \uc2a4\ucf00\uc904\ub9c1",id:"volcano\ub97c-\uc0ac\uc6a9\ud55c-ray-\ud5e4\ub4dc-\ubc0f-\uc6cc\ucee4-\ud30c\ub4dc\uc758-gang-\uc2a4\ucf00\uc904\ub9c1",level:3},{value:"Ray \ub300\uc2dc\ubcf4\ub4dc \uc811\uadfc (\ud3ec\ud2b8 \ud3ec\uc6cc\ub529):",id:"ray-\ub300\uc2dc\ubcf4\ub4dc-\uc811\uadfc-\ud3ec\ud2b8-\ud3ec\uc6cc\ub529",level:3},{value:"4. FSx \uacf5\uc720 \ud30c\uc77c \uc2dc\uc2a4\ud15c\uc5d0\uc11c \uc0ac\uc804 \ud6c8\ub828 \ub370\uc774\ud130 \uc0dd\uc131",id:"4-fsx-\uacf5\uc720-\ud30c\uc77c-\uc2dc\uc2a4\ud15c\uc5d0\uc11c-\uc0ac\uc804-\ud6c8\ub828-\ub370\uc774\ud130-\uc0dd\uc131",level:2},{value:"\uc791\uc5c5 \ubaa8\ub2c8\ud130\ub9c1:",id:"\uc791\uc5c5-\ubaa8\ub2c8\ud130\ub9c1",level:3},{value:"5. \uc0ac\uc804 \ucef4\ud30c\uc77c \uc791\uc5c5 \uc2e4\ud589 (\ucd5c\uc801\ud654 \ub2e8\uacc4)",id:"5-\uc0ac\uc804-\ucef4\ud30c\uc77c-\uc791\uc5c5-\uc2e4\ud589-\ucd5c\uc801\ud654-\ub2e8\uacc4",level:2},{value:"6. \ubd84\uc0b0 \uc0ac\uc804 \ud6c8\ub828 \uc791\uc5c5 \uc2e4\ud589",id:"6-\ubd84\uc0b0-\uc0ac\uc804-\ud6c8\ub828-\uc791\uc5c5-\uc2e4\ud589",level:2},{value:"\uc815\ub9ac",id:"\uc815\ub9ac",level:3}];function h(n){const e={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",p:"p",pre:"pre",span:"span",strong:"strong",ul:"ul",...(0,i.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.admonition,{type:"warning",children:(0,s.jsx)(e.p,{children:"EKS\uc5d0\uc11c ML \ubaa8\ub378\uc744 \ubc30\ud3ec\ud558\ub824\uba74 GPU \ub610\ub294 Neuron \uc778\uc2a4\ud134\uc2a4\uc5d0 \ub300\ud55c \uc811\uadfc \uad8c\ud55c\uc774 \ud544\uc694\ud569\ub2c8\ub2e4. \ubc30\ud3ec\uac00 \uc791\ub3d9\ud558\uc9c0 \uc54a\ub294 \uacbd\uc6b0 \uc774\ub7ec\ud55c \ub9ac\uc18c\uc2a4\uc5d0 \ub300\ud55c \uc811\uadfc \uad8c\ud55c\uc774 \uc5c6\uae30 \ub54c\ubb38\uc778 \uacbd\uc6b0\uac00 \ub9ce\uc2b5\ub2c8\ub2e4. \ub610\ud55c \uc77c\ubd80 \ubc30\ud3ec \ud328\ud134\uc740 Karpenter \uc790\ub3d9 \uc2a4\ucf00\uc77c\ub9c1\uacfc \uc815\uc801 \ub178\ub4dc \uadf8\ub8f9\uc5d0 \uc758\uc874\ud569\ub2c8\ub2e4. \ub178\ub4dc\uac00 \ucd08\uae30\ud654\ub418\uc9c0 \uc54a\uc73c\uba74 Karpenter \ub610\ub294 \ub178\ub4dc \uadf8\ub8f9\uc758 \ub85c\uadf8\ub97c \ud655\uc778\ud558\uc5ec \ubb38\uc81c\ub97c \ud574\uacb0\ud558\uc138\uc694."})}),"\n",(0,s.jsx)(e.admonition,{type:"danger",children:(0,s.jsxs)(e.p,{children:["\ucc38\uace0: \uc774 Llama-2 \ubaa8\ub378\uc758 \uc0ac\uc6a9\uc740 Meta \ub77c\uc774\uc120\uc2a4\uc758 \uc801\uc6a9\uc744 \ubc1b\uc2b5\ub2c8\ub2e4.\n\ubaa8\ub378 \uac00\uc911\uce58\uc640 \ud1a0\ud06c\ub098\uc774\uc800\ub97c \ub2e4\uc6b4\ub85c\ub4dc\ud558\ub824\uba74 ",(0,s.jsx)(e.a,{href:"https://ai.meta.com/",children:"\uc6f9\uc0ac\uc774\ud2b8"}),"\ub97c \ubc29\ubb38\ud558\uc5ec \uc811\uadfc \uad8c\ud55c\uc744 \uc694\uccad\ud558\uae30 \uc804\uc5d0 \ub77c\uc774\uc120\uc2a4\uc5d0 \ub3d9\uc758\ud574\uc57c \ud569\ub2c8\ub2e4."]})}),"\n",(0,s.jsx)(e.admonition,{type:"info",children:(0,s.jsx)(e.p,{children:"\uc774 \ube14\ub8e8\ud504\ub9b0\ud2b8\ub294 \uad00\uce21\uc131, \ub85c\uae45 \ubc0f \ud655\uc7a5\uc131 \uce21\uba74\uc758 \uac1c\uc120 \uc0ac\ud56d\uc744 \ud1b5\ud569\ud558\uae30 \uc704\ud574 \uc801\uadf9\uc801\uc73c\ub85c \uac1c\uc120 \uc911\uc785\ub2c8\ub2e4."})}),"\n",(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"raytrain\uacfc-kuberay\ub97c-\ud65c\uc6a9\ud55c-trn1\uc5d0\uc11c\uc758-llama2-\ubd84\uc0b0-\uc0ac\uc804-\ud6c8\ub828",children:"RayTrain\uacfc KubeRay\ub97c \ud65c\uc6a9\ud55c Trn1\uc5d0\uc11c\uc758 Llama2 \ubd84\uc0b0 \uc0ac\uc804 \ud6c8\ub828"})}),"\n",(0,s.jsxs)(e.p,{children:["\uc774 \uc885\ud569 \uac00\uc774\ub4dc\ub294 Amazon EKS\uc758 KubeRay \ud074\ub7ec\uc2a4\ud130 \ub0b4\uc5d0\uc11c AWS Trainium (Trn1) \uc778\uc2a4\ud134\uc2a4\uc640 AWS Neuron SDK\ub97c \uc0ac\uc6a9\ud558\uc5ec ",(0,s.jsx)(e.code,{children:"Llama2-7B"})," \uc5b8\uc5b4 \ubaa8\ub378\uc744 \uc0ac\uc804 \ud6c8\ub828\ud558\ub294 \uacfc\uc815\uc744 \uc548\ub0b4\ud569\ub2c8\ub2e4. \uc774\uac83\uc740 KubeRay\uc758 \ubd84\uc0b0 \ud6c8\ub828 \uae30\ub2a5\uc5d0 \ucd5c\uc801\ud654\ub41c \uc6d0\ubcf8 ",(0,s.jsx)(e.a,{href:"https://awsdocs-neuron.readthedocs-hosted.com/en/latest/libraries/neuronx-distributed/tutorials/training_llama2_7b.html#llama2-7b-tp-zero1-tutorial",children:"Llama2 \uc0ac\uc804 \ud6c8\ub828 \ud29c\ud1a0\ub9ac\uc5bc"}),"\uc758 \ub9de\ucda4\ud615 \ubc84\uc804\uc785\ub2c8\ub2e4."]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Llama2-RayTrain",src:a(60863).A+"",width:"14330",height:"7927"})}),"\n",(0,s.jsx)(e.h3,{id:"llama-2\ub780",children:"Llama-2\ub780?"}),"\n",(0,s.jsx)(e.p,{children:"Llama-2\ub294 \ud14d\uc2a4\ud2b8 \uc0dd\uc131, \uc694\uc57d, \ubc88\uc5ed, \uc9c8\uc758\uc751\ub2f5 \ub4f1 \ub2e4\uc591\ud55c \uc790\uc5f0\uc5b4 \ucc98\ub9ac(NLP) \uc791\uc5c5\uc744 \uc704\ud574 \uc124\uacc4\ub41c \ucd5c\ucca8\ub2e8 \ub300\uaddc\ubaa8 \uc5b8\uc5b4 \ubaa8\ub378(LLM)\uc785\ub2c8\ub2e4. \ud2b9\uc815 \uc0ac\uc6a9 \uc0ac\ub840\uc5d0 \ub9de\uac8c \ud30c\uc778\ud29c\ub2dd\ud560 \uc218 \uc788\ub294 \uac15\ub825\ud55c \ub3c4\uad6c\uc785\ub2c8\ub2e4."}),"\n",(0,s.jsx)(e.h3,{id:"\ubd84\uc0b0-\ud6c8\ub828\uc744-\uc704\ud55c-raytrain\uacfc-kuberay\uc758-\uc7a5\uc810",children:"\ubd84\uc0b0 \ud6c8\ub828\uc744 \uc704\ud55c RayTrain\uacfc KubeRay\uc758 \uc7a5\uc810"}),"\n",(0,s.jsx)(e.p,{children:"Llama-2\uc640 \uac19\uc740 \ub300\uaddc\ubaa8 \ubaa8\ub378\uc740 \ubc29\ub300\ud55c \ucef4\ud4e8\ud305 \ubc0f \uba54\ubaa8\ub9ac \uc694\uad6c\uc0ac\ud56d\uc73c\ub85c \uc778\ud574 \ubd84\uc0b0 \ud6c8\ub828\uc774 \ud544\uc218\uc801\uc785\ub2c8\ub2e4. RayTrain\uacfc KubeRay\uc758 \uc870\ud569\uc740 \ud2b9\ud788 AWS Trainium\uacfc \ud568\uaed8 \ud65c\uc6a9\ud560 \ub54c \uc774\ub7ec\ud55c \uc694\uad6c\uc0ac\ud56d\uc744 \ud6a8\uc728\uc801\uc774\uace0 \ud6a8\uacfc\uc801\uc73c\ub85c \ucc98\ub9ac\ud558\uae30 \uc704\ud55c \uac15\ub825\ud55c \ud504\ub808\uc784\uc6cc\ud06c\ub97c \uc81c\uacf5\ud569\ub2c8\ub2e4:"}),"\n",(0,s.jsx)(e.h4,{id:"raytrain",children:"RayTrain:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"\uac04\uc18c\ud654\ub41c \ubd84\uc0b0 \ud6c8\ub828"}),": RayTrain\uc740 \ubd84\uc0b0 \ud6c8\ub828\uc758 \ubcf5\uc7a1\uc131\uc744 \ucd94\uc0c1\ud654\ud558\ub294 Ray \ud504\ub808\uc784\uc6cc\ud06c \uae30\ubc18\uc758 \uace0\uc218\uc900 \ub77c\uc774\ube0c\ub7ec\ub9ac\uc785\ub2c8\ub2e4. \ucd5c\uc18c\ud55c\uc758 \ucf54\ub4dc \ubcc0\uacbd\uc73c\ub85c \uc5ec\ub7ec \ub178\ub4dc\uc5d0 \uac78\uccd0 Llama-2 \ud6c8\ub828\uc744 \ud655\uc7a5\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. Ray\uc758 \uc561\ud130 \uae30\ubc18 \uc544\ud0a4\ud14d\ucc98\uc640 \ud0dc\uc2a4\ud06c \uae30\ubc18 \ubcd1\ub82c \ucc98\ub9ac\ub294 \ubd84\uc0b0 \uc6cc\ud06c\ub85c\ub4dc\uc758 \ud6a8\uc728\uc801\uc778 \uc2e4\ud589\uc744 \uac00\ub2a5\ud558\uac8c \ud569\ub2c8\ub2e4."]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"\uc720\uc5f0\ud55c \uc804\ub7b5"}),": RayTrain\uc740 \ub370\uc774\ud130 \ubcd1\ub82c \ucc98\ub9ac\uc640 \ubaa8\ub378 \ubcd1\ub82c \ucc98\ub9ac\uc640 \uac19\uc740 \ub2e4\uc591\ud55c \ubd84\uc0b0 \ud6c8\ub828 \uc804\ub7b5\uc744 \uc9c0\uc6d0\ud569\ub2c8\ub2e4. \ub370\uc774\ud130 \ubcd1\ub82c \ucc98\ub9ac\ub294 \ub370\uc774\ud130\uc14b\uc744 \uc5ec\ub7ec \ub178\ub4dc\uc5d0 \ubd84\ud560\ud558\uace0, \ubaa8\ub378 \ubcd1\ub82c \ucc98\ub9ac\ub294 \ubaa8\ub378 \uc790\uccb4\ub97c \ubd84\ud560\ud569\ub2c8\ub2e4. \uc774\ub7ec\ud55c \uc720\uc5f0\uc131\uc73c\ub85c \ubaa8\ub378\uc758 \ud2b9\uc815 \uc694\uad6c\uc0ac\ud56d\uacfc \ud6c8\ub828 \ud658\uacbd\uc758 \uc544\ud0a4\ud14d\ucc98\uc5d0 \ub530\ub77c \ud6c8\ub828\uc744 \ucd5c\uc801\ud654\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"\uc7a5\uc560 \ud5c8\uc6a9"}),": RayTrain\uc5d0\ub294 \ub0b4\uc7a5\ub41c \uc7a5\uc560 \ud5c8\uc6a9 \uba54\ucee4\ub2c8\uc998\uc774 \ud3ec\ud568\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4. \ub178\ub4dc\uac00 \uc2e4\ud328\ud558\uba74 Ray\uac00 \ub2e4\ub978 \uc0ac\uc6a9 \uac00\ub2a5\ud55c \ub178\ub4dc\uc5d0\uc11c \ud0dc\uc2a4\ud06c\ub97c \uc7ac\uc2a4\ucf00\uc904\ub9c1\ud558\uc5ec \ud6c8\ub828 \uc791\uc5c5\uc774 \uc911\ub2e8 \uc5c6\uc774 \uacc4\uc18d\ub429\ub2c8\ub2e4. \uc774 \uae30\ub2a5\uc740 \ub300\uaddc\ubaa8 \ubd84\uc0b0 \ud6c8\ub828 \ud658\uacbd\uc5d0\uc11c \uacac\uace0\uc131\uc744 \uc720\uc9c0\ud558\ub294 \ub370 \uc911\uc694\ud569\ub2c8\ub2e4."]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"\uc0ac\uc6a9 \ud3b8\uc758\uc131"}),": RayTrain\uc740 \ubd84\uc0b0 \ud6c8\ub828 \uc791\uc5c5\uc758 \uc124\uc815\uacfc \uc2e4\ud589\uc744 \ub2e8\uc21c\ud654\ud558\ub294 \uc9c1\uad00\uc801\uc778 API\ub97c \uc81c\uacf5\ud569\ub2c8\ub2e4. Hugging Face Transformers\uc640 \uac19\uc740 \uc778\uae30 \uc788\ub294 \uba38\uc2e0 \ub7ec\ub2dd \ub77c\uc774\ube0c\ub7ec\ub9ac\uc640\uc758 \ud1b5\ud569\uc73c\ub85c \uad11\ubc94\uc704\ud55c \uc218\uc815 \uc5c6\uc774 \uae30\uc874 \uc6cc\ud06c\ud50c\ub85c\uc6b0\uc5d0 RayTrain\uc744 \uc27d\uac8c \ud1b5\ud569\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n"]}),"\n",(0,s.jsx)(e.h4,{id:"kuberay",children:"KubeRay:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Kubernetes\uc640\uc758 \ud1b5\ud569"}),": KubeRay\ub294 Kubernetes\uc758 \ub124\uc774\ud2f0\ube0c \uae30\ub2a5\uc744 \ud65c\uc6a9\ud558\uc5ec Ray \ud074\ub7ec\uc2a4\ud130\ub97c \ubc30\ud3ec, \uad00\ub9ac \ubc0f \ud655\uc7a5\ud569\ub2c8\ub2e4. \uc774 \ud1b5\ud569\uc73c\ub85c Kubernetes\uc758 \uac15\ub825\ud55c \uc624\ucf00\uc2a4\ud2b8\ub808\uc774\uc158 \uae30\ub2a5\uc744 \uc0ac\uc6a9\ud558\uc5ec Ray \uc6cc\ud06c\ub85c\ub4dc\ub97c \ud6a8\uacfc\uc801\uc73c\ub85c \ucc98\ub9ac\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"\ub3d9\uc801 \uc2a4\ucf00\uc77c\ub9c1"}),": KubeRay\ub294 Ray \ud074\ub7ec\uc2a4\ud130\uc758 \ub3d9\uc801 \uc2a4\ucf00\uc77c\ub9c1\uc744 \uc9c0\uc6d0\ud569\ub2c8\ub2e4. Ray\uc758 \ub0b4\uc7a5 \uc624\ud1a0\uc2a4\ucf00\uc77c\ub7ec\uac00 \uc6cc\ud06c\ub85c\ub4dc \uc694\uad6c\uc5d0 \ub530\ub77c \ucd94\uac00 \uc561\ud130 \ub808\ud50c\ub9ac\uce74\ub97c \uc694\uccad\ud560 \uc218 \uc788\uc73c\uba70, Karpenter\ub098 Cluster Autoscaler\uc640 \uac19\uc740 Kubernetes \ub3c4\uad6c\uac00 \uc774\ub7ec\ud55c \uc694\uad6c\ub97c \ucda9\uc871\ud558\uae30 \uc704\ud574 \uc0c8 \ub178\ub4dc \uc0dd\uc131\uc744 \uad00\ub9ac\ud569\ub2c8\ub2e4."]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"\uc218\ud3c9 \uc2a4\ucf00\uc77c\ub9c1"}),": \ucef4\ud4e8\ud305 \ubd80\ud558\uac00 \uc99d\uac00\ud568\uc5d0 \ub530\ub77c \ub354 \ub9ce\uc740 \uc6cc\ucee4 \ub178\ub4dc\ub97c \ucd94\uac00\ud558\uc5ec Ray \ud074\ub7ec\uc2a4\ud130\ub97c \uc218\ud3c9\uc73c\ub85c \ud655\uc7a5\ud569\ub2c8\ub2e4. \uc774\ub97c \ud1b5\ud574 \ub300\uaddc\ubaa8 \ubd84\uc0b0 \ud6c8\ub828 \ubc0f \ucd94\ub860 \uc791\uc5c5\uc744 \ud6a8\uc728\uc801\uc73c\ub85c \ucc98\ub9ac\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Custom Resource Definitions (CRDs)"}),": KubeRay\ub294 Kubernetes CRD\ub97c \ud65c\uc6a9\ud558\uc5ec Ray \ud074\ub7ec\uc2a4\ud130\uc640 \uc791\uc5c5\uc744 \uc815\uc758\ud558\uace0 \uad00\ub9ac\ud569\ub2c8\ub2e4. \uc774\ub294 Kubernetes \uc5d0\ucf54\uc2dc\uc2a4\ud15c \ub0b4\uc5d0\uc11c Ray \uc6cc\ud06c\ub85c\ub4dc\ub97c \ucc98\ub9ac\ud558\ub294 \ud45c\uc900\ud654\ub41c \ubc29\ubc95\uc744 \uc81c\uacf5\ud569\ub2c8\ub2e4."]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"\uc7a5\uc560 \ud5c8\uc6a9"}),": KubeRay\ub294 Kubernetes\uc758 \uc790\uac00 \uce58\uc720 \uae30\ub2a5\uc744 \ud65c\uc6a9\ud569\ub2c8\ub2e4. Ray \ud5e4\ub4dc \ub178\ub4dc\ub098 \uc6cc\ucee4 \ub178\ub4dc\uac00 \uc2e4\ud328\ud558\uba74 Kubernetes\uac00 \uc790\ub3d9\uc73c\ub85c \uc2e4\ud328\ud55c \uad6c\uc131 \uc694\uc18c\ub97c \ub2e4\uc2dc \uc2dc\uc791\ud558\uc5ec \ucd5c\uc18c\ud55c\uc758 \ub2e4\uc6b4\ud0c0\uc784\uacfc \uc9c0\uc18d\uc801\uc778 \uc6b4\uc601\uc744 \ubcf4\uc7a5\ud569\ub2c8\ub2e4."]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"\ubd84\uc0b0 \uc2a4\ucf00\uc904\ub9c1"}),": Ray\uc758 \uc561\ud130 \uae30\ubc18 \ubaa8\ub378\uacfc \ubd84\uc0b0 \ud0dc\uc2a4\ud06c \uc2a4\ucf00\uc904\ub9c1\uc774 Kubernetes\uc758 \uc624\ucf00\uc2a4\ud2b8\ub808\uc774\uc158\uacfc \uacb0\ud569\ub418\uc5b4 \ub178\ub4dc \uc7a5\uc560 \ubc1c\uc0dd \uc2dc\uc5d0\ub3c4 \uace0\uac00\uc6a9\uc131\uacfc \ud6a8\uc728\uc801\uc778 \ud0dc\uc2a4\ud06c \uc2e4\ud589\uc744 \ubcf4\uc7a5\ud569\ub2c8\ub2e4."]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"\uc120\uc5b8\uc801 \uad6c\uc131"}),": KubeRay\ub97c \uc0ac\uc6a9\ud558\uba74 \uc120\uc5b8\uc801 YAML \uad6c\uc131\uc744 \uc0ac\uc6a9\ud558\uc5ec Ray \ud074\ub7ec\uc2a4\ud130\uc640 \uc791\uc5c5\uc744 \uc815\uc758\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uc774\ub294 \ubc30\ud3ec \ubc0f \uad00\ub9ac \ud504\ub85c\uc138\uc2a4\ub97c \ub2e8\uc21c\ud654\ud558\uc5ec Ray \ud074\ub7ec\uc2a4\ud130\ub97c \ub354 \uc27d\uac8c \uc124\uc815\ud558\uace0 \uc720\uc9c0 \uad00\ub9ac\ud560 \uc218 \uc788\uac8c \ud569\ub2c8\ub2e4."]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"\ud1b5\ud569 \ub85c\uae45 \ubc0f \ubaa8\ub2c8\ud130\ub9c1"}),": KubeRay\ub294 Prometheus \ubc0f Grafana\uc640 \uac19\uc740 Kubernetes\uc758 \ub85c\uae45 \ubc0f \ubaa8\ub2c8\ud130\ub9c1 \ub3c4\uad6c\uc640 \ud1b5\ud569\ub429\ub2c8\ub2e4. \uc774\ub294 Ray \ud074\ub7ec\uc2a4\ud130\uc758 \uc131\ub2a5\uacfc \uc0c1\ud0dc\uc5d0 \ub300\ud55c \ud3ec\uad04\uc801\uc778 \uc778\uc0ac\uc774\ud2b8\ub97c \uc81c\uacf5\ud558\uc5ec \ub514\ubc84\uae45\uacfc \ucd5c\uc801\ud654\ub97c \uc6a9\uc774\ud558\uac8c \ud569\ub2c8\ub2e4."]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"\uc2a4\ud31f \uc778\uc2a4\ud134\uc2a4"}),": Kubernetes\uc758 \uc2a4\ud31f \uc778\uc2a4\ud134\uc2a4 \uc9c0\uc6d0\uc744 \uc0ac\uc6a9\ud558\uc5ec \ube44\uc6a9 \ud6a8\uc728\uc801\uc73c\ub85c Ray \ud074\ub7ec\uc2a4\ud130\ub97c \uc2e4\ud589\ud569\ub2c8\ub2e4. \uc774\ub97c \ud1b5\ud574 \ud544\uc694\uc5d0 \ub530\ub77c \ud655\uc7a5\ud558\ub294 \ub2a5\ub825\uc744 \uc720\uc9c0\ud558\uba74\uc11c \uc800\ube44\uc6a9 \ucef4\ud4e8\ud305 \ub9ac\uc18c\uc2a4\ub97c \ud65c\uc6a9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n"]}),"\n",(0,s.jsx)(e.h4,{id:"aws-trainium",children:"AWS Trainium:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"\ub525\ub7ec\ub2dd\uc5d0 \ucd5c\uc801\ud654"}),": AWS Trainium \uae30\ubc18 Trn1 \uc778\uc2a4\ud134\uc2a4\ub294 \ub525\ub7ec\ub2dd \uc6cc\ud06c\ub85c\ub4dc\ub97c \uc704\ud574 \ud2b9\ubcc4\ud788 \uc124\uacc4\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \ub192\uc740 \ucc98\ub9ac\ub7c9\uacfc \ub0ae\uc740 \uc9c0\uc5f0 \uc2dc\uac04\uc744 \uc81c\uacf5\ud558\uc5ec Llama-2\uc640 \uac19\uc740 \ub300\uaddc\ubaa8 \ubaa8\ub378 \ud6c8\ub828\uc5d0 \uc774\uc0c1\uc801\uc785\ub2c8\ub2e4. Trainium \uce69\uc740 \uae30\uc874 \ud504\ub85c\uc138\uc11c\uc5d0 \ube44\ud574 \uc0c1\ub2f9\ud55c \uc131\ub2a5 \ud5a5\uc0c1\uc744 \uc81c\uacf5\ud558\uc5ec \ud6c8\ub828 \uc2dc\uac04\uc744 \ub2e8\ucd95\ud569\ub2c8\ub2e4."]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Neuron SDK"}),": AWS Neuron SDK\ub294 Trainium\uc5d0 \ub9de\uac8c \ub525\ub7ec\ub2dd \ubaa8\ub378\uc744 \ucd5c\uc801\ud654\ud558\ub3c4\ub85d \ub9de\ucda4\ud654\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4. \uace0\uae09 \ucef4\ud30c\uc77c\ub7ec \ucd5c\uc801\ud654\uc640 \ud63c\ud569 \uc815\ubc00\ub3c4 \ud6c8\ub828 \uc9c0\uc6d0\uacfc \uac19\uc740 \uae30\ub2a5\uc744 \ud3ec\ud568\ud558\uc5ec \uc815\ud655\ub3c4\ub97c \uc720\uc9c0\ud558\uba74\uc11c \ud6c8\ub828 \uc6cc\ud06c\ub85c\ub4dc\ub97c \ub354\uc6b1 \uac00\uc18d\ud654\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"\uc774-\uc870\ud569\uc774-\uac15\ub825\ud55c-\uc774\uc720",children:"\uc774 \uc870\ud569\uc774 \uac15\ub825\ud55c \uc774\uc720"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"\uac04\uc18c\ud654\ub41c \uc2a4\ucf00\uc77c\ub9c1"}),": RayTrain\uacfc KubeRay\ub294 \uc5ec\ub7ec \ub178\ub4dc\uc5d0 \uac78\uce5c Llama-2 \ud6c8\ub828 \uc2a4\ucf00\uc77c\ub9c1 \ud504\ub85c\uc138\uc2a4\ub97c \ub2e8\uc21c\ud654\ud569\ub2c8\ub2e4. Ray\uc758 \ud6a8\uc728\uc801\uc778 \ubd84\uc0b0 \uc2e4\ud589\uacfc KubeRay\uc758 Kubernetes \ub124\uc774\ud2f0\ube0c \uc624\ucf00\uc2a4\ud2b8\ub808\uc774\uc158\uc73c\ub85c Trn1 \uc778\uc2a4\ud134\uc2a4\uc5d0\uc11c AWS Trainium\uc758 \uc804\uccb4 \uc131\ub2a5\uc744 \ud65c\uc6a9\ud558\uae30 \uc704\ud574 \ud6c8\ub828 \uc6cc\ud06c\ub85c\ub4dc\ub97c \uc27d\uac8c \ud655\uc7a5\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"\ucd5c\uc801\ud654\ub41c \uc131\ub2a5"}),": Neuron SDK\ub294 Trainium\uc758 \uc544\ud0a4\ud14d\ucc98\uc5d0 \ub9de\uac8c \ud2b9\ubcc4\ud788 \ucd5c\uc801\ud654\ud558\uc5ec \ud6c8\ub828 \uc791\uc5c5\uc758 \uc131\ub2a5\uc744 \ud5a5\uc0c1\uc2dc\ud0b5\ub2c8\ub2e4. Ray\uc758 \ud6a8\uc728\uc801\uc778 \ubd84\uc0b0 \ud0dc\uc2a4\ud06c \uad00\ub9ac\uc640 KubeRay\uc758 \ub9ac\uc18c\uc2a4 \uc624\ucf00\uc2a4\ud2b8\ub808\uc774\uc158\uacfc \uacb0\ud569\ud558\uc5ec \uc774 \uc124\uc815\uc740 \ucd5c\uc801\uc758 \ud6c8\ub828 \uc131\ub2a5\uc744 \ubcf4\uc7a5\ud569\ub2c8\ub2e4."]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"\ube44\uc6a9 \ud6a8\uc728\uc131"}),": Ray\uc758 \uc624\ud1a0\uc2a4\ucf00\uc77c\ub9c1 \uae30\ub2a5\uacfc Kubernetes\uc758 \ub9ac\uc18c\uc2a4 \uad00\ub9ac\ub294 \ub9ac\uc18c\uc2a4\ub97c \ud6a8\uc728\uc801\uc73c\ub85c \ud560\ub2f9\ud558\uace0 \uc218\uc694\uc5d0 \ub530\ub77c \ud074\ub7ec\uc2a4\ud130\ub97c \ud655\uc7a5\ud558\uc5ec \ube44\uc6a9\uc744 \ucd5c\uc801\ud654\ud558\ub294 \ub370 \ub3c4\uc6c0\uc774 \ub429\ub2c8\ub2e4. \uc774\ub97c \ud1b5\ud574 \ud544\uc694\ud55c \ub9ac\uc18c\uc2a4\ub9cc \uc0ac\uc6a9\ud558\uc5ec \ubd88\ud544\uc694\ud55c \uc9c0\ucd9c\uc744 \uc904\uc77c \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\uc774 \uae30\uc220 \uc870\ud569\uc744 \uc0ac\uc6a9\ud558\uba74 \ubd84\uc0b0 \ud6c8\ub828\uacfc \ud558\ub4dc\uc6e8\uc5b4\uc758 \ucd5c\uc2e0 \ubc1c\uc804\uc744 \ud65c\uc6a9\ud558\uc5ec Llama-2\ub97c \ud6a8\uc728\uc801\uc774\uace0 \ud6a8\uacfc\uc801\uc73c\ub85c \uc0ac\uc804 \ud6c8\ub828\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),"\n",(0,s.jsx)(e.h3,{id:"volcano\ub780",children:"Volcano\ub780?"}),"\n",(0,s.jsx)(e.p,{children:"Volcano\ub294 Kubernetes \uae30\ubc18\uc758 \uc624\ud508\uc18c\uc2a4 \ubc30\uce58 \uc2a4\ucf00\uc904\ub9c1 \uc2dc\uc2a4\ud15c\uc73c\ub85c, \uace0\uc131\ub2a5 \ucef4\ud4e8\ud305(HPC) \ubc0f \uba38\uc2e0 \ub7ec\ub2dd \uc6cc\ud06c\ub85c\ub4dc\ub97c \uad00\ub9ac\ud558\uae30 \uc704\ud574 \ud2b9\ubcc4\ud788 \uc124\uacc4\ub418\uc5c8\uc2b5\ub2c8\ub2e4. Gang \uc2a4\ucf00\uc904\ub9c1, \uacf5\uc815 \uacf5\uc720, \uc120\uc810\uacfc \uac19\uc740 \uace0\uae09 \uc2a4\ucf00\uc904\ub9c1 \uae30\ub2a5\uc744 \uc81c\uacf5\ud558\uba70, \uc774\ub294 Kubernetes \ud658\uacbd\uc5d0\uc11c \ub300\uaddc\ubaa8 \ubd84\uc0b0 \ud6c8\ub828 \uc791\uc5c5\uc744 \ud6a8\uc728\uc801\uc73c\ub85c \uc2e4\ud589\ud558\ub294 \ub370 \ud544\uc218\uc801\uc785\ub2c8\ub2e4."}),"\n",(0,s.jsx)(e.h3,{id:"volcano\uc758-gang-\uc2a4\ucf00\uc904\ub9c1-\uc791\ub3d9-\ubc29\uc2dd",children:"Volcano\uc758 Gang \uc2a4\ucf00\uc904\ub9c1 \uc791\ub3d9 \ubc29\uc2dd"}),"\n",(0,s.jsx)(e.p,{children:'Volcano\uc758 Gang \uc2a4\ucf00\uc904\ub9c1\uc740 \uc791\uc5c5(\ub610\ub294 "Gang")\uc758 \ubaa8\ub4e0 \ud30c\ub4dc\uac00 \ub3d9\uc2dc\uc5d0 \uc2a4\ucf00\uc904\ub9c1\ub418\ub3c4\ub85d \ubcf4\uc7a5\ud569\ub2c8\ub2e4. \uc774\ub294 \uc5ec\ub7ec \ud30c\ub4dc\uac00 \uc62c\ubc14\ub974\uac8c \uc791\ub3d9\ud558\uae30 \uc704\ud574 \ud568\uaed8 \uc2dc\uc791\ud574\uc57c \ud558\ub294 \ubd84\uc0b0 \ud6c8\ub828 \uc6cc\ud06c\ub85c\ub4dc\uc5d0 \uc911\uc694\ud569\ub2c8\ub2e4. Gang\uc758 \ud30c\ub4dc \uc911 \ud558\ub098\ub77c\ub3c4 \ub9ac\uc18c\uc2a4 \uc81c\uc57d\uc73c\ub85c \uc778\ud574 \uc2a4\ucf00\uc904\ub9c1\ud560 \uc218 \uc5c6\ub294 \uacbd\uc6b0 Gang\uc758 \uc5b4\ub5a4 \ud30c\ub4dc\ub3c4 \uc2dc\uc791\ub418\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. \uc774\ub294 \ubd80\ubd84 \uc2e4\ud589\uc744 \ubc29\uc9c0\ud558\uace0 \uc2e4\ud589\uc774 \uc2dc\uc791\ub418\uae30 \uc804\uc5d0 \uc791\uc5c5\uc5d0 \ud544\uc694\ud55c \ubaa8\ub4e0 \ub9ac\uc18c\uc2a4\uac00 \uc0ac\uc6a9 \uac00\ub2a5\ud558\ub3c4\ub85d \ubcf4\uc7a5\ud569\ub2c8\ub2e4.'}),"\n",(0,s.jsx)(e.h2,{id:"1-\uc194\ub8e8\uc158-\ubc30\ud3ec",children:"1. \uc194\ub8e8\uc158 \ubc30\ud3ec"}),"\n",(0,s.jsxs)(l.A,{header:(0,s.jsx)(e.h2,{children:(0,s.jsx)(e.span,{children:"\uc0ac\uc804 \uc694\uad6c\uc0ac\ud56d"})}),children:[(0,s.jsx)(e.p,{children:"\uc2dc\uc791\ud558\uae30 \uc804\uc5d0 \ubc30\ud3ec \ud504\ub85c\uc138\uc2a4\ub97c \uc6d0\ud65c\ud558\uace0 \ubc88\uac70\ub86d\uc9c0 \uc54a\uac8c \ub9cc\ub4e4\uae30 \uc704\ud574 \ubaa8\ub4e0 \uc0ac\uc804 \uc694\uad6c\uc0ac\ud56d\uc774 \uc900\ube44\ub418\uc5b4 \uc788\ub294\uc9c0 \ud655\uc778\ud558\uc138\uc694.\nEC2 \ub610\ub294 Cloud9 \uc778\uc2a4\ud134\uc2a4\uc5d0 \ub2e4\uc74c \ub3c4\uad6c\uac00 \uc124\uce58\ub418\uc5b4 \uc788\ub294\uc9c0 \ud655\uc778\ud558\uc138\uc694."}),(0,s.jsxs)(e.admonition,{type:"info",children:[(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/EC2_GetStarted.html",children:"EC2 \uc778\uc2a4\ud134\uc2a4"})," \ub610\ub294 ",(0,s.jsx)(e.a,{href:"https://docs.aws.amazon.com/cloud9/latest/user-guide/tutorial-create-environment.html",children:"Cloud9 \uc778\uc2a4\ud134\uc2a4"})," -> \ub450 \uc635\uc158 \ubaa8\ub450 100GB \uc774\uc0c1\uc758 \uc2a4\ud1a0\ub9ac\uc9c0\ub97c \ud655\ubcf4\ud558\uc138\uc694. \uc774\ub294 x86 \uc544\ud0a4\ud14d\ucc98\ub85c Docker \uc774\ubbf8\uc9c0\ub97c \uc0dd\uc131\ud558\uace0 \uc801\uc808\ud55c \uc2a4\ud1a0\ub9ac\uc9c0\ub97c \ud655\ubcf4\ud558\ub294 \ub370 \uc911\uc694\ud569\ub2c8\ub2e4."]}),"\n"]}),(0,s.jsx)(e.p,{children:"\ub85c\uceec Windows \uba38\uc2e0\uc774\ub098 Mac\uc744 \uc0ac\uc6a9\ud558\ub294 \uacbd\uc6b0 Docker\uac00 \ub85c\uceec\uc5d0 \uc124\uce58\ub418\uc5b4 \uc788\uace0 \ube4c\ub354 \uc2a4\ud1a0\ub9ac\uc9c0\uac00 100GB \uc774\uc0c1\uc774\uba70 \uc774\ubbf8\uc9c0\uac00 x86 \uc544\ud0a4\ud14d\ucc98\ub85c \uc0dd\uc131\ub418\uc5c8\ub294\uc9c0 \ud655\uc778\ud558\uc138\uc694."})]}),(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2.html",children:"AWS CLI"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://Kubernetes.io/docs/tasks/tools/",children:"kubectl"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://learn.hashicorp.com/tutorials/terraform/install-cli",children:"terraform"})}),"\n"]}),(0,s.jsxs)(e.p,{children:["EC2\uc5d0\uc11c \ubaa8\ub4e0 \uc0ac\uc804 \uc694\uad6c\uc0ac\ud56d\uc744 \uc124\uce58\ud558\ub824\uba74 Amazon Linux 2023\uacfc \ud638\ud658\ub418\ub294 \uc774 ",(0,s.jsx)(e.a,{href:"https://github.com/awslabs/ai-on-eks/blob/main/infra/trainium-inferentia/examples/llama2/install-pre-requsites-for-ec2.sh",children:"\uc2a4\ud06c\ub9bd\ud2b8"}),"\ub97c \uc2e4\ud589\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"AI on EKS \uc800\uc7a5\uc18c \ud074\ub860"})}),(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"git clone https://github.com/awslabs/ai-on-eks.git\n"})}),(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"trainium-inferentia \ub514\ub809\ud1a0\ub9ac\ub85c \uc774\ub3d9\ud569\ub2c8\ub2e4."})}),(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"cd ai-on-eks/infra/trainium-inferentia\n"})}),(0,s.jsx)(e.p,{children:"\uc544\ub798 export \uba85\ub839\uc744 \uc2e4\ud589\ud558\uc5ec \ud658\uacbd \ubcc0\uc218\ub97c \uc124\uc815\ud569\ub2c8\ub2e4."}),(0,s.jsx)(e.admonition,{type:"info",children:(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"\ucc38\uace0:"})," 2024/01/04 \uae30\uc900 Trainium \uc778\uc2a4\ud134\uc2a4\ub294 us-west-2, us-east-1 \ubc0f us-east-2 \ub9ac\uc804\uc5d0\uc11c\ub9cc \uc0ac\uc6a9 \uac00\ub2a5\ud569\ub2c8\ub2e4."]})}),(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"# FSx for Lustre \ud65c\uc131\ud654, \uc5ec\ub7ec \ub178\ub4dc\uc758 \ubaa8\ub4e0 \ud30c\ub4dc\uc5d0 \uc0ac\uc804 \ud6c8\ub828 \ub370\uc774\ud130\ub97c \ub9c8\uc6b4\ud2b8\ud569\ub2c8\ub2e4\nexport TF_VAR_enable_fsx_for_lustre=true\n\n# \uc694\uad6c\uc0ac\ud56d\uc5d0 \ub530\ub77c \ub9ac\uc804\uc744 \uc124\uc815\ud569\ub2c8\ub2e4. \uc9c0\uc815\ub41c \ub9ac\uc804\uc5d0\uc11c Trn1 \uc778\uc2a4\ud134\uc2a4 \uac00\uc6a9\uc131\uc744 \ud655\uc778\ud558\uc138\uc694.\nexport TF_VAR_region=us-west-2\n\n# KubeRay Operator\uc640 \ud568\uaed8 Volcano \ucee4\uc2a4\ud140 \uc2a4\ucf00\uc904\ub7ec \ud65c\uc131\ud654\nexport TF_VAR_enable_volcano=true\n\n# \ucc38\uace0: \uc774 \uad6c\uc131\uc740 2\uac1c\uc758 \uc0c8 Trn1 32xl \uc778\uc2a4\ud134\uc2a4\ub97c \uc0dd\uc131\ud569\ub2c8\ub2e4. \uc9c4\ud589\ud558\uae30 \uc804\uc5d0 \uad00\ub828 \ube44\uc6a9\uc744 \ud655\uc778\ud558\uc138\uc694.\nexport TF_VAR_trn1_32xl_min_size=2\nexport TF_VAR_trn1_32xl_desired_size=2\n"})}),(0,s.jsx)(e.p,{children:"\uc124\uce58 \uc2a4\ud06c\ub9bd\ud2b8\ub97c \uc2e4\ud589\ud558\uc5ec \uc194\ub8e8\uc158\uc5d0 \ud544\uc694\ud55c \ubaa8\ub4e0 \uc560\ub4dc\uc628\uc774 \ud3ec\ud568\ub41c EKS \ud074\ub7ec\uc2a4\ud130\ub97c \ud504\ub85c\ube44\uc800\ub2dd\ud569\ub2c8\ub2e4."}),(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"./install.sh\n"})}),(0,s.jsx)("a",{id:"\ub9ac\uc18c\uc2a4-\ud655\uc778"}),(0,s.jsx)(e.h3,{id:"\ub9ac\uc18c\uc2a4-\ud655\uc778",children:"\ub9ac\uc18c\uc2a4 \ud655\uc778"}),(0,s.jsx)(e.p,{children:"Amazon EKS \ud074\ub7ec\uc2a4\ud130 \ud655\uc778"}),(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"aws eks --region us-west-2 describe-cluster --name trainium-inferentia\n"})}),(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"# EKS\uc640 \uc778\uc99d\ud558\uae30 \uc704\ud55c k8s \uc124\uc815 \ud30c\uc77c \uc0dd\uc131\naws eks --region us-west-2 update-kubeconfig --name trainium-inferentia\n\nkubectl get nodes # \ucd9c\ub825\uc740 EKS \uad00\ub9ac\ud615 \ub178\ub4dc \uadf8\ub8f9 \ub178\ub4dc\ub97c \ubcf4\uc5ec\uc90d\ub2c8\ub2e4\n"})})]}),"\n",(0,s.jsx)(e.h2,{id:"2-docker-\uc774\ubbf8\uc9c0-\ube4c\ub4dc-\uc120\ud0dd-\ub2e8\uacc4",children:"2. Docker \uc774\ubbf8\uc9c0 \ube4c\ub4dc (\uc120\ud0dd \ub2e8\uacc4)"}),"\n",(0,s.jsxs)(e.p,{children:["\ube14\ub8e8\ud504\ub9b0\ud2b8 \ubc30\ud3ec\ub97c \ub2e8\uc21c\ud654\ud558\uae30 \uc704\ud574 \uc774\ubbf8 Docker \uc774\ubbf8\uc9c0\ub97c \ube4c\ub4dc\ud558\uc5ec \ud37c\ube14\ub9ad ECR\uc5d0\uc11c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub3c4\ub85d \ud588\uc2b5\ub2c8\ub2e4.\nDocker \uc774\ubbf8\uc9c0\ub97c \ucee4\uc2a4\ud130\ub9c8\uc774\uc9d5\ud558\ub824\uba74 ",(0,s.jsx)(e.code,{children:"Dockerfile"}),"\uc744 \uc5c5\ub370\uc774\ud2b8\ud558\uace0 \uc120\ud0dd \ub2e8\uacc4\ub97c \ub530\ub77c Docker \uc774\ubbf8\uc9c0\ub97c \ube4c\ub4dc\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\n\uc0c8\ub85c \uc0dd\uc131\ub41c \uc774\ubbf8\uc9c0\uc640 \uc790\uccb4 \ud504\ub77c\uc774\ube57 ECR\uc744 \uc0ac\uc6a9\ud558\uc5ec RayCluster YAML \ud30c\uc77c ",(0,s.jsx)(e.code,{children:"llama2-pretrain-trn1-raycluster.yaml"}),"\ub3c4 \uc218\uc815\ud574\uc57c \ud569\ub2c8\ub2e4."]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"cd ai/training/raytrain-llama2-pretrain-trn1\n./kuberay-trn1-llama2-pretrain-build-image.sh\n"})}),"\n",(0,s.jsx)(e.p,{children:"\uc774 \uc2a4\ud06c\ub9bd\ud2b8\ub97c \uc2e4\ud589\ud55c \ud6c4 \uc0dd\uc131\ub41c Docker \uc774\ubbf8\uc9c0 URL\uacfc \ud0dc\uadf8\ub97c \uae30\ub85d\ud558\uc138\uc694.\n\ub2e4\uc74c \ub2e8\uacc4\uc5d0\uc11c \uc774 \uc815\ubcf4\uac00 \ud544\uc694\ud569\ub2c8\ub2e4."}),"\n",(0,s.jsx)(e.h2,{id:"3-kuberay-operator\ub85c-ray-\ud074\ub7ec\uc2a4\ud130-\uc2dc\uc791",children:"3. KubeRay Operator\ub85c Ray \ud074\ub7ec\uc2a4\ud130 \uc2dc\uc791"}),"\n",(0,s.jsxs)(e.p,{children:["2\ub2e8\uacc4\ub97c \uac74\ub108\ub6f0\ub294 \uacbd\uc6b0 YAML \ud30c\uc77c\uc744 \uc218\uc815\ud560 \ud544\uc694\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.\n\ud30c\uc77c\uc5d0 ",(0,s.jsx)(e.code,{children:"kubectl apply"})," \uba85\ub839\uc744 \uc2e4\ud589\ud558\uba74 \uc6b0\ub9ac\uac00 \uac8c\uc2dc\ud55c \ud37c\ube14\ub9ad ECR \uc774\ubbf8\uc9c0\ub97c \uc0ac\uc6a9\ud569\ub2c8\ub2e4."]}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"2\ub2e8\uacc4"}),"\uc5d0\uc11c \ucee4\uc2a4\ud140 Docker \uc774\ubbf8\uc9c0\ub97c \ube4c\ub4dc\ud55c \uacbd\uc6b0 \uc774\uc804 \ub2e8\uacc4\uc5d0\uc11c \uc5bb\uc740 Docker \uc774\ubbf8\uc9c0 URL\uacfc \ud0dc\uadf8\ub85c ",(0,s.jsx)(e.code,{children:"ai/training/raytrain-llama2-pretrain-trn1/llama2-pretrain-trn1-raycluster.yaml"})," \ud30c\uc77c\uc744 \uc5c5\ub370\uc774\ud2b8\ud558\uc138\uc694."]}),"\n",(0,s.jsx)(e.p,{children:"YAML \ud30c\uc77c\uc744 \uc5c5\ub370\uc774\ud2b8\ud55c \ud6c4(\ud544\uc694\ud55c \uacbd\uc6b0) \ub2e4\uc74c \uba85\ub839\uc744 \uc2e4\ud589\ud558\uc5ec EKS \ud074\ub7ec\uc2a4\ud130\uc5d0\uc11c KubeRay \ud074\ub7ec\uc2a4\ud130 \ud30c\ub4dc\ub97c \uc2dc\uc791\ud569\ub2c8\ub2e4:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"kubectl apply -f llama2-pretrain-trn1-raycluster.yaml\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\ud30c\ub4dc \uc0c1\ud0dc \ud655\uc778:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:'kubectl get pods -l "ray.io/cluster=kuberay-trn1"\n'})}),"\n",(0,s.jsx)(e.h3,{id:"volcano\ub97c-\uc0ac\uc6a9\ud55c-ray-\ud5e4\ub4dc-\ubc0f-\uc6cc\ucee4-\ud30c\ub4dc\uc758-gang-\uc2a4\ucf00\uc904\ub9c1",children:"Volcano\ub97c \uc0ac\uc6a9\ud55c Ray \ud5e4\ub4dc \ubc0f \uc6cc\ucee4 \ud30c\ub4dc\uc758 Gang \uc2a4\ucf00\uc904\ub9c1"}),"\n",(0,s.jsxs)(e.p,{children:["Llama2 \ud6c8\ub828\uc744 \uc704\ud55c Ray \ud074\ub7ec\uc2a4\ud130 \ubc30\ud3ec \ucee8\ud14d\uc2a4\ud2b8\uc5d0\uc11c Volcano\ub294 Ray \ud5e4\ub4dc \ubc0f \uc6cc\ucee4 \ud30c\ub4dc\uac00 \ud568\uaed8 \ud6a8\uc728\uc801\uc73c\ub85c \uc2a4\ucf00\uc904\ub9c1\ub418\ub3c4\ub85d \ud558\ub294 \ub370 \uc911\uc694\ud569\ub2c8\ub2e4.\n\uc77c\ubc18\uc801\uc73c\ub85c x86 \uc778\uc2a4\ud134\uc2a4\uc5d0\uc11c \uc2e4\ud589\ub418\ub294 Ray \ud5e4\ub4dc \ud30c\ub4dc\ub294 \ubd84\uc0b0 \ud6c8\ub828\uc744 \uc870\uc815\ud558\uace0, AWS Trainium (Trn1) \uc778\uc2a4\ud134\uc2a4\uc5d0\uc11c \uc2e4\ud589\ub418\ub294 \uc6cc\ucee4 \ud30c\ub4dc\ub294 \uacc4\uc0b0 \uc9d1\uc57d\uc801\uc778 \uc791\uc5c5\uc744 \uc218\ud589\ud569\ub2c8\ub2e4.\n",(0,s.jsx)(e.strong,{children:"Volcano\uc758 Gang \uc2a4\ucf00\uc904\ub9c1"}),"\uc744 \ud65c\uc6a9\ud558\uc5ec \ud5e4\ub4dc\uc640 \ubaa8\ub4e0 \uc6cc\ucee4 \ud30c\ub4dc\uc5d0 \ud544\uc694\ud55c \ub9ac\uc18c\uc2a4\uac00 \ub3d9\uc2dc\uc5d0 \ud560\ub2f9\ub418\ub3c4\ub85d \ud558\uc5ec \ubd84\uc0b0 \ud6c8\ub828 \uc791\uc5c5\uc774 \uc9c0\uc5f0 \uc5c6\uc774 \uc2dc\uc791\ub420 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,s.jsx)(e.p,{children:"\ub2e4\uc74c\uc740 Llama2 \ud6c8\ub828\uc744 \uc704\ud55c RayCluster\uc640 Volcano\ub97c \ud1b5\ud569\ud558\ub294 \uc608\uc81c \uad6c\uc131\uc785\ub2c8\ub2e4:"}),"\n",(0,s.jsxs)(e.admonition,{type:"info",children:[(0,s.jsxs)(e.p,{children:["Terraform \ube14\ub8e8\ud504\ub9b0\ud2b8\uac00 ",(0,s.jsx)(e.code,{children:"default"})," \ub124\uc784\uc2a4\ud398\uc774\uc2a4\uc5d0 ",(0,s.jsx)(e.code,{children:"fsx-claim"})," ",(0,s.jsx)(e.strong,{children:"PVC"}),"\ub97c \uc0dd\uc131\ud558\uae30 \ub54c\ubb38\uc5d0 \uc774 \ubc30\ud3ec\uc5d0 default \ub124\uc784\uc2a4\ud398\uc774\uc2a4\ub97c \uc0ac\uc6a9\ud569\ub2c8\ub2e4."]}),(0,s.jsx)(e.p,{children:"\uc804\uc6a9 \ub124\uc784\uc2a4\ud398\uc774\uc2a4\uc5d0 \ud074\ub7ec\uc2a4\ud130\ub97c \ubc30\ud3ec\ud558\ub824\uba74 PVC\uac00 \ub124\uc784\uc2a4\ud398\uc774\uc2a4\uc5d0 \ubc14\uc778\ub529\ub418\ubbc0\ub85c FSX for Lustre \ud30c\uc77c \uc2dc\uc2a4\ud15c\ub3c4 \ub3d9\uc77c\ud55c \ub124\uc784\uc2a4\ud398\uc774\uc2a4\uc5d0 \uc0dd\uc131\ub418\uc5b4\uc57c \ud569\ub2c8\ub2e4."})]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-yaml",children:"# Volcano\uc640 KubeRay \ubb38\uc11c: https://docs.ray.io/en/master/cluster/kubernetes/k8s-ecosystem/volcano.html\n---\napiVersion: scheduling.volcano.sh/v1beta1\nkind: Queue\nmetadata:\n  name: llama2-training-queue\n  namespace: default\nspec:\n  weight: 1\n  capability:\n    cpu: '500'\n    memory: 1500Gi\n\n---\napiVersion: ray.io/v1\nkind: RayCluster\nmetadata:\n  name: kuberay-trn1\n  namespace: default\n  labels:\n    ray.io/scheduler-name: volcano\n    volcano.sh/queue-name: llama2-training-queue\nspec:\n  rayVersion: 2.22.0\n  headGroupSpec:\n...\n...\n"})}),"\n",(0,s.jsx)(e.p,{children:"Running \uc0c1\ud0dc\uc758 ray-head \ud30c\ub4dc 1\uac1c\uc640 ray-worker \ud30c\ub4dc 2\uac1c\uac00 \ud45c\uc2dc\ub418\uc5b4\uc57c \ud569\ub2c8\ub2e4:"}),"\n",(0,s.jsx)(e.admonition,{type:"warning",children:(0,s.jsx)(e.p,{children:"\uc774\ubbf8\uc9c0\ub97c \uac00\uc838\uc624\uace0 \ud30c\ub4dc\uac00 \uc900\ube44\ub418\uae30\uae4c\uc9c0 \ucd5c\ub300 10\ubd84\uc774 \uc18c\uc694\ub420 \uc218 \uc788\uc2b5\ub2c8\ub2e4."})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"NAME                                    READY   STATUS    RESTARTS   AGE\nkuberay-trn1-head-67t46                 0/1     Pending   0          2m50s\nkuberay-trn1-worker-workergroup-fz8bs   0/1     Pending   0          2m50s\nkuberay-trn1-worker-workergroup-gpnxh   0/1     Pending   0          2m50s\n"})}),"\n",(0,s.jsx)(e.p,{children:"\ud5e4\ub4dc \ud30c\ub4dc\uc758 \ub85c\uadf8 \ud655\uc778:"}),"\n",(0,s.jsx)(e.p,{children:"Ray \ud5e4\ub4dc\uac00 \uc2dc\uc791\ub418\uc5c8\uace0 \ud074\ub7ec\uc2a4\ud130\uac00 \uc791\ub3d9 \uc911\uc784\uc744 \ub098\ud0c0\ub0b4\ub294 \uba54\uc2dc\uc9c0\ub97c \ucc3e\uc2b5\ub2c8\ub2e4."}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"kubectl logs kuberay-trn1-head-xxxxx\n"})}),"\n",(0,s.jsx)(e.h3,{id:"ray-\ub300\uc2dc\ubcf4\ub4dc-\uc811\uadfc-\ud3ec\ud2b8-\ud3ec\uc6cc\ub529",children:"Ray \ub300\uc2dc\ubcf4\ub4dc \uc811\uadfc (\ud3ec\ud2b8 \ud3ec\uc6cc\ub529):"}),"\n",(0,s.jsx)(e.p,{children:"Ray \ub300\uc2dc\ubcf4\ub4dc\ub294 \ud074\ub7ec\uc2a4\ud130 \uc0c1\ud0dc\uc640 \uc791\uc5c5 \uc9c4\ud589 \uc0c1\ud669\uc5d0 \ub300\ud55c \uadc0\uc911\ud55c \uc778\uc0ac\uc774\ud2b8\ub97c \uc81c\uacf5\ud569\ub2c8\ub2e4. \uc811\uadfc\ud558\ub824\uba74:"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\ud3ec\ud2b8 \ud3ec\uc6cc\ub529:"})}),"\n",(0,s.jsx)(e.p,{children:"\ub85c\uceec \uba38\uc2e0\uc5d0\uc11c \ud074\ub7ec\uc2a4\ud130 \ub0b4 \ud5e4\ub4dc \ud30c\ub4dc\ub85c Ray \ub300\uc2dc\ubcf4\ub4dc \ud3ec\ud2b8(8265)\ub97c \ud3ec\uc6cc\ub529\ud569\ub2c8\ub2e4."}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"kubectl port-forward service/kuberay-trn1-head-svc 8265:8265\n"})}),"\n",(0,s.jsxs)(e.p,{children:["\ube0c\ub77c\uc6b0\uc800\ub97c \uc5f4\uace0 \uc6f9 \ube0c\ub77c\uc6b0\uc800\uc5d0\uc11c ",(0,s.jsx)(e.a,{href:"http://localhost:8265",children:"http://localhost:8265"}),"\ub85c \uc774\ub3d9\ud558\uc5ec \ub300\uc2dc\ubcf4\ub4dc\ub97c \ud655\uc778\ud569\ub2c8\ub2e4."]}),"\n",(0,s.jsx)(e.h2,{id:"4-fsx-\uacf5\uc720-\ud30c\uc77c-\uc2dc\uc2a4\ud15c\uc5d0\uc11c-\uc0ac\uc804-\ud6c8\ub828-\ub370\uc774\ud130-\uc0dd\uc131",children:"4. FSx \uacf5\uc720 \ud30c\uc77c \uc2dc\uc2a4\ud15c\uc5d0\uc11c \uc0ac\uc804 \ud6c8\ub828 \ub370\uc774\ud130 \uc0dd\uc131"}),"\n",(0,s.jsx)(e.admonition,{type:"warning",children:(0,s.jsx)(e.p,{children:"\ub370\uc774\ud130 \uc0dd\uc131 \ub2e8\uacc4\ub294 FSx for Lustre\uc5d0 \ubaa8\ub4e0 \ub370\uc774\ud130\ub97c \uc0dd\uc131\ud558\ub294 \ub370 \ucd5c\ub300 20\ubd84\uc774 \uc18c\uc694\ub420 \uc218 \uc788\uc2b5\ub2c8\ub2e4."})}),"\n",(0,s.jsx)(e.p,{children:"\uc774 \ub2e8\uacc4\uc5d0\uc11c\ub294 KubeRay\uc758 Job \uc0ac\uc591\uc744 \ud65c\uc6a9\ud558\uc5ec \ub370\uc774\ud130 \uc0dd\uc131 \ud504\ub85c\uc138\uc2a4\ub97c \uc2dc\uc791\ud569\ub2c8\ub2e4. Ray \ud5e4\ub4dc \ud30c\ub4dc\uc5d0 \uc9c1\uc811 \uc791\uc5c5\uc744 \uc81c\ucd9c\ud569\ub2c8\ub2e4. \uc774 \uc791\uc5c5\uc740 \ubaa8\ub378\uc744 \ud6c8\ub828\ud560 \uc900\ube44\ub97c \ud558\ub294 \ub370 \ud575\uc2ec\uc801\uc778 \uc5ed\ud560\uc744 \ud569\ub2c8\ub2e4."}),"\n",(0,s.jsxs)(e.p,{children:["\uae30\uc874 RayCluster\uc5d0 \uc791\uc5c5\uc744 \uc81c\ucd9c\ud558\uae30 \uc704\ud574 ",(0,s.jsx)(e.code,{children:"clusterSelector"}),"\ub97c \uc0ac\uc6a9\ud558\ub294 \uc544\ub798 ",(0,s.jsx)(e.code,{children:"RayJob"})," \uc815\uc758 \uc0ac\uc591\uc744 \ud655\uc778\ud558\uc138\uc694."]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-yaml",children:'# ----------------------------------------------------------------------------\n# RayJob: llama2-generate-pretraining-test-data\n#\n# \uc124\uba85:\n# \uc774 RayJob\uc740 Llama2 \ubaa8\ub378 \ud6c8\ub828\uc5d0 \ud544\uc694\ud55c \uc0ac\uc804 \ud6c8\ub828 \ud14c\uc2a4\ud2b8 \ub370\uc774\ud130\ub97c \uc0dd\uc131\ud558\ub294\n# \uc5ed\ud560\uc744 \ud569\ub2c8\ub2e4. \uc9c0\uc815\ub41c \ub370\uc774\ud130\uc14b\uc5d0\uc11c \ub370\uc774\ud130\ub97c \uc18c\uc2f1\ud558\uace0 \ucc98\ub9ac\ud558\uc5ec \ud6c4\uc18d \ud6c8\ub828 \ub2e8\uacc4\uc5d0\uc11c\n# \uc0ac\uc6a9\ud560 \uc218 \uc788\ub3c4\ub85d \uc900\ube44\ud569\ub2c8\ub2e4. \uc774 \uc791\uc5c5\uc740 \uc774\ub7ec\ud55c \ub370\uc774\ud130 \uc900\ube44 \ub2e8\uacc4\ub97c \uc218\ud589\ud558\ub294\n# Python \uc2a4\ud06c\ub9bd\ud2b8(`get_dataset.py`)\ub97c \uc2e4\ud589\ud569\ub2c8\ub2e4.\n\n# \uc0ac\uc6a9\ubc95:\n# `kubectl apply -f 1-llama2-pretrain-trn1-rayjob-create-test-data.yaml`\uc744 \uc0ac\uc6a9\ud558\uc5ec\n# Kubernetes \ud074\ub7ec\uc2a4\ud130\uc5d0 \uc774 \uad6c\uc131\uc744 \uc801\uc6a9\ud569\ub2c8\ub2e4.\n# Ray \ud074\ub7ec\uc2a4\ud130(`kuberay-trn1`)\uac00 \uc9c0\uc815\ub41c \ub124\uc784\uc2a4\ud398\uc774\uc2a4\uc5d0\uc11c \uc2e4\ud589 \uc911\uc774\uace0 \uc811\uadfc \uac00\ub2a5\ud55c\uc9c0 \ud655\uc778\ud558\uc138\uc694.\n# ----------------------------------------------------------------------------\n\napiVersion: ray.io/v1\nkind: RayJob\nmetadata:\n  name: llama2-generate-pretraining-test-data\n  namespace: default\nspec:\n  submissionMode: K8sJobMode\n  entrypoint: "python3 get_dataset.py"\n  runtimeEnvYAML: |\n    working_dir: /llama2_pretrain\n    env_vars:\n      PYTHONUNBUFFERED: \'0\'\n    resources:\n      requests:\n        cpu: "6"\n        memory: "30Gi"\n  clusterSelector:\n    ray.io/cluster: kuberay-trn1\n    rayClusterNamespace: default  # RayCluster\uac00 \ubc30\ud3ec\ub41c \ub124\uc784\uc2a4\ud398\uc774\uc2a4\ub85c \ub300\uccb4\n  ttlSecondsAfterFinished: 60  # \uc644\ub8cc \ud6c4 \ud30c\ub4dc\uc758 \uc0dd\uc874 \uc2dc\uac04(\ucd08)\n'})}),"\n",(0,s.jsx)(e.p,{children:"\ub2e4\uc74c \uba85\ub839\uc744 \uc2e4\ud589\ud558\uc5ec \ud14c\uc2a4\ud2b8 \ub370\uc774\ud130 \uc0dd\uc131 Ray \uc791\uc5c5\uc744 \uc2e4\ud589\ud569\ub2c8\ub2e4:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"kubectl apply -f 1-llama2-pretrain-trn1-rayjob-create-test-data.yaml\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\ub0b4\ubd80\uc5d0\uc11c \uc77c\uc5b4\ub098\ub294 \uc77c:"})}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"\uc791\uc5c5 \uc2dc\uc791:"})," kubectl\uc744 \uc0ac\uc6a9\ud558\uc5ec KubeRay \uc791\uc5c5 \uc0ac\uc591\uc744 \uc81c\ucd9c\ud569\ub2c8\ub2e4. ",(0,s.jsx)(e.code,{children:"kuberay-trn1"})," \ud074\ub7ec\uc2a4\ud130\uc758 Ray \ud5e4\ub4dc \ud30c\ub4dc\uac00 \uc774 \uc791\uc5c5\uc744 \uc218\uc2e0\ud558\uace0 \uc2e4\ud589\ud569\ub2c8\ub2e4."]}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"\ub370\uc774\ud130 \uc0dd\uc131:"})," \uc791\uc5c5\uc774 ",(0,s.jsx)(e.code,{children:"ai/training/raytrain-llama2-pretrain-trn1/llama2_pretrain/get_dataset.py"}),' \uc2a4\ud06c\ub9bd\ud2b8\ub97c \uc2e4\ud589\ud558\uba70, Hugging Face datasets \ub77c\uc774\ube0c\ub7ec\ub9ac\uc758 \uae30\ub2a5\uc744 \ud65c\uc6a9\ud558\uc5ec \uc6d0\uc2dc \uc601\uc5b4 Wikipedia \ub370\uc774\ud130\uc14b("wikicorpus")\uc744 \uac00\uc838\uc624\uace0 \ucc98\ub9ac\ud569\ub2c8\ub2e4.']}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"\ud1a0\ud070\ud654:"})," \uc2a4\ud06c\ub9bd\ud2b8\ub294 Hugging Face transformers\uc758 \uc0ac\uc804 \ud6c8\ub828\ub41c \ud1a0\ud06c\ub098\uc774\uc800\ub97c \uc0ac\uc6a9\ud558\uc5ec \ud14d\uc2a4\ud2b8\ub97c \ud1a0\ud070\ud654\ud569\ub2c8\ub2e4. \ud1a0\ud070\ud654\ub294 \ubaa8\ub378\uc774 \uc774\ud574\ud560 \uc218 \uc788\ub3c4\ub85d \ud14d\uc2a4\ud2b8\ub97c \ub354 \uc791\uc740 \ub2e8\uc704(\ub2e8\uc5b4 \ub610\ub294 \ud558\uc704 \ub2e8\uc5b4)\ub85c \ubd84\ud574\ud569\ub2c8\ub2e4."]}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"\ub370\uc774\ud130 \uc800\uc7a5:"})," \ud1a0\ud070\ud654\ub41c \ub370\uc774\ud130\ub294 \uae54\ub054\ud558\uac8c \uc815\ub9ac\ub418\uc5b4 FSx for Lustre \uacf5\uc720 \ud30c\uc77c \uc2dc\uc2a4\ud15c \ub0b4\uc758 \ud2b9\uc815 \ub514\ub809\ud1a0\ub9ac(",(0,s.jsx)(e.code,{children:"/shared/wikicorpus_llama2_7B_tokenized_4k/"}),")\uc5d0 \uc800\uc7a5\ub429\ub2c8\ub2e4. \uc774\ub97c \ud1b5\ud574 \ud074\ub7ec\uc2a4\ud130\uc758 \ubaa8\ub4e0 \uc6cc\ucee4 \ub178\ub4dc\uac00 \uc0ac\uc804 \ud6c8\ub828 \uc911\uc5d0 \uc774 \ud45c\uc900\ud654\ub41c \ub370\uc774\ud130\uc5d0 \uc27d\uac8c \uc811\uadfc\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,s.jsx)(e.h3,{id:"\uc791\uc5c5-\ubaa8\ub2c8\ud130\ub9c1",children:"\uc791\uc5c5 \ubaa8\ub2c8\ud130\ub9c1:"}),"\n",(0,s.jsx)(e.p,{children:"\uc791\uc5c5 \uc9c4\ud589 \uc0c1\ud669\uc744 \ucd94\uc801\ud558\ub824\uba74:"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Ray \ub300\uc2dc\ubcf4\ub4dc"}),": Ray \ud5e4\ub4dc \ud30c\ub4dc\uc758 IP \uc8fc\uc18c\uc640 \ud3ec\ud2b8 8265\ub97c \ud1b5\ud574 \uc811\uadfc\ud560 \uc218 \uc788\ub294 Ray \ub300\uc2dc\ubcf4\ub4dc\ub85c \uc774\ub3d9\ud569\ub2c8\ub2e4. \uc791\uc5c5 \uc0c1\ud0dc\uc5d0 \ub300\ud55c \uc2e4\uc2dc\uac04 \uc5c5\ub370\uc774\ud2b8\ub97c \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"\ub370\uc774\ud130\uc14b \uc900\ube44",src:a(27200).A+"",width:"3022",height:"934"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"\ub370\uc774\ud130\uc14b \uc900\ube44",src:a(8411).A+"",width:"3022",height:"934"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"\ub370\uc774\ud130\uc14b \uc900\ube44",src:a(3218).A+"",width:"3022",height:"1642"})}),"\n",(0,s.jsx)(e.p,{children:"\ub610\ub294 \ud130\ubbf8\ub110\uc5d0\uc11c \ub2e4\uc74c \uba85\ub839\uc744 \uc0ac\uc6a9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"kubectl get pods | grep llama2\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\ucd9c\ub825:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"llama2-generate-pretraining-test-data-g6ccl   1/1     Running   0             5m5s\n"})}),"\n",(0,s.jsx)(e.p,{children:"\ub2e4\uc74c \uc2a4\ud06c\ub9b0\uc0f7\uc740 Lens K8s IDE\uc5d0\uc11c \ud30c\ub4dc\uc758 \ub85c\uadf8\ub97c \ubcf4\uc5ec\uc90d\ub2c8\ub2e4."}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"\ub370\uc774\ud130\uc14b \uc900\ube44",src:a(27109).A+"",width:"3022",height:"1628"})}),"\n",(0,s.jsx)(e.h2,{id:"5-\uc0ac\uc804-\ucef4\ud30c\uc77c-\uc791\uc5c5-\uc2e4\ud589-\ucd5c\uc801\ud654-\ub2e8\uacc4",children:"5. \uc0ac\uc804 \ucef4\ud30c\uc77c \uc791\uc5c5 \uc2e4\ud589 (\ucd5c\uc801\ud654 \ub2e8\uacc4)"}),"\n",(0,s.jsx)(e.admonition,{type:"info",children:(0,s.jsx)(e.p,{children:"\uc0ac\uc804 \ucef4\ud30c\uc77c \uc791\uc5c5\uc740 \ucd5c\ub300 6\ubd84\uc774 \uc18c\uc694\ub420 \uc218 \uc788\uc2b5\ub2c8\ub2e4"})}),"\n",(0,s.jsxs)(e.p,{children:["\uc2e4\uc81c \ud6c8\ub828\uc744 \uc2dc\uc791\ud558\uae30 \uc804\uc5d0 Neuron SDK\uc5d0 \ub9de\uac8c \ubaa8\ub378\uc744 \ucd5c\uc801\ud654\ud558\uae30 \uc704\ud55c \uc0ac\uc804 \ucef4\ud30c\uc77c \ub2e8\uacc4\ub97c \uc218\ud589\ud569\ub2c8\ub2e4. \uc774\ub97c \ud1b5\ud574 \ubaa8\ub378\uc774 ",(0,s.jsx)(e.code,{children:"Trn1"})," \uc778\uc2a4\ud134\uc2a4\uc5d0\uc11c \ub354 \ud6a8\uc728\uc801\uc73c\ub85c \uc2e4\ud589\ub429\ub2c8\ub2e4. \uc774 \uc2a4\ud06c\ub9bd\ud2b8\ub294 Neuron SDK\ub97c \uc0ac\uc6a9\ud558\uc5ec \ubaa8\ub378\uc758 \uc5f0\uc0b0 \uadf8\ub798\ud504\ub97c \ucef4\ud30c\uc77c\ud558\uace0 \ucd5c\uc801\ud654\ud558\uc5ec Trn1 \ud504\ub85c\uc138\uc11c\uc5d0\uc11c \ud6a8\uc728\uc801\uc778 \ud6c8\ub828\uc744 \uc704\ud574 \uc900\ube44\ud569\ub2c8\ub2e4."]}),"\n",(0,s.jsxs)(e.p,{children:["\uc774 \ub2e8\uacc4\uc5d0\uc11c\ub294 Neuron SDK\uac00 ",(0,s.jsx)(e.code,{children:"Llama2"})," \uc0ac\uc804 \ud6c8\ub828\uacfc \uad00\ub828\ub41c \uc5f0\uc0b0 \uadf8\ub798\ud504\ub97c \uc2dd\ubcc4, \ucef4\ud30c\uc77c \ubc0f \uce90\uc2dc\ud558\ub294 \uc0ac\uc804 \ucef4\ud30c\uc77c \uc791\uc5c5\uc744 \uc2e4\ud589\ud569\ub2c8\ub2e4."]}),"\n",(0,s.jsxs)(e.p,{children:["\uc0ac\uc804 \ucef4\ud30c\uc77c \uc791\uc5c5\uc744 \uc2e4\ud589\ud558\uae30 \uc704\ud55c \uc544\ub798 ",(0,s.jsx)(e.code,{children:"RayJob"})," \uc815\uc758 \uc0ac\uc591\uc744 \ud655\uc778\ud558\uc138\uc694:"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-yaml",children:"# ----------------------------------------------------------------------------\n# RayJob: llama2-precompilation-job\n#\n# \uc124\uba85:\n# \uc774 RayJob\uc740 Llama2 \ubaa8\ub378 \ud6c8\ub828\uc5d0 \ud544\uc694\ud55c \uc0ac\uc804 \ucef4\ud30c\uc77c \ub2e8\uacc4\ub97c \ub2f4\ub2f9\ud569\ub2c8\ub2e4.\n# AWS Neuron \uc7a5\uce58\ub97c \uc0ac\uc6a9\ud558\uc5ec \ubaa8\ub378\uc744 \ubcd1\ub82c\ub85c \ucef4\ud30c\uc77c\ud558\uae30 \uc704\ud574 `--neuron_parallel_compile`\n# \uc635\uc158\uacfc \ud568\uaed8 Python \uc2a4\ud06c\ub9bd\ud2b8(`ray_train_llama2.py`)\ub97c \uc2e4\ud589\ud569\ub2c8\ub2e4. \uc774 \ub2e8\uacc4\ub294\n# AWS \uc778\ud504\ub77c\uc5d0\uc11c \ud6a8\uc728\uc801\uc778 \ud6c8\ub828\uc744 \uc704\ud574 \ubaa8\ub378\uc744 \ucd5c\uc801\ud654\ud558\ub294 \ub370 \uc911\uc694\ud569\ub2c8\ub2e4.\n\n# \uc0ac\uc6a9\ubc95:\n# `kubectl apply -f 2-llama2-pretrain-trn1-rayjob-precompilation.yaml`\uc744 \uc0ac\uc6a9\ud558\uc5ec\n# Kubernetes \ud074\ub7ec\uc2a4\ud130\uc5d0 \uc774 \uad6c\uc131\uc744 \uc801\uc6a9\ud569\ub2c8\ub2e4.\n# Ray \ud074\ub7ec\uc2a4\ud130(`kuberay-trn1`)\uac00 \uc9c0\uc815\ub41c \ub124\uc784\uc2a4\ud398\uc774\uc2a4\uc5d0\uc11c \uc2e4\ud589 \uc911\uc774\uace0 \uc811\uadfc \uac00\ub2a5\ud55c\uc9c0 \ud655\uc778\ud558\uc138\uc694.\n# ----------------------------------------------------------------------------\n\n---\napiVersion: ray.io/v1\nkind: RayJob\nmetadata:\n  name: llama2-precompilation-job\n  namespace: default\nspec:\n  submissionMode: K8sJobMode\n  entrypoint: \"NEURON_NUM_DEVICES=32 python3 /llama2_pretrain/ray_train_llama2.py --neuron_parallel_compile\"\n  runtimeEnvYAML: |\n    working_dir: /llama2_pretrain\n    env_vars:\n      PYTHONUNBUFFERED: '0'\n  clusterSelector:\n    ray.io/cluster: kuberay-trn1\n    rayClusterNamespace: default  # RayCluster\uac00 \ubc30\ud3ec\ub41c \ub124\uc784\uc2a4\ud398\uc774\uc2a4\ub85c \ub300\uccb4\n  ttlSecondsAfterFinished: 60  # \uc644\ub8cc \ud6c4 \ud30c\ub4dc\uc758 \uc0dd\uc874 \uc2dc\uac04(\ucd08)\n"})}),"\n",(0,s.jsx)(e.p,{children:"\ub2e4\uc74c \uba85\ub839\uc744 \uc2e4\ud589\ud558\uc5ec \uc0ac\uc804 \ucef4\ud30c\uc77c \uc791\uc5c5\uc744 \uc2e4\ud589\ud569\ub2c8\ub2e4:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"kubectl apply -f 2-llama2-pretrain-trn1-rayjob-precompilation.yaml\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\ud655\uc778 \ub2e8\uacc4:"})}),"\n",(0,s.jsx)(e.p,{children:"\uc791\uc5c5 \uc9c4\ud589 \uc0c1\ud669\uc744 \ubaa8\ub2c8\ud130\ub9c1\ud558\uace0 \uc62c\ubc14\ub974\uac8c \uc2e4\ud589\ub418\uace0 \uc788\ub294\uc9c0 \ud655\uc778\ud558\ub824\uba74 \ub2e4\uc74c \uba85\ub839\uacfc \ub3c4\uad6c\ub97c \uc0ac\uc6a9\ud558\uc138\uc694:"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Ray \ub300\uc2dc\ubcf4\ub4dc:"})," Ray \ud5e4\ub4dc \ud30c\ub4dc\uc758 IP \uc8fc\uc18c\uc640 \ud3ec\ud2b8 ",(0,s.jsx)(e.code,{children:"8265"}),"\ub97c \ud1b5\ud574 Ray \ub300\uc2dc\ubcf4\ub4dc\uc5d0 \uc811\uadfc\ud558\uc5ec \uc791\uc5c5 \uc0c1\ud0dc\uc5d0 \ub300\ud55c \uc2e4\uc2dc\uac04 \uc5c5\ub370\uc774\ud2b8\ub97c \ud655\uc778\ud569\ub2c8\ub2e4."]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"\uc0ac\uc804 \ucef4\ud30c\uc77c \uc9c4\ud589 \uc0c1\ud669",src:a(12535).A+"",width:"3814",height:"1818"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"\uc0ac\uc804 \ucef4\ud30c\uc77c \uc9c4\ud589 \uc0c1\ud669",src:a(28252).A+"",width:"3814",height:"1818"})}),"\n",(0,s.jsx)(e.p,{children:"\ub2e4\uc74c \uc2a4\ud06c\ub9b0\uc0f7\uc740 Lens K8s IDE\uc5d0\uc11c \ud30c\ub4dc\uc758 \ub85c\uadf8\ub97c \ubcf4\uc5ec\uc90d\ub2c8\ub2e4."}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"\uc0ac\uc804 \ucef4\ud30c\uc77c \uc9c4\ud589 \uc0c1\ud669",src:a(41317).A+"",width:"1922",height:"907"})}),"\n",(0,s.jsx)(e.h2,{id:"6-\ubd84\uc0b0-\uc0ac\uc804-\ud6c8\ub828-\uc791\uc5c5-\uc2e4\ud589",children:"6. \ubd84\uc0b0 \uc0ac\uc804 \ud6c8\ub828 \uc791\uc5c5 \uc2e4\ud589"}),"\n",(0,s.jsx)(e.admonition,{type:"warning",children:(0,s.jsx)(e.p,{children:"\uc774 \uc791\uc5c5\uc740 \uc5ec\ub7ec \uc2dc\uac04 \ub3d9\uc548 \uc2e4\ud589\ub420 \uc218 \uc788\uc73c\ubbc0\ub85c \uc190\uc2e4\uc774 \uac10\uc18c\ud558\uace0 \ubaa8\ub378\uc774 \ud559\uc2b5\ud558\uace0 \uc788\uc74c\uc744 \ud655\uc778\ud55c \ud6c4 Ctrl+C\ub97c \uc0ac\uc6a9\ud558\uc5ec \uc791\uc5c5\uc744 \ucde8\uc18c\ud574\ub3c4 \ub429\ub2c8\ub2e4."})}),"\n",(0,s.jsx)(e.p,{children:"\uc774\uc81c Llama 2 \ubaa8\ub378\uc758 \uc2e4\uc81c \ud6c8\ub828\uc744 \uc2dc\uc791\ud560 \uc900\ube44\uac00 \ub418\uc5c8\uc2b5\ub2c8\ub2e4! \uc774 \ub2e8\uacc4\ub294 RayJob\uc744 \uc0ac\uc6a9\ud558\uc5ec \ubd84\uc0b0 \uc0ac\uc804 \ud6c8\ub828 \uc791\uc5c5\uc744 \uc2e4\ud589\ud558\ub294 \uac83\uc744 \ud3ec\ud568\ud569\ub2c8\ub2e4. \uc774 \uc791\uc5c5\uc740 AWS Neuron \uc7a5\uce58\ub97c \ud65c\uc6a9\ud558\uc5ec \uc900\ube44\ub41c \ub370\uc774\ud130\uc14b\uc73c\ub85c \ubaa8\ub378\uc744 \ud6a8\uc728\uc801\uc73c\ub85c \ud6c8\ub828\ud569\ub2c8\ub2e4."}),"\n",(0,s.jsxs)(e.p,{children:["\uc0ac\uc804 \ud6c8\ub828 \uc791\uc5c5\uc744 \uc2e4\ud589\ud558\uae30 \uc704\ud55c \uc544\ub798 ",(0,s.jsx)(e.code,{children:"RayJob"})," \uc815\uc758 \uc0ac\uc591\uc744 \ud655\uc778\ud558\uc138\uc694:"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-yaml",children:"# ----------------------------------------------------------------------------\n# RayJob: llama2-pretraining-job\n#\n# \uc124\uba85:\n# \uc774 RayJob\uc740 Llama2 \ubaa8\ub378\uc758 \uc8fc\uc694 \uc0ac\uc804 \ud6c8\ub828 \ub2e8\uacc4\ub97c \ub2f4\ub2f9\ud569\ub2c8\ub2e4.\n# AWS Neuron \uc7a5\uce58\ub97c \uc0ac\uc6a9\ud558\uc5ec \uc0ac\uc804 \ud6c8\ub828\uc744 \uc218\ud589\ud558\uae30 \uc704\ud574 Python \uc2a4\ud06c\ub9bd\ud2b8(`ray_train_llama2.py`)\ub97c\n# \uc2e4\ud589\ud569\ub2c8\ub2e4. \uc774 \ub2e8\uacc4\ub294 \uc900\ube44\ub41c \ub370\uc774\ud130\uc14b\uc73c\ub85c \uc5b8\uc5b4 \ubaa8\ub378\uc744 \ud6c8\ub828\ud558\ub294 \ub370 \uc911\uc694\ud569\ub2c8\ub2e4.\n\n# \uc0ac\uc6a9\ubc95:\n# `kubectl apply -f 3-llama2-pretrain-trn1-rayjob.yaml`\uc744 \uc0ac\uc6a9\ud558\uc5ec\n# Kubernetes \ud074\ub7ec\uc2a4\ud130\uc5d0 \uc774 \uad6c\uc131\uc744 \uc801\uc6a9\ud569\ub2c8\ub2e4.\n# Ray \ud074\ub7ec\uc2a4\ud130(`kuberay-trn1`)\uac00 \uc9c0\uc815\ub41c \ub124\uc784\uc2a4\ud398\uc774\uc2a4\uc5d0\uc11c \uc2e4\ud589 \uc911\uc774\uace0 \uc811\uadfc \uac00\ub2a5\ud55c\uc9c0 \ud655\uc778\ud558\uc138\uc694.\n# ----------------------------------------------------------------------------\n\n---\napiVersion: ray.io/v1\nkind: RayJob\nmetadata:\n  name: llama2-pretraining-job\n  namespace: default\nspec:\n  submissionMode: K8sJobMode\n  entrypoint: \"NEURON_NUM_DEVICES=32 python3 ray_train_llama2.py\"\n  runtimeEnvYAML: |\n    working_dir: /llama2_pretrain\n    env_vars:\n      PYTHONUNBUFFERED: '0'\n  clusterSelector:\n    ray.io/cluster: kuberay-trn1\n    rayClusterNamespace: default  # RayCluster\uac00 \ubc30\ud3ec\ub41c \ub124\uc784\uc2a4\ud398\uc774\uc2a4\ub85c \ub300\uccb4\n  shutdownAfterJobFinishes: true\n  activeDeadlineSeconds: 600   # \uc791\uc5c5\uc774 600\ucd08(10\ubd84)\ubcf4\ub2e4 \uc624\ub798 \uc2e4\ud589\ub418\uba74 \uc885\ub8cc\ub429\ub2c8\ub2e4\n  ttlSecondsAfterFinished: 60  # \uc644\ub8cc \ud6c4 \ud30c\ub4dc\uc758 \uc0dd\uc874 \uc2dc\uac04(\ucd08)\n"})}),"\n",(0,s.jsx)(e.p,{children:"\ub2e4\uc74c \uba85\ub839\uc744 \uc2e4\ud589\ud558\uc5ec \uc0ac\uc804 \ud6c8\ub828 \uc791\uc5c5\uc744 \uc2e4\ud589\ud569\ub2c8\ub2e4:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"kubectl apply -f 3-llama2-pretrain-trn1-rayjob.yaml\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\uc9c4\ud589 \uc0c1\ud669 \ubaa8\ub2c8\ud130\ub9c1:"})}),"\n",(0,s.jsx)(e.p,{children:"Ray \ub300\uc2dc\ubcf4\ub4dc\ub97c \uc0ac\uc6a9\ud558\uac70\ub098 \ud130\ubbf8\ub110\uc5d0 \ucd9c\ub825\ub418\ub294 \ub85c\uadf8\ub97c \uad00\ucc30\ud558\uc5ec \ud6c8\ub828 \uc791\uc5c5\uc758 \uc9c4\ud589 \uc0c1\ud669\uc744 \ubaa8\ub2c8\ud130\ub9c1\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \ubaa8\ub378\uc774 \uc5bc\ub9c8\ub098 \uc798 \ud559\uc2b5\ud558\uace0 \uc788\ub294\uc9c0 \ud3c9\uac00\ud558\uae30 \uc704\ud574 \ud6c8\ub828 \uc190\uc2e4, \ud559\uc2b5\ub960 \ubc0f \uae30\ud0c0 \uba54\ud2b8\ub9ad\uacfc \uac19\uc740 \uc815\ubcf4\ub97c \ucc3e\uc544\ubcf4\uc138\uc694."}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"\ud6c8\ub828 \uc9c4\ud589 \uc0c1\ud669",src:a(9705).A+"",width:"3814",height:"1818"})}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Ray \ub300\uc2dc\ubcf4\ub4dc:"})," Ray \ud5e4\ub4dc \ud30c\ub4dc\uc758 IP \uc8fc\uc18c\uc640 \ud3ec\ud2b8 8265\ub97c \ud1b5\ud574 Ray \ub300\uc2dc\ubcf4\ub4dc\uc5d0 \uc811\uadfc\ud558\uc5ec \uc791\uc5c5 \uc0c1\ud0dc\uc5d0 \ub300\ud55c \uc2e4\uc2dc\uac04 \uc5c5\ub370\uc774\ud2b8\ub97c \ud655\uc778\ud569\ub2c8\ub2e4."]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"\ud6c8\ub828 \uc9c4\ud589 \uc0c1\ud669 Ray \ub300\uc2dc\ubcf4\ub4dc",src:a(61522).A+"",width:"3814",height:"1818"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"\ud6c8\ub828 \uc9c4\ud589 \uc0c1\ud669 Ray \ub300\uc2dc\ubcf4\ub4dc",src:a(83067).A+"",width:"3814",height:"1818"})}),"\n",(0,s.jsx)(e.h3,{id:"\uc815\ub9ac",children:"\uc815\ub9ac"}),"\n",(0,s.jsx)(e.p,{children:"\uc774 \uc194\ub8e8\uc158\uc744 \uc0ac\uc6a9\ud558\uc5ec \uc0dd\uc131\ub41c \ub9ac\uc18c\uc2a4\ub97c \uc81c\uac70\ud558\ub824\uba74 \uc815\ub9ac \uc2a4\ud06c\ub9bd\ud2b8\ub97c \uc2e4\ud589\ud569\ub2c8\ub2e4:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"# RayCluster \ub9ac\uc18c\uc2a4 \uc0ad\uc81c:\ncd ai/training/raytrain-llama2-pretrain-trn1\nkubectl delete -f llama2-pretrain-trn1-raycluster.yaml\n\n# EKS \ud074\ub7ec\uc2a4\ud130 \ubc0f \uad00\ub828 \ub9ac\uc18c\uc2a4 \uc815\ub9ac:\ncd ai-on-eks/infra/trainium-inferentia\n./cleanup.sh\n"})})]})}function u(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(h,{...n})}):h(n)}},42450(n,e,a){a.d(e,{A:()=>x});var r=a(96540),s=a(5556),i=a.n(s),l=a(34164);const t="collapsibleContent_q3kw",c="header_QCEw",d="icon_PckA",o="content_qLC1",h="expanded_iGsi";var u=a(74848);function p({children:n,header:e}){const[a,s]=(0,r.useState)(!1);return(0,u.jsxs)("div",{className:t,children:[(0,u.jsxs)("div",{className:(0,l.A)(c,{[h]:a}),onClick:()=>{s(!a)},children:[e,(0,u.jsx)("span",{className:(0,l.A)(d,{[h]:a}),children:a?"\ud83d\udc47":"\ud83d\udc48"})]}),a&&(0,u.jsx)("div",{className:o,children:n})]})}p.propTypes={children:i().node.isRequired,header:i().node.isRequired};const x=p},60863(n,e,a){a.d(e,{A:()=>r});const r=a.p+"assets/images/Llama2-RayTrain-Trn1-d93433eba0c8e8e7c617a9fa1b17f249.png"},12535(n,e,a){a.d(e,{A:()=>r});const r=a.p+"assets/images/raytrain-precomplilation1-777f1caf778704cc0021889c8968ec58.png"},28252(n,e,a){a.d(e,{A:()=>r});const r=a.p+"assets/images/raytrain-precomplilation2-705da082daec14cb61c6b27f566e0dab.png"},41317(n,e,a){a.d(e,{A:()=>r});const r=a.p+"assets/images/raytrain-precomplilation3-fe1f06d03638e88e965c106514105218.png"},27109(n,e,a){a.d(e,{A:()=>r});const r=a.p+"assets/images/raytrain-testdata-lens-7a27be9b9fca7ff7389068a5e8e1f06b.png"},27200(n,e,a){a.d(e,{A:()=>r});const r=a.p+"assets/images/raytrain-testdata-raydash1-b4670a064fa2d403d5710ccbaf639df7.png"},8411(n,e,a){a.d(e,{A:()=>r});const r=a.p+"assets/images/raytrain-testdata-raydash2-d587f6edbefc961341e179b801414f5d.png"},3218(n,e,a){a.d(e,{A:()=>r});const r=a.p+"assets/images/raytrain-testdata-raydash3-09f961034e80ed2f517469333f748079.png"},9705(n,e,a){a.d(e,{A:()=>r});const r=a.p+"assets/images/raytrain-training-progress1-a0075f05772879597fe736982d834b18.png"},61522(n,e,a){a.d(e,{A:()=>r});const r=a.p+"assets/images/raytrain-training-progress2-52bb1ff83523781d2048dbf00670e901.png"},83067(n,e,a){a.d(e,{A:()=>r});const r=a.p+"assets/images/raytrain-training-progress3-b614686ce3efb30717a77a20ddfe39a6.png"},28453(n,e,a){a.d(e,{R:()=>l,x:()=>t});var r=a(96540);const s={},i=r.createContext(s);function l(n){const e=r.useContext(i);return r.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function t(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:l(n.components),r.createElement(i.Provider,{value:e},n.children)}}}]);