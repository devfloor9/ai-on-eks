<!doctype html>
<html lang="ko-KR" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-infra/misc/emr-spark-rapids" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.0">
<title data-rh="true">EKS 기반 EMR NVIDIA RAPIDS Accelerator for Apache Spark | AI on EKS</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://awslabs.github.io/ai-on-eks/ko/docs/infra/misc/emr-spark-rapids"><meta data-rh="true" property="og:locale" content="ko_KR"><meta data-rh="true" property="og:locale:alternate" content="en_US"><meta data-rh="true" name="docusaurus_locale" content="ko"><meta data-rh="true" name="docsearch:language" content="ko"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="EKS 기반 EMR NVIDIA RAPIDS Accelerator for Apache Spark | AI on EKS"><meta data-rh="true" name="description" content="NVIDIA RAPIDS Accelerator for Apache Spark는 NVIDIA CUDA의 기능을 기반으로 구축된 강력한 도구입니다. CUDA는 NVIDIA의 GPU 아키텍처에서 계산 프로세스를 향상시키기 위해 설계된 혁신적인 병렬 컴퓨팅 플랫폼입니다. NVIDIA에서 개발한 프로젝트인 RAPIDS는 CUDA를 기반으로 하는 오픈소스 라이브러리 모음으로 구성되어 GPU 가속 데이터 과학 워크플로우를 가능하게 합니다."><meta data-rh="true" property="og:description" content="NVIDIA RAPIDS Accelerator for Apache Spark는 NVIDIA CUDA의 기능을 기반으로 구축된 강력한 도구입니다. CUDA는 NVIDIA의 GPU 아키텍처에서 계산 프로세스를 향상시키기 위해 설계된 혁신적인 병렬 컴퓨팅 플랫폼입니다. NVIDIA에서 개발한 프로젝트인 RAPIDS는 CUDA를 기반으로 하는 오픈소스 라이브러리 모음으로 구성되어 GPU 가속 데이터 과학 워크플로우를 가능하게 합니다."><link data-rh="true" rel="icon" href="/ai-on-eks/ko/img/header-icon.png"><link data-rh="true" rel="canonical" href="https://awslabs.github.io/ai-on-eks/ko/docs/infra/misc/emr-spark-rapids"><link data-rh="true" rel="alternate" href="https://awslabs.github.io/ai-on-eks/docs/infra/misc/emr-spark-rapids" hreflang="en-US"><link data-rh="true" rel="alternate" href="https://awslabs.github.io/ai-on-eks/ko/docs/infra/misc/emr-spark-rapids" hreflang="ko-KR"><link data-rh="true" rel="alternate" href="https://awslabs.github.io/ai-on-eks/docs/infra/misc/emr-spark-rapids" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Miscellaneous","item":"https://awslabs.github.io/ai-on-eks/ko/docs/category/miscellaneous"},{"@type":"ListItem","position":2,"name":"EMR NVIDIA Spark-RAPIDS","item":"https://awslabs.github.io/ai-on-eks/ko/docs/infra/misc/emr-spark-rapids"}]}</script><link rel="stylesheet" href="/ai-on-eks/ko/assets/css/styles.c270b852.css">
<script src="/ai-on-eks/ko/assets/js/runtime~main.84f685ef.js" defer="defer"></script>
<script src="/ai-on-eks/ko/assets/js/main.62626cce.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="본문으로 건너뛰기"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">본문으로 건너뛰기</a></div><div class="theme-announcement-bar announcementBar_mb4j" style="background-color:#667eea;color:#ffffff" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">GenAI on EKS workshop series! <a target="_blank" rel="noopener noreferrer" href="https://aws-experience.com/emea/smb/events/series/get-hands-on-with-amazon-eks?trk=9be4af2e-2339-40ae-b5e9-57b6a7704c36&sc_channel=el" style="color: #ffffff; text-decoration: underline; font-weight: bold; margin-left: 10px;">Register now →</a></div><button type="button" aria-label="닫기" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="메인" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="사이드바 펼치거나 접기" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/ai-on-eks/ko/"><div class="navbar__logo"><img src="/ai-on-eks/ko/img/header-icon.png" alt="AIoEKS 로고" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/ai-on-eks/ko/img/header-icon.png" alt="AIoEKS 로고" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/ai-on-eks/ko/docs/infra">인프라</a><a class="navbar__item navbar__link" href="/ai-on-eks/ko/docs/blueprints">블루프린트</a><a class="navbar__item navbar__link" href="/ai-on-eks/ko/docs/guidance">가이드</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/awslabs/ai-on-eks" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>한국어</a><ul class="dropdown__menu"><li><a href="/ai-on-eks/docs/infra/misc/emr-spark-rapids" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en-US">English</a></li><li><a href="/ai-on-eks/ko/docs/infra/misc/emr-spark-rapids" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="ko-KR">한국어</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="어두운 모드와 밝은 모드 전환하기 (현재 system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input id="search_input_react" type="search" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="맨 위로 스크롤하기" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="문서 사이드바" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/ai-on-eks/ko/docs/infra"><span title="소개" class="linkLabel_WmDU"> 소개</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/ai-on-eks/ko/docs/category/training"><span title="Training" class="categoryLinkLabel_W154">Training</span></a><button aria-label="사이드바 분류 &#x27;Training&#x27; 펼치기" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/ai-on-eks/ko/docs/infra/inference"><span title="Inference" class="categoryLinkLabel_W154">Inference</span></a><button aria-label="사이드바 분류 &#x27;Inference&#x27; 펼치기" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/ai-on-eks/ko/docs/category/miscellaneous"><span title="Miscellaneous" class="categoryLinkLabel_W154">Miscellaneous</span></a><button aria-label="사이드바 분류 &#x27;Miscellaneous&#x27; 접기" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/ai-on-eks/ko/docs/infra/misc/emr-spark-rapids"><span title="EMR NVIDIA Spark-RAPIDS" class="linkLabel_WmDU">EMR NVIDIA Spark-RAPIDS</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ai-on-eks/ko/docs/infra/misc/troubleshooting"><span title="문제 해결" class="linkLabel_WmDU">문제 해결</span></a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/ai-on-eks/ko/docs/infra/agents-on-eks"><span title="EKS 기반 에이전트" class="linkLabel_WmDU">EKS 기반 에이전트</span></a></li></ul></nav><button type="button" title="사이드바 숨기기" aria-label="사이드바 숨기기" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="탐색 경로"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="홈" class="breadcrumbs__link" href="/ai-on-eks/ko/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/ai-on-eks/ko/docs/category/miscellaneous"><span>Miscellaneous</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">EMR NVIDIA Spark-RAPIDS</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">이 페이지에서</button></div><div class="theme-doc-markdown markdown"><header><h1>EKS 기반 EMR NVIDIA RAPIDS Accelerator for Apache Spark</h1></header>
<p>NVIDIA RAPIDS Accelerator for Apache Spark는 NVIDIA CUDA의 기능을 기반으로 구축된 강력한 도구입니다. CUDA는 NVIDIA의 GPU 아키텍처에서 계산 프로세스를 향상시키기 위해 설계된 혁신적인 병렬 컴퓨팅 플랫폼입니다. NVIDIA에서 개발한 프로젝트인 RAPIDS는 CUDA를 기반으로 하는 오픈소스 라이브러리 모음으로 구성되어 GPU 가속 데이터 과학 워크플로우를 가능하게 합니다.</p>
<p>Spark 3용 RAPIDS Accelerator의 발명으로 NVIDIA는 Spark SQL 및 DataFrame 작업의 효율성을 크게 향상시켜 추출, 변환 및 로드 파이프라인을 성공적으로 혁신했습니다. RAPIDS cuDF 라이브러리의 기능과 Spark 분산 컴퓨팅 에코시스템의 광범위한 도달 범위를 결합하여 RAPIDS Accelerator for Apache Spark는 대규모 계산을 처리하기 위한 강력한 솔루션을 제공합니다.
또한 RAPIDS Accelerator 라이브러리는 UCX로 최적화된 고급 셔플을 통합하여 GPU 간 통신 및 RDMA 기능을 지원하도록 구성할 수 있어 성능을 더욱 향상시킵니다.</p>
<p><img decoding="async" loading="lazy" alt="Alt text" src="/ai-on-eks/ko/assets/images/nvidia-505240d62b417acc46d631e6db952871.png" width="1200" height="676" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="nvidia-rapids-accelerator-for-apache-spark에-대한-emr-지원">NVIDIA RAPIDS Accelerator for Apache Spark에 대한 EMR 지원<a href="#nvidia-rapids-accelerator-for-apache-spark에-대한-emr-지원" class="hash-link" aria-label="NVIDIA RAPIDS Accelerator for Apache Spark에 대한 EMR 지원에 대한 직접 링크" title="NVIDIA RAPIDS Accelerator for Apache Spark에 대한 EMR 지원에 대한 직접 링크" translate="no">​</a></h3>
<p>Amazon EMR과 NVIDIA RAPIDS Accelerator for Apache Spark의 통합 Amazon EMR on EKS는 이제 NVIDIA RAPIDS Accelerator for Apache Spark와 함께 GPU 인스턴스 유형 사용에 대한 지원을 확장합니다. 인공 지능(AI) 및 머신 러닝(ML)의 사용이 데이터 분석 영역에서 계속 확장됨에 따라 GPU가 제공할 수 있는 빠르고 비용 효율적인 데이터 처리에 대한 수요가 증가하고 있습니다. NVIDIA RAPIDS Accelerator for Apache Spark를 통해 사용자는 GPU의 우수한 성능을 활용하여 상당한 인프라 비용 절감을 달성할 수 있습니다.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="기능">기능<a href="#기능" class="hash-link" aria-label="기능에 대한 직접 링크" title="기능에 대한 직접 링크" translate="no">​</a></h3>
<ul>
<li>
<p>주요 기능 데이터 준비 작업에서 성능 향상을 경험하여 파이프라인의 후속 단계로 빠르게 전환할 수 있습니다. 이는 모델 훈련을 가속화할 뿐만 아니라 데이터 과학자와 엔지니어가 우선순위 작업에 집중할 수 있도록 합니다.</p>
</li>
<li>
<p>Spark 3은 데이터 수집에서 모델 훈련, 시각화에 이르기까지 엔드투엔드 파이프라인의 원활한 조정을 보장합니다. 동일한 GPU 가속 설정이 Spark와 머신 러닝 또는 딥러닝 프레임워크 모두에 사용할 수 있습니다. 이를 통해 별도의 클러스터가 필요 없으며 전체 파이프라인에 GPU 가속을 제공합니다.</p>
</li>
<li>
<p>Spark 3은 Catalyst 쿼리 옵티마이저에서 컬럼 처리에 대한 지원을 확장합니다. RAPIDS Accelerator는 이 시스템에 연결하여 SQL 및 DataFrame 연산자의 속도를 높일 수 있습니다. 쿼리 계획이 실행되면 이러한 연산자는 향상된  성능을 위해 Spark 클러스터 내의 GPU를 활용할 수 있습니다.</p>
</li>
<li>
<p>NVIDIA는 Spark 작업 간의 데이터 교환을 최적화하도록 설계된 혁신적인 Spark 셔플 구현을 도입했습니다. 이 셔플 시스템은 UCX, RDMA 및 NCCL을 포함한 GPU 강화 통신 라이브러리를 기반으로 구축되어 데이터 전송 속도와 전반적인 성능을 크게 향상시킵니다.</p>
</li>
</ul>
<div class="collapsibleContent_q3kw"><div class="header_QCEw"><h2><span>솔루션 배포</span></h2><span class="icon_PckA">👈</span></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="xgboost-spark-작업-시작">XGBoost Spark 작업 시작<a href="#xgboost-spark-작업-시작" class="hash-link" aria-label="XGBoost Spark 작업 시작에 대한 직접 링크" title="XGBoost Spark 작업 시작에 대한 직접 링크" translate="no">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="훈련-데이터셋">훈련 데이터셋<a href="#훈련-데이터셋" class="hash-link" aria-label="훈련 데이터셋에 대한 직접 링크" title="훈련 데이터셋에 대한 직접 링크" translate="no">​</a></h4>
<p>Fannie Mae&#x27;s Single-Family Loan Performance Data는 2013년부터 시작하는 종합적인 데이터셋을 보유하고 있습니다. 이 데이터셋은 Fannie Mae의 단일 가족 사업 장부 일부의 신용 성과에 대한 귀중한 인사이트를 제공합니다. 이 데이터셋은 투자자가 Fannie Mae가 소유하거나 보증하는 단일 가족 대출의 신용 성과를 더 잘 이해할 수 있도록 설계되었습니다.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="1단계-사용자-지정-docker-이미지-빌드">1단계: 사용자 지정 Docker 이미지 빌드<a href="#1단계-사용자-지정-docker-이미지-빌드" class="hash-link" aria-label="1단계: 사용자 지정 Docker 이미지 빌드에 대한 직접 링크" title="1단계: 사용자 지정 Docker 이미지 빌드에 대한 직접 링크" translate="no">​</a></h4>
<ul>
<li><code>us-west-2</code>에 위치한 EMR on EKS ECR 리포지토리에서 Spark Rapids 기본 이미지를 가져오려면 로그인합니다:</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">aws ecr get-login-password </span><span class="token parameter variable" style="color:#36acaa">--region</span><span class="token plain"> us-west-2 </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> login </span><span class="token parameter variable" style="color:#36acaa">--username</span><span class="token plain"> AWS --password-stdin </span><span class="token number" style="color:#36acaa">895885662937</span><span class="token plain">.dkr.ecr.us-west-2.amazonaws.com</span><br></span></code></pre></div></div>
<p>다른 리전에 있는 경우 이 <a href="https://docs.aws.amazon.com/emr/latest/EMR-on-EKS-DevelopmentGuide/docker-custom-images-tag.html" target="_blank" rel="noopener noreferrer">가이드</a>를 참조하세요.</p>
<ul>
<li>로컬에서 Docker 이미지를 빌드하려면 다음 명령을 사용합니다:</li>
</ul>
<p>제공된 <code>Dockerfile</code>을 사용하여 사용자 지정 Docker 이미지를 빌드합니다. 0.10과 같은 이미지 태그를 선택합니다.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>정보</div><div class="admonitionContent_BuS1"><p>빌드 프로세스는 네트워크 속도에 따라 시간이 걸릴 수 있습니다. 결과 이미지 크기는 약 <code>23.5GB</code>입니다.</p></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">cd</span><span class="token plain"> infra/emr-spark-rapids/examples/xgboost</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> build </span><span class="token parameter variable" style="color:#36acaa">-t</span><span class="token plain"> emr-6.10.0-spark-rapids-custom:0.10 </span><span class="token parameter variable" style="color:#36acaa">-f</span><span class="token plain"> Dockerfile </span><span class="token builtin class-name">.</span><br></span></code></pre></div></div>
<ul>
<li><code>&lt;ACCOUNTID&gt;</code>를 AWS 계정 ID로 바꿉니다. 다음 명령으로 ECR 리포지토리에 로그인합니다:</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">aws ecr get-login-password </span><span class="token parameter variable" style="color:#36acaa">--region</span><span class="token plain"> us-west-2 </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> login </span><span class="token parameter variable" style="color:#36acaa">--username</span><span class="token plain"> AWS --password-stdin </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">ACCOUNTID</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">.dkr.ecr.us-west-2.amazonaws.com</span><br></span></code></pre></div></div>
<ul>
<li>Docker 이미지를 ECR에 푸시하려면 다음을 사용합니다:</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> tag emr-6.10.0-spark-rapids-custom:0.10 </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">ACCOUNT_ID</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">.dkr.ecr.us-west-2.amazonaws.com/emr-6.10.0-spark-rapids-custom:0.10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> push </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">ACCOUNT_ID</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">.dkr.ecr.us-west-2.amazonaws.com/emr-6.10.0-spark-rapids-custom:0.10</span><br></span></code></pre></div></div>
<p><code>3단계</code>에서 작업 실행   중에 이 이미지를 사용할 수 있습니다.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2단계-입력-데이터-획득fannie-maes-single-family-loan-performance-data">2단계: 입력 데이터 획득(Fannie Mae&#x27;s Single-Family Loan Performance Data)<a href="#2단계-입력-데이터-획득fannie-maes-single-family-loan-performance-data" class="hash-link" aria-label="2단계: 입력 데이터 획득(Fannie Mae&#x27;s Single-Family Loan Performance Data)에 대한 직접 링크" title="2단계: 입력 데이터 획득(Fannie Mae&#x27;s Single-Family Loan Performance Data)에 대한 직접 링크" translate="no">​</a></h3>
<p>이 데이터셋은 <a href="http://www.fanniemae.com/portal/funding-the-market/data/loan-performance-data.html" target="_blank" rel="noopener noreferrer">Fannie Mae&#x27;s Single-Family Loan Performance Data</a>에서 가져옵니다. 모든 권리는 Fannie Mae에 있습니다.</p>
<ol>
<li><a href="https://capitalmarkets.fanniemae.com/credit-risk-transfer/single-family-credit-risk-transfer/fannie-mae-single-family-loan-performance-data" target="_blank" rel="noopener noreferrer">Fannie Mae</a> 웹사이트로 이동합니다</li>
<li><a href="https://datadynamics.fanniemae.com/data-dynamics/?&amp;_ga=2.181456292.2043790680.1657122341-289272350.1655822609#/reportMenu;category=HP" target="_blank" rel="noopener noreferrer">Single-Family Loan Performance Data</a>를 클릭합니다<!-- -->
<ul>
<li>웹사이트를 처음 사용하는 경우 새 사용자로 등록합니다</li>
<li>자격 증명을 사용하여 로그인합니다</li>
</ul>
</li>
<li><a href="https://datadynamics.fanniemae.com/data-dynamics/#/reportMenu;category=HP" target="_blank" rel="noopener noreferrer">HP</a>를 선택합니다</li>
<li><code>Download Data</code>를 클릭하고 <code>Single-Family Loan Performance Data</code>를 선택합니다</li>
<li>연도 및 분기별로 정렬된 <code>Acquisition and Performance</code> 파일의 표 형식 목록이 표시됩니다. 파일을 클릭하여 다운로드합니다. 예제 작업에서 사용할 3년 분량의 데이터(2020, 2021, 2022 - 각 연도에 4개의 파일, 각 분기에 하나씩)를 다운로드할 수 있습니다. 예: 2017Q1.zip</li>
<li>다운로드한 파일의 압축을 풀어 로컬 머신에 csv 파일을 추출합니다. 예: 2017Q1.csv</li>
<li>CSV 파일만 <code>${S3_BUCKET}/${EMR_VIRTUAL_CLUSTER_ID}/spark-rapids-emr/input/fannie-mae-single-family-loan-performance/</code> 아래의 S3 버킷에 복사합니다. 아래 예제는 3년 분량의 데이터(각 분기에 하나의 파일, 총 12개 파일)를 사용합니다. 참고: <code>${S3_BUCKET}</code> 및 <code>${EMR_VIRTUAL_CLUSTER_ID}</code> 값은 Terraform 출력에서 추출할 수 있습니다.</li>
</ol>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> aws s3 ls s3://emr-spark-rapids-&lt;aws-account-id&gt;-us-west-2/949wt7zuphox1beiv0i30v65i/spark-rapids-emr/input/fannie-mae-single-family-loan-performance/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    2023-06-24 21:38:25 2301641519 2000Q1.csv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    2023-06-24 21:38:25 9739847213 2020Q2.csv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    2023-06-24 21:38:25 10985541111 2020Q3.csv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    2023-06-24 21:38:25 11372073671 2020Q4.csv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    2023-06-23 16:38:36 9603950656 2021Q1.csv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    2023-06-23 16:38:36 7955614945 2021Q2.csv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    2023-06-23 16:38:36 5365827884 2021Q3.csv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    2023-06-23 16:38:36 4390166275 2021Q4.csv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    2023-06-22 19:20:08 2723499898 2022Q1.csv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    2023-06-22 19:20:08 1426204690 2022Q2.csv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    2023-06-22 19:20:08  595639825 2022Q3.csv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    2023-06-22 19:20:08  180159771 2022Q4.csv</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3단계-emr-spark-xgboost-작업-실행">3단계: EMR Spark XGBoost 작업 실행<a href="#3단계-emr-spark-xgboost-작업-실행" class="hash-link" aria-label="3단계: EMR Spark XGBoost 작업 실행에 대한 직접 링크" title="3단계: EMR Spark XGBoost 작업 실행에 대한 직접 링크" translate="no">​</a></h3>
<p>여기서는 작업을 실행하기 위해 도우미 셸 스크립트를 활용합니다. 이 스크립트는 사용자 입력이 필요합니다.</p>
<p>이 스크립트는 Terraform 출력에서 얻을 수 있는 특정 입력을 요청합니다. 아래 예시를 참조하세요.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">cd</span><span class="token plain"> infra/emr-spark-rapids/examples/xgboost</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">chmod</span><span class="token plain"> +x execute_spark_rapids_xgboost.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./execute_spark_rapids_xgboost.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 아래에 표시된 예시 입력</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Did you copy the fannie-mae-single-family-loan-performance data to S3 bucket</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">y/n</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">: y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Enter the customized Docker image URI: public.ecr.aws/o7d8v7g9/emr-6.10.0-spark-rapids:0.11</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Enter EMR Virtual Cluster AWS Region: us-west-2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Enter the EMR Virtual Cluster ID: 949wt7zuphox1beiv0i30v65i</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Enter the EMR Execution Role ARN: arn:aws:iam::</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">ACCOUNTID</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">:role/emr-spark-rapids-emr-eks-data-team-a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Enter the CloudWatch Log Group name: /emr-on-eks-logs/emr-spark-rapids/emr-ml-team-a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Enter the S3 Bucket </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> storing PySpark Scripts, Pod Templates, Input data and Output data.</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">bucket-name</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">: emr-spark-rapids-</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">ACCOUNTID</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">-us-west-2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Enter the number of executor instances </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">4</span><span class="token plain"> to </span><span class="token number" style="color:#36acaa">8</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">: </span><span class="token number" style="color:#36acaa">8</span><br></span></code></pre></div></div>
<p>파드 상태 확인</p>
<p><img decoding="async" loading="lazy" alt="Alt text" src="/ai-on-eks/ko/assets/images/spark-rapids-pod-status-c53b6ca113b175c12558cbd200441bbd.png" width="2846" height="848" class="img_ev3q"></p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>정보</div><div class="admonitionContent_BuS1"><p>첫 번째 실행은 EMR Job Pod, Driver 및 Executor 파드용 이미지를 다운로드해야 하므로 더 오래 걸릴 수 있습니다. 각 파드는 Docker 이미지를 다운로드하는 데 최대 8분이 걸릴 수 있습니다. 이미지 캐싱 덕분에 후속 실행은 더 빠릅니다(보통 30초 미만).</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="4단계-작업-결과-확인">4단계: 작업 결과 확인<a href="#4단계-작업-결과-확인" class="hash-link" aria-label="4단계: 작업 결과 확인에 대한 직접 링크" title="4단계: 작업 결과 확인에 대한 직접 링크" translate="no">​</a></h3>
<ul>
<li>CloudWatch 로그 또는 S3 버킷에서 Spark 드라이버 파드 로그를 확인하려면 로그인합니다.</li>
</ul>
<p>로그 파일의 샘플 출력은 다음과 같습니다:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/emr-on-eks-logs/emr-spark-rapids/emr-ml-team-a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spark-rapids-emr/949wt7zuphox1beiv0i30v65i/jobs/0000000327fe50tosa4/containers/spark-0000000327fe50tosa4/spark-0000000327fe50tosa4-driver/stdout</span><br></span></code></pre></div></div>
<p>위 로그 파일의 샘플 출력은 다음과 같습니다:</p>
<p>Raw Dataframe CSV Rows count : 215386024
Raw Dataframe Parquet Rows count : 215386024
ETL takes 222.34674382209778</p>
<p>Training takes 95.90932035446167 seconds
If features_cols param set, then features_col param is ignored.</p>
<p>Transformation takes 63.999391317367554 seconds
+--------------+--------------------+--------------------+----------+
|delinquency_12|       rawPrediction|         probability|prediction|
+--------------+--------------------+--------------------+----------+
|             0|[10.4500541687011...|[0.99997103214263...|       0.0|
|             0|[10.3076572418212...|[0.99996662139892...|       0.0|
|             0|[9.81707763671875...|[0.99994546175003...|       0.0|
|             0|[9.10498714447021...|[0.99988889694213...|       0.0|
|             0|[8.81903457641601...|[0.99985212087631...|       0.0|
+--------------+--------------------+--------------------+----------+
only showing top 5 rows</p>
<p>Evaluation takes 3.8372223377227783 seconds
Accuracy is 0.996563056111921</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="fannie-mae-single-loan-performance-dataset용-ml-파이프라인">Fannie Mae Single Loan Performance Dataset용 ML 파이프라인<a href="#fannie-mae-single-loan-performance-dataset용-ml-파이프라인" class="hash-link" aria-label="Fannie Mae Single Loan Performance Dataset용 ML 파이프라인에 대한 직접 링크" title="Fannie Mae Single Loan Performance Dataset용 ML 파이프라인에 대한 직접 링크" translate="no">​</a></h3>
<p><strong>1단계</strong>: 누락된 값, 범주형 변수 및 기타 데이터 불일치를 처리하기 위해 데이터셋을 전처리하고 정리합니다. 여기에는 데이터 보간, 원-핫 인코딩 및 데이터 정규화와 같은 기술이 포함될 수 있습니다.</p>
<p><strong>2단계</strong>: 대출 성과를 예측하는 데 더 유용한 정보를 제공할 수 있는 기존 기능에서 추가 기능을 생성합니다. 예를 들어 대출 대비 가치 비율, 차용인의 신용 점수 범위 또는 대출 시작 연도와 같은 기능을 추출할 수 있습니다.</p>
<p><strong>3단계</strong>: 데이터셋을 두 부분으로 나눕니다: 하나는 XGBoost 모델 훈련용이고 다른 하나는 성능 평가용입니다. 이를 통해 모델이 보이지 않는 데이터에 얼마나 잘 일반화되는지 평가할 수 있습니다.</p>
<p><strong>4단계</strong>: 훈련 데이터셋을 XGBoost에 공급하여 모델을 훈련합니다. XGBoost는 대출 속성과 해당 대출 성과 레이블을 분석하여 그들 사이의 패턴과 관계를 학습합니다. 목표는 주어진 기능을 기반으로 대출이 채무 불이행이 될 가능성이 있는지 또는 잘 수행될 가능성이 있는지 예측하는 것입니다.</p>
<p><strong>5단계</strong>: 모델이 훈련되면 평가 데이터셋을 사용하여 성능을 평가합니다. 여기에는 모델이 대출 성과를 얼마나 잘 예측하는지 측정하기 위해 정확도, 정밀도, 재현율 또는 수신기 작동 특성 곡선 아래 면적(AUC-ROC)과 같은 메트릭을 분석하는 것이 포함됩니다.</p>
<p><strong>6단계</strong>: 성능이 만족스럽지 않으면 모델의 정확도를 개선하거나 과적합과 같은 문제를 해결하기 위해 학습률, 트리 깊이 또는 정규화 파라미터와 같은 XGBoost 하이퍼파라미터를 조정할 수 있습니다.</p>
<p><strong>7단계</strong>: 마지막으로 훈련되고 검증된 XGBoost 모델을 사용하여 새롭고 보이지 않는 대출 데이터에 대한 예측을 수행할 수 있습니다. 이러한 예측은 대출 채무 불이행과 관련된 잠재적 위험을 식별하거나 대출 성과를 평가하는 데 도움이 될 수 있습니다.</p>
<p><img decoding="async" loading="lazy" alt="Alt text" src="/ai-on-eks/ko/assets/images/emr-spark-rapids-fannie-mae-d6c47c14cc7c259e4b07f7fb0b7914c9.png" width="9395" height="5403" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="dcgm-exporter-prometheus-및-grafana를-사용한-gpu-모니터링">DCGM Exporter, Prometheus 및 Grafana를 사용한 GPU 모니터링<a href="#dcgm-exporter-prometheus-및-grafana를-사용한-gpu-모니터링" class="hash-link" aria-label="DCGM Exporter, Prometheus 및 Grafana를 사용한 GPU 모니터링에 대한 직접 링크" title="DCGM Exporter, Prometheus 및 Grafana를 사용한 GPU 모니터링에 대한 직접 링크" translate="no">​</a></h3>
<p>관측성은 GPU와 같은 하드웨어 리소스를 관리하고 최적화하는 데 중요한 역할을 합니다. 특히 GPU 사용률이 높은 머신 러닝 워크로드에서 그렇습니다. 실시간으로 GPU 사용량을 모니터링하고, 추세를 식별하고, 이상을 감지하는 기능은 성능 튜닝, 문제 해결 및 효율적인 리소스 활용에 큰 영향을 미칠 수 있습니다.</p>
<p><a href="https://github.com/NVIDIA/gpu-operator" target="_blank" rel="noopener noreferrer">NVIDIA GPU Operator</a>는 GPU 관측성에서 핵심 역할을 합니다. Kubernetes에서 GPU 워크로드를 실행하는 데 필요한 구성 요소의 배포를 자동화합니다. 그 구성 요소 중 하나인 <a href="https://docs.nvidia.com/datacenter/cloud-native/gpu-telemetry/latest/index.html" target="_blank" rel="noopener noreferrer">DCGM(Data Center GPU Manager) Exporter</a>는 선도적인 오픈소스 모니터링 솔루션인 Prometheus가 수집할 수 있는 형식으로 GPU 메트릭을 내보내는 오픈소스 프로젝트입니다. 이러한 메트릭에는 GPU 온도, 메모리 사용량, GPU 사용률 등이 포함됩니다. DCGM Exporter를 사용하면 GPU별로 이러한 메트릭을 모니터링하여 GPU 리소스에 대한 세분화된 가시성을 제공할 수 있습니다.</p>
<p>NVIDIA GPU Operator는 DCGM Exporter와 함께 GPU 메트릭을 Prometheus 서버로 내보냅니다. 유연한 쿼리 언어를 통해 Prometheus를 사용하면 데이터를 분할하여 리소스 사용 패턴에 대한 인사이트를 생성할 수 있습니다.</p>
<p>그러나 Prometheus는 장기 데이터 저장용으로 설계되지 않았습니다. 여기에서 <a href="https://aws.amazon.com/prometheus/" target="_blank" rel="noopener noreferrer">Amazon Managed Service for Prometheus(AMP)</a>가 등장합니다. 기본 인프라를 관리할 필요 없이 대규모로 운영 데이터를 쉽게 분석할 수 있게 해주는 완전 관리형, 안전하고 확장 가능한 Prometheus 서비스를 제공합니다.</p>
<p>이러한 메트릭을 시각화하고 유용한 대시보드를 만드는 것은 Grafana가 뛰어난 부분입니다. Grafana는 모니터링 및 관측성을 위한 오픈소스 플랫폼으로 수집된 메트릭을 직관적으로 표현하기 위한 풍부한 시각화를 제공합니다. Prometheus와 결합하면 Grafana는 DCGM Exporter가 수집한 GPU 메트릭을 사용자 친화적인 방식으로 표시할 수 있습니다.</p>
<p>NVIDIA GPU Operator는 메트릭을 Prometheus 서버로 내보내도록 구성되어 있으며, Prometheus 서버는 이러한 메트릭을 Amazon Managed Prometheus(AMP)에 원격 쓰기합니다. 사용자는 블루프린트의 일부로 배포된 Grafana WebUI에 로그인하고 AMP를 데이터 소스로 추가할 수 있습니다. 그런 다음 실시간 성능 모니터링 및 리소스 최적화를 용이하게 하는 쉽게 소화할 수 있는 형식으로 GPU 메트릭을 제공하는 오픈소스 <a href="https://grafana.com/grafana/dashboards/12239-nvidia-dcgm-exporter-dashboard/" target="_blank" rel="noopener noreferrer">GPU 모니터링 대시보드</a>를 가져올 수 있습니다.</p>
<ol>
<li><strong>NVIDIA GPU Operator</strong>: Kubernetes 클러스터에 설치된 NVIDIA GPU Operator는 GPU 리소스의 수명 주기를 관리합니다. 각 GPU 장착 노드에 NVIDIA 드라이버와 DCGM Exporter를 배포합니다.</li>
<li><strong>DCGM Exporter</strong>: DCGM Exporter는 각 노드에서 실행되어 GPU 메트릭을 수집하고 Prometheus에 노출합니다.</li>
<li><strong>Prometheus</strong>: Prometheus는 DCGM Exporter를 포함한 다양한 소스에서 메트릭을 수집하는 시계열 데이터베이스입니다. 정기적으로 익스포터에서 메트릭을 가져와 저장합니다. 이 설정에서는 수집된 메트릭을 AMP에 원격 쓰기하도록 Prometheus를 구성합니다.</li>
<li><strong>Amazon Managed Service for Prometheus(AMP)</strong>: AMP는 AWS에서 제공하는 완전 관리형 Prometheus 서비스입니다. Prometheus 데이터의 장기 저장, 확장성 및 보안을 처리합니다.</li>
<li><strong>Grafana</strong>: Grafana는 수집된 메트릭에 대해 AMP를 쿼리하고 유용한 대시보드에 표시할 수 있는 시각화 도구입니다.</li>
</ol>
<p>이 블루프린트에서는 DCGM을 활용하여 GPU 메트릭을 Prometheus와 Amazon Managed Prometheus(AMP) 모두에 씁니다. GPU 메트릭을 확인하려면 다음 명령을 실행하여 Grafana를 사용할 수 있습니다:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl port-forward svc/grafana </span><span class="token number" style="color:#36acaa">3000</span><span class="token plain">:80 </span><span class="token parameter variable" style="color:#36acaa">-n</span><span class="token plain"> grafana</span><br></span></code></pre></div></div>
<p>사용자 이름으로 <code>admin</code>을 사용하여 Grafana에 로그인하고 다음 AWS CLI 명령을 사용하여 Secrets Manager에서 비밀번호를 검색합니다:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">aws secretsmanager get-secret-value --secret-id emr-spark-rapids-grafana </span><span class="token parameter variable" style="color:#36acaa">--region</span><span class="token plain"> us-west-2</span><br></span></code></pre></div></div>
<p>로그인한 후 AMP 데이터 소스를 Grafana에 추가하고 오픈소스 GPU 모니터링 대시보드를 가져옵니다. 그런 다음 아래 스크린샷과 같이 Grafana 대시보드를 사용하여 메트릭을 탐색하고 시각화할 수 있습니다.</p>
<p><img decoding="async" loading="lazy" alt="Alt text" src="/ai-on-eks/ko/assets/images/gpu-dashboard-d829ebf9e69c5f26d76b49fbe2d2f8ce.png" width="3076" height="1882" class="img_ev3q"></p>
<div class="collapsibleContent_q3kw"><div class="header_QCEw"><h2><span>정리</span></h2><span class="icon_PckA">👈</span></div></div>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>주의</div><div class="admonitionContent_BuS1"><p>AWS 계정에 원치 않는 요금이 청구되지 않도록 이 배포 중에 생성된 모든 AWS 리소스를 삭제하세요</p></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/awslabs/ai-on-eks/blob/main/website/docs/infra/misc/emr-spark-rapids.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>페이지 편집</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="문서 페이지"><a class="pagination-nav__link pagination-nav__link--prev" href="/ai-on-eks/ko/docs/category/miscellaneous"><div class="pagination-nav__sublabel">이전</div><div class="pagination-nav__label">Miscellaneous</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/ai-on-eks/ko/docs/infra/misc/troubleshooting"><div class="pagination-nav__sublabel">다음</div><div class="pagination-nav__label">문제 해결</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#nvidia-rapids-accelerator-for-apache-spark에-대한-emr-지원" class="table-of-contents__link toc-highlight">NVIDIA RAPIDS Accelerator for Apache Spark에 대한 EMR 지원</a></li><li><a href="#기능" class="table-of-contents__link toc-highlight">기능</a></li><li><a href="#사전-요구-사항" class="table-of-contents__link toc-highlight">사전 요구 사항</a></li><li><a href="#배포" class="table-of-contents__link toc-highlight">배포</a></li><li><a href="#리소스-확인" class="table-of-contents__link toc-highlight">리소스 확인</a></li><li><a href="#xgboost-spark-작업-시작" class="table-of-contents__link toc-highlight">XGBoost Spark 작업 시작</a></li><li><a href="#2단계-입력-데이터-획득fannie-maes-single-family-loan-performance-data" class="table-of-contents__link toc-highlight">2단계: 입력 데이터 획득(Fannie Mae&#39;s Single-Family Loan Performance Data)</a></li><li><a href="#3단계-emr-spark-xgboost-작업-실행" class="table-of-contents__link toc-highlight">3단계: EMR Spark XGBoost 작업 실행</a></li><li><a href="#4단계-작업-결과-확인" class="table-of-contents__link toc-highlight">4단계: 작업 결과 확인</a></li><li><a href="#fannie-mae-single-loan-performance-dataset용-ml-파이프라인" class="table-of-contents__link toc-highlight">Fannie Mae Single Loan Performance Dataset용 ML 파이프라인</a></li><li><a href="#dcgm-exporter-prometheus-및-grafana를-사용한-gpu-모니터링" class="table-of-contents__link toc-highlight">DCGM Exporter, Prometheus 및 Grafana를 사용한 GPU 모니터링</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">참여하기</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/awslabs/ai-on-eks" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Built with ❤️ at AWS  <br> © ${new Date().getFullYear()} Amazon.com, Inc. or its affiliates. All Rights Reserved</div></div></div></footer><script defer="" src="https://static.cloudflareinsights.com/beacon.min.js" data-cf-beacon="{&quot;token&quot;: &quot;7fbc7ab02fae4767b1af2588eba0cdf2&quot;}"></script></div>
</body>
</html>