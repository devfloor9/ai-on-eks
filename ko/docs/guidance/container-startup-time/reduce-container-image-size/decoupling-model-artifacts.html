<!doctype html>
<html lang="ko-KR" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-guidance/container-startup-time/reduce-container-image-size/decoupling-model-artifacts" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.0">
<title data-rh="true">컨테이너 이미지에서 모델 아티팩트 분리 | AI on EKS</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://awslabs.github.io/ai-on-eks/ko/docs/guidance/container-startup-time/reduce-container-image-size/decoupling-model-artifacts"><meta data-rh="true" property="og:locale" content="ko_KR"><meta data-rh="true" property="og:locale:alternate" content="en_US"><meta data-rh="true" name="docusaurus_locale" content="ko"><meta data-rh="true" name="docsearch:language" content="ko"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="컨테이너 이미지에서 모델 아티팩트 분리 | AI on EKS"><meta data-rh="true" name="description" content="모델 아티팩트를 추출하는 주요 목적은 컨테이너 이미지 크기를 줄이는 것이지만, 이 접근 방식은 추가적인 운영 및 기능적 이점도 제공합니다. 운영 개선에는 모델 아티팩트에 대한 별도의 버전 관리, 간소화된 감사 및 라이프사이클 제어가 포함되며, 지연 로딩, 핫 스와핑 및 다양한 애플리케이션 간 재사용은 추가적인 기능적 유연성과 성능을 제공합니다. 사용 사례에 따라 이러한 장점은 이 섹션에 설명된 솔루션 중에서 선택할 때 결정적인 요소가 될 수 있습니다."><meta data-rh="true" property="og:description" content="모델 아티팩트를 추출하는 주요 목적은 컨테이너 이미지 크기를 줄이는 것이지만, 이 접근 방식은 추가적인 운영 및 기능적 이점도 제공합니다. 운영 개선에는 모델 아티팩트에 대한 별도의 버전 관리, 간소화된 감사 및 라이프사이클 제어가 포함되며, 지연 로딩, 핫 스와핑 및 다양한 애플리케이션 간 재사용은 추가적인 기능적 유연성과 성능을 제공합니다. 사용 사례에 따라 이러한 장점은 이 섹션에 설명된 솔루션 중에서 선택할 때 결정적인 요소가 될 수 있습니다."><link data-rh="true" rel="icon" href="/ai-on-eks/ko/img/header-icon.png"><link data-rh="true" rel="canonical" href="https://awslabs.github.io/ai-on-eks/ko/docs/guidance/container-startup-time/reduce-container-image-size/decoupling-model-artifacts"><link data-rh="true" rel="alternate" href="https://awslabs.github.io/ai-on-eks/docs/guidance/container-startup-time/reduce-container-image-size/decoupling-model-artifacts" hreflang="en-US"><link data-rh="true" rel="alternate" href="https://awslabs.github.io/ai-on-eks/ko/docs/guidance/container-startup-time/reduce-container-image-size/decoupling-model-artifacts" hreflang="ko-KR"><link data-rh="true" rel="alternate" href="https://awslabs.github.io/ai-on-eks/docs/guidance/container-startup-time/reduce-container-image-size/decoupling-model-artifacts" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Amazon EKS에서 AI/ML 추론 애플리케이션의 콜드 스타트 문제 해결","item":"https://awslabs.github.io/ai-on-eks/ko/docs/guidance/container-startup-time/"},{"@type":"ListItem","position":2,"name":"컨테이너 이미지 크기 줄이기","item":"https://awslabs.github.io/ai-on-eks/ko/docs/guidance/container-startup-time/reduce-container-image-size/"},{"@type":"ListItem","position":3,"name":"컨테이너 이미지에서 모델 아티팩트 분리","item":"https://awslabs.github.io/ai-on-eks/ko/docs/guidance/container-startup-time/reduce-container-image-size/decoupling-model-artifacts"}]}</script><link rel="stylesheet" href="/ai-on-eks/ko/assets/css/styles.c270b852.css">
<script src="/ai-on-eks/ko/assets/js/runtime~main.84f685ef.js" defer="defer"></script>
<script src="/ai-on-eks/ko/assets/js/main.62626cce.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="본문으로 건너뛰기"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">본문으로 건너뛰기</a></div><div class="theme-announcement-bar announcementBar_mb4j" style="background-color:#667eea;color:#ffffff" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">GenAI on EKS workshop series! <a target="_blank" rel="noopener noreferrer" href="https://aws-experience.com/emea/smb/events/series/get-hands-on-with-amazon-eks?trk=9be4af2e-2339-40ae-b5e9-57b6a7704c36&sc_channel=el" style="color: #ffffff; text-decoration: underline; font-weight: bold; margin-left: 10px;">Register now →</a></div><button type="button" aria-label="닫기" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="메인" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="사이드바 펼치거나 접기" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/ai-on-eks/ko/"><div class="navbar__logo"><img src="/ai-on-eks/ko/img/header-icon.png" alt="AIoEKS 로고" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/ai-on-eks/ko/img/header-icon.png" alt="AIoEKS 로고" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a class="navbar__item navbar__link" href="/ai-on-eks/ko/docs/infra">인프라</a><a class="navbar__item navbar__link" href="/ai-on-eks/ko/docs/blueprints">블루프린트</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/ai-on-eks/ko/docs/guidance">가이드</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/awslabs/ai-on-eks" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>한국어</a><ul class="dropdown__menu"><li><a href="/ai-on-eks/docs/guidance/container-startup-time/reduce-container-image-size/decoupling-model-artifacts" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en-US">English</a></li><li><a href="/ai-on-eks/ko/docs/guidance/container-startup-time/reduce-container-image-size/decoupling-model-artifacts" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="ko-KR">한국어</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="어두운 모드와 밝은 모드 전환하기 (현재 system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input id="search_input_react" type="search" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="맨 위로 스크롤하기" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="문서 사이드바" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/ai-on-eks/ko/docs/guidance"><span title="AI 워크로드 가이드" class="linkLabel_WmDU">AI 워크로드 가이드</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/ai-on-eks/ko/docs/guidance/eks-best-practices"><span title="EKS 모범 사례" class="linkLabel_WmDU">EKS 모범 사례</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/ai-on-eks/ko/docs/guidance/benchmarking"><span title="Amazon EKS에서 LLM 추론 성능 벤치마킹" class="categoryLinkLabel_W154">Amazon EKS에서 LLM 추론 성능 벤치마킹</span></a><button aria-label="사이드바 분류 &#x27;Amazon EKS에서 LLM 추론 성능 벤치마킹&#x27; 펼치기" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/ai-on-eks/ko/docs/guidance/container-startup-time"><span title="Amazon EKS에서 AI/ML 추론 애플리케이션의 콜드 스타트 문제 해결" class="categoryLinkLabel_W154">Amazon EKS에서 AI/ML 추론 애플리케이션의 콜드 스타트 문제 해결</span></a><button aria-label="사이드바 분류 &#x27;Amazon EKS에서 AI/ML 추론 애플리케이션의 콜드 스타트 문제 해결&#x27; 접기" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" tabindex="0" href="/ai-on-eks/ko/docs/guidance/container-startup-time/reduce-container-image-size"><span title="컨테이너 이미지 크기 줄이기" class="categoryLinkLabel_W154">컨테이너 이미지 크기 줄이기</span></a><button aria-label="사이드바 분류 &#x27;컨테이너 이미지 크기 줄이기&#x27; 접기" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ai-on-eks/ko/docs/guidance/container-startup-time/reduce-container-image-size/optimize-image-size"><span title="컨테이너 이미지 크기 최적화" class="linkLabel_WmDU">컨테이너 이미지 크기 최적화</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/ai-on-eks/ko/docs/guidance/container-startup-time/reduce-container-image-size/decoupling-model-artifacts"><span title="컨테이너 이미지에서 모델 아티팩트 분리" class="linkLabel_WmDU">컨테이너 이미지에서 모델 아티팩트 분리</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/ai-on-eks/ko/docs/guidance/container-startup-time/accelerate-pull-process"><span title="풀 프로세스 가속화" class="categoryLinkLabel_W154">풀 프로세스 가속화</span></a><button aria-label="사이드바 분류 &#x27;풀 프로세스 가속화&#x27; 펼치기" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/ai-on-eks/ko/docs/guidance/dynamic-resource-allocation"><span title="EKS에서 동적 리소스 할당" class="linkLabel_WmDU">EKS에서 동적 리소스 할당</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/ai-on-eks/ko/docs/guidance/networking"><span title="AI를 위한 네트워킹" class="linkLabel_WmDU">AI를 위한 네트워킹</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/ai-on-eks/ko/docs/guidance/observability"><span title="관측성" class="linkLabel_WmDU">관측성</span></a></li></ul></nav><button type="button" title="사이드바 숨기기" aria-label="사이드바 숨기기" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="탐색 경로"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="홈" class="breadcrumbs__link" href="/ai-on-eks/ko/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/ai-on-eks/ko/docs/guidance/container-startup-time"><span>Amazon EKS에서 AI/ML 추론 애플리케이션의 콜드 스타트 문제 해결</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/ai-on-eks/ko/docs/guidance/container-startup-time/reduce-container-image-size"><span>컨테이너 이미지 크기 줄이기</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">컨테이너 이미지에서 모델 아티팩트 분리</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">이 페이지에서</button></div><div class="theme-doc-markdown markdown"><header><h1>컨테이너 이미지에서 모델 아티팩트 분리</h1></header>
<p>모델 아티팩트를 추출하는 주요 목적은 컨테이너 이미지 크기를 줄이는 것이지만, 이 접근 방식은 추가적인 운영 및 기능적 이점도 제공합니다. 운영 개선에는 모델 아티팩트에 대한 별도의 버전 관리, 간소화된 감사 및 라이프사이클 제어가 포함되며, 지연 로딩, 핫 스와핑 및 다양한 애플리케이션 간 재사용은 추가적인 기능적 유연성과 성능을 제공합니다. 사용 사례에 따라 이러한 장점은 이 섹션에 설명된 솔루션 중에서 선택할 때 결정적인 요소가 될 수 있습니다.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="init-컨테이너를-사용하여-amazon-s3에서-모델-아티팩트-다운로드">init 컨테이너를 사용하여 Amazon S3에서 모델 아티팩트 다운로드<a href="#init-컨테이너를-사용하여-amazon-s3에서-모델-아티팩트-다운로드" class="hash-link" aria-label="init 컨테이너를 사용하여 Amazon S3에서 모델 아티팩트 다운로드에 대한 직접 링크" title="init 컨테이너를 사용하여 Amazon S3에서 모델 아티팩트 다운로드에 대한 직접 링  크" translate="no">​</a></h2>
<p>이 솔루션은 모델 파일이나 관련 아티팩트를 외부 스토리지로 추출하는 간단한 접근 방식을 제공합니다. 아티팩트는 개발 또는 CI/CD 단계에서 태그가 지정되고 버전이 관리되며 Amazon S3 버킷에 배치되고 보존을 제어하기 위한 적절한 라이프사이클 정책이 적용됩니다. 애플리케이션에서 참조되면 메인 애플리케이션 컨테이너 전에 순차적으로 실행되는 Kubernetes 네이티브 <a href="https://kubernetes.io/docs/concepts/workloads/pods/init-containers/" target="_blank" rel="noopener noreferrer">init 컨테이너</a>를 사용하여 애플리케이션 Pod 초기화 중에 공유 볼륨으로 다운로드됩니다.</p>
<p><strong>아키텍처 개요</strong></p>
<p>그림 1의 다이어그램은 데이터 흐름의 일부로 생성, 저장 및 검색되는 페르소나, AWS 서비스, Kubernetes 구성 요소 및 아티팩트를 포함한 솔루션 아키텍처를 보여줍니다.</p>
<p><img decoding="async" loading="lazy" alt="그림 1: Amazon S3에서 모델 아티팩트를 검색하기 위한 init 컨테이너 아키텍처" src="/ai-on-eks/ko/assets/images/init-container-f396f3fd955f3893f9f20383700973e5.png" width="7920" height="3824" class="img_ev3q">
<em>그림 1: Amazon S3에서 모델 아티팩트를 검색하기 위한 init 컨테이너 아키텍처</em></p>
<p><strong>구현 가이드</strong></p>
<p>위의 아키텍처 다이어그램에 따라 각 팀의 주요 고수준 단계는 다음과 같습니다.</p>
<p>DevOps/MLOps/플랫폼 팀:</p>
<ol>
<li>init 컨테이너를 포함하도록 Kubernetes 배포 매니페스트(예: YAML 파일, Helm 차트)를 변경합니다.</li>
<li>먼저 실행되는 init 컨테이너를 사용하여 모델 아티팩트를 EC2 볼륨에 다운로드하는 단계를 구현합니다.</li>
<li>Kubernetes 배포 매니페스트를 변경하여:<!-- -->
<ol>
<li>init 컨테이너와 애플리케이션 컨테이너 간에 공유되는 볼륨을 정의합니다.</li>
<li>애플리케이션 컨테이너의 예상 경로 아래에 볼륨을 마운트합니다.</li>
</ol>
</li>
<li>init 컨테이너가 버킷의 적절한 접두사에 접근할 수 있도록 Pod IAM 권한을 조정합니다.</li>
<li>모델 아티팩트를 저장할 Amazon S3 버킷을 생성합니다.</li>
<li>빌드 스테이지 동안 모델 아티팩트를 제외하도록 컨테이너 이미지 정의를 변경합니다.</li>
</ol>
<p>ML 또는 애플리케이션 팀:</p>
<ol>
<li>SDLC의 일부로 모델 아티팩트를 Amazon S3 버킷에 업로드합니다.</li>
<li>이전과 같이 컨테이너 이미지 변경 사항을 Amazon ECR로 계속 푸시합니다.</li>
<li>이전과 같이 Kubernetes 배포 매니페스트를 사용하여 애플리케이션 Kubernetes 배포를 계속 정의합니다.</li>
</ol>
<p>다음 코드는 이미 조정된 Kubernetes 배포 매니페스트를 보여줍니다:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: apps/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: my-inference-app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  namespace: apps</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  selector:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    matchLabels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      app.kubernetes.io/name: my-inference-app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  replicas: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  template:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      labels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        app.kubernetes.io/name: my-inference-app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      serviceAccountName: my-inference-app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      initContainers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        - name: download</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          image: peakcom/s5cmd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          command:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - /bin/sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - -c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - &#x27;/s5cmd sync s3://my-ml-bucket/model-artifacts/my-model-1.2.3/* /model-artifacts/my-model-1.2.3&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          resources:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          volumeMounts:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - mountPath: /model-artifacts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              name: model-artifacts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      containers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        - name: app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          image: &lt;account-id&gt;.dkr.ecr.&lt;region&gt;.amazonaws.com/my-inference-app:3.5.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          ports:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - name: app-port</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              containerPort: 6060</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          resources:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          volumeMounts:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - mountPath: /app/model-artifacts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              name: model-artifacts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      volumes:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        - emptyDir: {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          name: model-artifacts</span><br></span></code></pre></div></div>
<p>위의 예는 위에서 설명한 단계를 따르며 Amazon S3에서 파일을 다운로드하는 데 <a href="https://github.com/peak/s5cmd/blob/master/README.md#Benchmarks" target="_blank" rel="noopener noreferrer">탁월한 성능</a>을 제공하는 오픈 소스 도구인 <a href="https://github.com/peak/s5cmd" target="_blank" rel="noopener noreferrer">s5cmd</a>를 사용합니다. 구현은 현재 모든 것이 이미지에 포함된 솔루션이 <code>my-model-1.2.3</code> 모델 아티팩트를 <code>/app/model-artifacts</code> 아래의 컨테이너 이미지에 번들하고 동일한 위치에 배치하여 해당 동작을 모방한다는 사실에 의존합니다.</p>
<p>위의 매니페스트에 나열된 <code>my-inference-app</code> 서비스 계정은 <code>my-ml-bucket</code> 버킷의 해당 접두사에서 읽을 수 있는 적절한 IAM 권한이 필요합니다. Amazon EKS에서 이를 달성하기 위해 권장되는 방법은 <a href="https://docs.aws.amazon.com/eks/latest/userguide/pod-identities.html" target="_blank" rel="noopener noreferrer">Amazon EKS Pod Identity 애드온</a>을 사용하는 것입니다. Amazon EKS Pod Identity는 AWS API를 통해 Kubernetes 서비스 계정과 AWS IAM 역할 간의 연결을 생성하는 방법을 제공합니다. 배포되면 Pod Identity 애드온은 클러스터의 모든 노드에 에이전트(DaemonSet을 통해)를 배치하고 해당 서비스 계정이 있는 Pod가 런타임에 해당 에이전트에서 필요한 자격 증명을 추출할 수 있도록 합니다.</p>
<p><strong>주요 이점</strong></p>
<p>이 솔루션은 컨테이너 이미지 크기를 줄여 AI/ML 추론 애플리케이션 컨테이너 시작 성능을 개선하는 고수준 접근 방식을 구현합니다. 네트워킹 조건과 <code>s5cmd</code>의 우수한 성능에 따라 이미지 풀을 직접 개선할 수도 있  습니다.</p>
<p><strong>추가 이점</strong></p>
<p>주요 이점 외에도 솔루션은 다음과 같은 잠재적인 추가 이점을 도입합니다:</p>
<ul>
<li>컨테이너 이미지를 다시 빌드하지 않고 애플리케이션과 별도로 모델 버전을 업데이트하는 기능</li>
<li>컨테이너 이미지를 다시 빌드하거나 크기를 늘리지 않고 모델을 A/B 테스트, 핫 스와프 또는 롤백하는 기능</li>
<li>모든 컨테이너 이미지에 패키징하지 않고 다른 애플리케이션 간에 모델을 공유하는 기능</li>
<li>스토리지 비용 절감 및 Intelligent-Tiering을 포함한 Amazon S3 스토리지 클래스 활용 기능</li>
<li>Amazon EKS Pod Identity <a href="https://docs.aws.amazon.com/eks/latest/userguide/pod-id-abac.html" target="_blank" rel="noopener noreferrer">세션 태그</a>를 사용하여 모델에 대한 세분화된 접근 제어 기능</li>
<li>실험 및 테스트를 지원하는 더 빠른 컨테이너 빌드</li>
<li>ML 또는 애플리케이션 팀 워크플로우의 최소 변경</li>
<li>간단한 교차 리전 복제</li>
</ul>
<p><strong>트레이드오프</strong></p>
<p>트레이드오프는 다음을 포함합니다:</p>
<ul>
<li>필요한 CI/CD 변경을 수행하고 재시도, 오류 처리, 백오프 등을 포함한 다운로드 프로세스를 처리하는 추가적인 운영 복잡성</li>
<li>본질적으로 ECR 기능을 복제하는 추가 스토리지 및 정리 관리</li>
<li>애플리케이션의 추가 복제본이 종종 동일한 EC2 인스턴스에 착륙하는 경우, 호스트의 컨테이너 런타임 캐시에 이미지가 저장되어 있으면 컨테이너 시작 시간에 더 유익할 수 있습니다.</li>
</ul>
<p><strong>변형 및 하이브리드 솔루션</strong></p>
<p>이 솔루션은 <a href="/ai-on-eks/ko/docs/guidance/container-startup-time/accelerate-pull-process">풀 프로세스 가속화</a> 솔루션 그룹과 잘 통합되어 컨테이너 이미지 크기와 풀 시간을 모  두 개선합니다.</p>
<p>아티팩트를 메모리로 직접 읽어 로컬 디스크에 저장하는 중간 단계를 건너뛰는 AI/ML 추론 애플리케이션의 경우 &quot;Mountpoint CSI 드라이버를 사용하여 Amazon S3에서 직접 모델 아티팩트를 메모리로 읽기&quot; 솔루션이 다운로드 성능을 더욱 개선하기 위해 대체하거나 추가로 사용될 수 있습니다.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="amazon-파일-스토리지-서비스를-사용하여-모델-아티팩트-호스팅">Amazon 파일 스토리지 서비스를 사용하여 모델 아티팩트 호스팅<a href="#amazon-파일-스토리지-서비스를-사용하여-모델-아티팩트-호스팅" class="hash-link" aria-label="Amazon 파일 스토리지 서비스를 사용하여 모델 아티팩트 호스팅에 대한 직접 링크" title="Amazon 파일 스토리지 서비스를 사용하여 모델 아티팩트 호스팅에 대한 직접 링크" translate="no">​</a></h2>
<p>이 섹션에서는 모델 아티팩트를 컨테이너 이미지에서 분리하는 데 사용할 수 있는 다양한 Amazon FSx 서비스를 다룹니다. Amazon FSx는 FSx for OpenZFS, FSx for Lustre, FSx for NetApp ONTAP과 같은 다양한 서비스를 제공합니다. 이러한 서비스는 기반 기술이 다르며 성능과 확장 특성이 다릅니다. 이러한 서비스에 대해 자세히 알아보려면 <a href="https://aws.amazon.com/fsx/when-to-choose-fsx/" target="_blank" rel="noopener noreferrer">문서</a>를 참조하십시오.</p>
<p>적절한 Amazon FSx 서비스를 선택하는 것은 사용 사례의 특성에 따라 다릅니다. 모델 크기, 모델 수, 업데이트 빈도 및 모델을 가져오는 클라이언트 수와 같은 요소가 선택한 서비스에 영향을 미칠 수 있습니다.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>정보</div><div class="admonitionContent_BuS1"><p>이 섹션은 진행 중이며 향후 더 많은 FSx 서비스별 가이드가 추가될 예정입니다.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="trident-csi-드라이버를-사용하여-amazon-fsx-for-netapp-ontap의-모델-아티팩트에-대한-접근-제공">Trident CSI 드라이버를 사용하여 Amazon FSx for NetApp ONTAP의 모델 아티팩트에 대한 접근 제공<a href="#trident-csi-드라이버를-사용하여-amazon-fsx-for-netapp-ontap의-모델-아티팩트에-대한-접근-제공" class="hash-link" aria-label="Trident CSI 드라이버를 사용하여 Amazon FSx for NetApp ONTAP의 모델 아티팩트에 대한 접근 제공에 대한 직접 링크" title="Trident CSI 드라이버를 사용하여 Amazon FSx for NetApp ONTAP의 모델 아티팩트에 대한 접근 제공에 대한 직접 링크" translate="no">​</a></h3>
<p><strong>아키텍처 개요</strong></p>
<p>그림 2의 다이어그램은 데이터 흐름의 일부로 생성, 저장 및 검색되는 페르소나, AWS 서비스, Kubernetes 구성 요소 및 아티팩트를 포함한 솔루션 아키텍처를 보여줍니다.</p>
<p><img decoding="async" loading="lazy" alt="그림 2: Trident CSI 드라이버를 사용하여 FSx for NetApp ONTAP에서 모델 아티팩트 저장 및 접근" src="/ai-on-eks/ko/assets/images/fsxn-eeedcc28e826980f216dd70176ebddd1.png" width="8156" height="3636" class="img_ev3q">
<em>그림 2: Trident CSI 드라이버를 사용하여 FSx for NetApp ONTAP에서 모델 아티팩트 저장 및 접근</em></p>
<p><strong>구현 가이드</strong></p>
<p>위의 아키텍처 다이어그램에 따라 각 팀의 주요 고수준 단계는 다음과 같습니다.</p>
<p>DevOps/MLOps/플랫폼 팀:</p>
<ol>
<li>FSx for NetApp ONTAP 파일 시스템, 스토리지 가상 머신(SVM) 및 자격 증명 시크릿을 생성합니다.</li>
<li>Trident CSI 드라이버를 설치하고 필요한 IAM 권한을 제공하며 Trident CSI 스토리지 클래스를 정의합니다.</li>
<li>파일 시스템, SVM 및 자격 증명을 사용하여 Trident NAS 백엔드를 정의합니다.</li>
<li>위의 스토리지 클래스를 사용하여 애플리케이션 네임스페이스에 공유되는 동적 프로비전 PVC를 정의하고 배포합니다.</li>
<li>PVC를 마운트하고 해당 볼륨에 모델을 다운로드하는 Kubernetes 작업을 구현합니다.</li>
<li>S3에 업로드되고 게시됨으로 &quot;표시&quot;된(예: 태그를 통해) 각 모델에 대해 작업을 트리거합니다.</li>
<li>빌드 스테이지 동안 모델 아티팩트를 제외하도록 컨테이너 이미지 정의를 변경합니다.</li>
<li>애플리케이션 매니페스트를 변경하여:<!-- -->
<ol>
<li>공유 PVC를 가져오는 PVC를 포함합니다.</li>
<li>애플리케이션 Pod에 대한 볼륨을 정의합니다.</li>
<li>애플리케이션 컨테이너의 예상 경로 아래에 볼륨을 마운트합니다.</li>
</ol>
</li>
</ol>
<p>ML 또는 애플리케이션 팀:</p>
<ol>
<li>SDLC의 일부로 모델 아티팩트를 Amazon S3 버킷 또는 Git LFS에 업로드합니다.</li>
<li>이전과 같이 컨테이너 이미지 변경 사항을 Amazon ECR로 계속 푸시합니다.</li>
<li>이전과 같이 Kubernetes 배포 매니페스트를 사용하여 애플리케이션 Kubernetes 배포를 계속 정의합니다.</li>
</ol>
<p>위의 단계를 더 설명하기 위해 구현의 가장 중요한 부분에 대한 관련 코드 예제 모음이 아래에 있습니다.</p>
<p>다음은 Trident CSI 드라이버에 의해 처리될 스토리지 클래스입니다:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: storage.k8s.io/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: StorageClass</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: ontap-nas</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">provisioner: csi.trident.netapp.io</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">volumeBindingMode: WaitForFirstConsumer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">parameters:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  backendType: ontap-nas</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fsType: ext4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">allowVolumeExpansion: True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">reclaimPolicy: Delete</span><br></span></code></pre></div></div>
<p>다음은 FSx for NetApp ONTAP과의 백엔드 통합을 위한 Trident 백엔드 구성입니다:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: trident.netapp.io/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: TridentBackendConfig</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: svm1-nas</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  namespace: kube-system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  version: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  backendName: svm1-nas</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  storageDriverName: ontap-nas</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  managementLIF: ${SVM_MGMT_DNS}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  svm: svm1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  aws:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fsxFilesystemID: ${FSXN_ID}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    apiRegion: ${AWS_REGION}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  credentials:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name: ${SVM_ADMIN_CREDS_SECRET_ARN}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type: awsarn</span><br></span></code></pre></div></div>
<p>다음은 Trident에 의해 처리되고 네임스페이스 간에 공유될 수 있는 PVC의 예입니다:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kind: PersistentVolumeClaim</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: some-model</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  namespace: kube-system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  annotations:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    trident.netapp.io/shareToNamespace: apps</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  storageClassName: ontap-nas</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  accessModes:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - ReadWriteMany</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  resources:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    requests:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      storage: 20Gi</span><br></span></code></pre></div></div>
<p>그런 다음 PVC를 마운트하고 S3의 데이터로 동적 PV 뒤의 FSx for NetApp ONTAP 볼륨을 채우는 Job을 사용할 수 있습니다:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: batch/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: Job</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: fsxn-loader-some-model</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  namespace: kube-system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  labels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    job-type: fsxn-loader</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pvc: some-model</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  backoffLimit: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ttlSecondsAfterFinished: 30</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  template:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      labels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        job-type: fsxn-loader</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pvc: some-model</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      restartPolicy: Never</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      containers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        - name: loader</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          image: peakcom/s5cmd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          command:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - /bin/sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - -c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - &#x27;/s5cmd sync --delete s3://${MODELS_BUCKET}/${MODELS_FOLDER}/some-model/* /model&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          resources:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          volumeMounts:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - name: model</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              mountPath: /model</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      volumes:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        - name: model</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          persistentVolumeClaim:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            claimName: some-model</span><br></span></code></pre></div></div>
<p>이제 PVC가   클러스터에 존재하며 <code>TridentVolumeReference</code> CR에 의해 정의된 Trident PVC 공유를 통해 <code>apps</code> 네임스페이스의 애플리케이션에서 사용될 수 있습니다:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: trident.netapp.io/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: TridentVolumeReference</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: some-model</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  namespace:apps</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  pvcName: some-model</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  pvcNamespace: kube-system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: PersistentVolumeClaim</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: some-model</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  namespace: apps</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  annotations:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    trident.netapp.io/shareFromPVC: kube-system/some-model</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  storageClassName: ontap-nas</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  accessModes:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - ReadOnlyMany</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  resources:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    requests:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      storage: 20Gi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: apps/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: some-app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  namespace: apps</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  selector:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    matchLabels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      app.kubernetes.io/name: some-app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  replicas: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  template:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      labels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        app.kubernetes.io/name: some-app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      containers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        - name: app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          image: some-app:1.2.3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          volumeMounts:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - name: data-volume</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              mountPath: /app/models/some-model</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      volumes:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        - name: data-volume</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          persistentVolumeClaim:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            claimName: some-model</span><br></span></code></pre></div></div>
<p><strong>주요 이점</strong></p>
<p>이 솔루션은 컨테이너 이미지 크기를 줄여 AI/ML 추론 애플리케이션 컨테이너 시작 성능을 개선하는 고수준 접근 방식을 구현합니다. 모델 아티팩트를 애플리케이션에서 사용할 수 있게 되는 시간을 개선합니다(더 이상 다운로드할 필요가 없으므로).</p>
<p><strong>추가 이점</strong></p>
<p>주요 이점 외에도 솔루션은 다음과 같은 잠재적인 추가 이점을 도입합니다:</p>
<ul>
<li>컨테이너 이미지를 다시 빌드하지 않고 애플리케이션과 별도로 모델 버전을 업데이트하는 기능</li>
<li>컨테이너 이미지를 다시 빌드하거나 크기를 늘리지 않고 모델을 A/B 테스트, 핫 스와프 또는 롤백하는 기능</li>
<li>모든 컨테이너 이미지에 패키징하지 않고 다른 애플리케이션 간에 모델을 공유하는 기능</li>
<li>모델 복사 필요성을 줄이고 새로운 작업을 생성하는 Trident 클론, 공유 및 스냅샷 관련 기능을 통한 Kubernetes 기반 프로비저닝 및 접근 제어</li>
<li>모델에 대한 POSIX 기반 접근 제어 기능</li>
<li>실험 및 테스트를 지원하는 더 빠른 컨테이너 빌드</li>
<li>ML 또는 애플리케이션 팀 워크플로우의 최소 변경</li>
</ul>
<p><strong>트레이드오프</strong></p>
<p>트레이드오프는 다음을 포함합니다:</p>
<ul>
<li>필요한 CI/CD 변경을 수행하고 로더 프로세스를 유지하는 추가적인 운영 복잡성</li>
<li>운영 및 유지 관리해야 할 추가 소프트웨어(Trident)</li>
<li>스토리지 비용을 줄이기 위해 사용자 정의 S3/FSx for NetApp ONTAP TTL/보존 관련 메커니즘을 구현해야 할 필요성</li>
<li>모델 아티팩트의 읽기 성능을 컨테이너 이미지 다운로드 시간과 비교하여 측정해야 함</li>
<li>더 복잡한 교차 리전 복제</li>
</ul>
<p><strong>변형 및 하이브리드 솔루션</strong></p>
<p>이 솔루션은 <a href="/ai-on-eks/ko/docs/guidance/container-startup-time/accelerate-pull-process">풀 프로세스 가속화</a> 솔루션 그룹과 잘 통합되어 컨테이너 이미지 크기와 풀 시간을 모두 개선합니다.</p>
<p>아티팩트를 메모리로 읽어 로컬 디스크에 저장하는 중간 단계를 건너뛰는 AI/ML 추론 애플리케이션의 경우 &quot;Mountpoint CSI 드라이버를 사용하여 Amazon S3에서 직접 모델 아티팩트를 메모리로 읽기&quot; 솔루션과 유사하게 다운로드 성능을 더욱 개선하기 위해 대체로(또는 추가로) 사용될 수 있습니다.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="사용자-정의-amazon-ami에-모델-아티팩트-베이킹">사용자 정의 Amazon AMI에 모델 아티팩트 베이킹<a href="#사용자-정의-amazon-ami에-모델-아티팩트-베이킹" class="hash-link" aria-label="사용자 정의 Amazon AMI에 모델 아티팩트 베이킹에 대한 직접 링크" title="사용자 정의 Amazon AMI에 모델 아티팩트 베이킹에 대한 직접 링크" translate="no">​</a></h2>
<p><strong>아키텍처 개요</strong></p>
<p><img decoding="async" loading="lazy" alt="그림 3: 사용자 정의 Amazon AMI에 모델 아티팩트 베이킹" src="/ai-on-eks/ko/assets/images/custom-ami-967880e368b01f8162b83437cc95c3ef.png" width="8140" height="3644" class="img_ev3q"></p>
<p>그림 3: 사용자 정의 Amazon AMI에 모델 아티팩트 베이킹</p>
<p>이 솔루션은 매우 드물게 변경되는 모델이 있고 시작 시간 지연에 매우 민감하며 네트워크 연결이 제한된 환경에 적합할 수 있습니다.</p>
<p><strong>구현 가이드</strong></p>
<p>위의 아키텍처 다이어그램에 따라 각 팀의 주요 고수준 단계는 다음과 같습니다.</p>
<p>DevOps/MLOps/플랫폼 팀:</p>
<ol>
<li>EC2 Image Builder 레시피 또는 Packer 템플릿을 생성하고 Git에 푸시합니다.</li>
<li>AMI 베이킹 단계를 포함하도록 CI/CD 프로세스를 업데이트합니다.</li>
<li>AMI를 사용하는 해당 Karpenter 노드 풀을 생성합니다.</li>
<li>매개변수로 제공될 노드 풀에 대한 노드 셀렉터를 포함하도록 애플리케이션 매니페스트를 변경합니다.</li>
</ol>
<p>ML 또는 애플리케이션 팀:</p>
<ol>
<li>SDLC의 일부로 모델 아티팩트를 Amazon S3 버킷 또는 Git LFS에 업로드합니다.</li>
<li>이전과 같이 컨테이너 이미지 변경 사항을 Amazon ECR로 계속 푸시합니다.</li>
<li>Kubernetes 매니페스트 배포에 대한 매개변수로 적절한 모델별 노드 풀 레이블을 제공합니다.</li>
</ol>
<p><strong>주요 이점</strong></p>
<p>솔루션은 다음과 같은 주요 이점을 제공합니다:</p>
<ul>
<li>모델이 컨테이너 시작 시 즉시 사용 가능하므로 다운로드 지연 없음</li>
<li>네트워크 종속성 없음</li>
</ul>
<p><strong>추가 이점</strong></p>
<p>주요 이점 외에도 솔루션은 다음과 같은 잠재적인 추가 이점을 도입합니다:</p>
<ul>
<li>Kubernetes 아티팩트에 대한 변경 없음</li>
<li>Karpenter 드리프트 감지를 통한 새 모델 버전에 대한 간소화된 롤아웃</li>
<li>S3 또는 FSx와 같은 추가 서비스에 의존할 필요 없음</li>
</ul>
<p><strong>트레이드오프</strong></p>
<p>트레이드오프는 다음을 포함합니다:</p>
<ul>
<li>Image Builder 또는 Packer를 CI/CD 프로세스에 통합하는 상당한 추가 운영 복잡성</li>
<li>실행 중인 인스턴스에서 AMI에 접근해야 하는 더 복잡한 설정으로 인한 느린 빌드 시간과 실험, 디버깅 및 테스트를 위한 더 긴 피드백 루프</li>
<li>모든 모델을 함께 배치하는 경우 스토리지 비용 또는 애플리케이션을 해당 AMI에 스케줄링하는 관리가 필요한 AMI별 모델 접근 방식으로 인한 극단적인 클러스터 세분화</li>
</ul>
<p><strong>변형 및 하이브리드 솔루션</strong></p>
<p>이 솔루션은 <a href="/ai-on-eks/ko/docs/guidance/container-startup-time/accelerate-pull-process">풀 프로세스 가속화</a> 솔루션 그룹과 잘 통합되어 컨테이너 이미지 크기와 풀 시간을 모두 개선합니다.</p>
<blockquote>
<p>이것은 서빙 프레임워크와의 정확성 회귀 또는 호환성 문제를 도입할 수 있습니다.</p>
</blockquote></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/awslabs/ai-on-eks/blob/main/website/docs/guidance/container-startup-time/1-reduce-container-image-size/14-decoupling-model-artifacts.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>페이지 편집</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="문서 페이지"><a class="pagination-nav__link pagination-nav__link--prev" href="/ai-on-eks/ko/docs/guidance/container-startup-time/reduce-container-image-size/optimize-image-size"><div class="pagination-nav__sublabel">이전</div><div class="pagination-nav__label">컨테이너 이미지 크기 최적화</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/ai-on-eks/ko/docs/guidance/container-startup-time/accelerate-pull-process"><div class="pagination-nav__sublabel">다음</div><div class="pagination-nav__label">풀 프로세스 가속화</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#init-컨테이너를-사용하여-amazon-s3에서-모델-아티팩트-다운로드" class="table-of-contents__link toc-highlight">init 컨테이너를 사용하여 Amazon S3에서 모델 아티팩트 다운로드</a></li><li><a href="#amazon-파일-스토리지-서비스를-사용하여-모델-아티팩트-호스팅" class="table-of-contents__link toc-highlight">Amazon 파일 스토리지 서비스를 사용하여 모델 아티팩트 호스팅</a><ul><li><a href="#trident-csi-드라이버를-사용하여-amazon-fsx-for-netapp-ontap의-모델-아티팩트에-대한-접근-제공" class="table-of-contents__link toc-highlight">Trident CSI 드라이버를 사용하여 Amazon FSx for NetApp ONTAP의 모델 아티팩트에 대한 접근 제공</a></li></ul></li><li><a href="#사용자-정의-amazon-ami에-모델-아티팩트-베이킹" class="table-of-contents__link toc-highlight">사용자 정의 Amazon AMI에 모델 아티팩트 베이킹</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">참여하기</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/awslabs/ai-on-eks" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Built with ❤️ at AWS  <br> © ${new Date().getFullYear()} Amazon.com, Inc. or its affiliates. All Rights Reserved</div></div></div></footer><script defer="" src="https://static.cloudflareinsights.com/beacon.min.js" data-cf-beacon="{&quot;token&quot;: &quot;7fbc7ab02fae4767b1af2588eba0cdf2&quot;}"></script></div>
</body>
</html>